<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xiaguyangdie.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="shell脚本语言">
<meta property="og:type" content="article">
<meta property="og:title" content="shell脚本语言">
<meta property="og:url" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/index.html">
<meta property="og:site_name" content="峡谷杨爹的个人博客">
<meta property="og:description" content="shell脚本语言">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929131259714.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929150640257.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929152419747.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929184933107.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929190418410.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929190445946.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929190638195.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929190652238.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929190742557.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929190926304.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929191002434.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929203304243.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929205549032.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929211736986.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929214912582.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929221209118.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929221707875.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929222259400.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930131805074.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930133943607.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930135540378.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930142111775.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930144557396.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930165207290.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930170136107.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930191748225.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930192104926.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930192142836.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930192217058.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930202039459.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930184931327.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930190315458.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930214751655.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930221417928.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930221549639.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930231436994.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233006165.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233224535.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233257345.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233327129.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233431230.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233511502.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233555326.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233735371.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220930233857801.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001132116871.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001132233404.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001132605681.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001132822078.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001133011743.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001133115603.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001133152498.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001133441054.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001133304275.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001133514483.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001135737983.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001173408832.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001174247850.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001174702340.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001175107205.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001175732090.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001180110429.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001180816520.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001181621059.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001182433197.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001182625949.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001182827717.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001185009012.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001211128959.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001213139090.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221001213751741.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002134836470.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002142727139.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002143959978.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002144557991.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002144838367.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002152700205.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002153104391.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002162528008.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002162949187.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002163523540.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002165438693.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002170512112.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002172715171.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20221002173454969.png">
<meta property="article:published_time" content="2023-02-26T08:27:31.129Z">
<meta property="article:modified_time" content="2024-03-23T15:24:32.234Z">
<meta property="article:author" content="峡谷杨爹">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/image-20220929131259714.png">

<link rel="canonical" href="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>shell脚本语言 | 峡谷杨爹的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">峡谷杨爹的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习使我快乐，游戏使我疯狂</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    

  <a href="https://github.com/xiaguyangdie" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%8D%9A%E5%AE%A2.webp">
      <meta itemprop="name" content="峡谷杨爹">
      <meta itemprop="description" content="write less, do more">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="峡谷杨爹的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          shell脚本语言
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-26 16:27:31" itemprop="dateCreated datePublished" datetime="2023-02-26T16:27:31+08:00">2023-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-23 23:24:32" itemprop="dateModified" datetime="2024-03-23T23:24:32+08:00">2024-03-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/" class="post-meta-item leancloud_visitors" data-flag-title="shell脚本语言" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">评论次数：</span>
    
    <a title="valine" href="/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>93k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:24</span>
            </span>
            <div class="post-description">shell脚本语言</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-shell简介"><a href="#1-shell简介" class="headerlink" title="1.shell简介"></a>1.shell简介</h1><ul>
<li>shell是一个<strong>命令行解释器</strong>，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用shell来启动、挂起、停止，甚至是编写一些程序</li>
<li>shell是用户与Linux内核之间的解释器</li>
<li><strong>常见的shell解释器</strong><ul>
<li>&#x2F;bin&#x2F;bash</li>
<li>&#x2F;bin&#x2F;sh</li>
<li>&#x2F;bin&#x2F;csh</li>
<li>&#x2F;bin&#x2F;tcsh</li>
</ul>
</li>
<li>解释器负责将用户的指令翻译为内核可以识别的指令</li>
<li><strong>通过usermod、chsh可以更改登录shell</strong></li>
</ul>
<p><img src="image-20220929131259714.png" alt="shell脚本语言/image-20220929131259714"></p>
<blockquote>
<p>查看当前系统包含的解释器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# cat /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">[root@localhost /]#</span><br></pre></td></tr></table></figure>

<blockquote>
<p>安装其它shell解释器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install tcsh</span><br></pre></td></tr></table></figure>

<p><strong>报错</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# yum install tcsh</span><br><span class="line">已加载插件：fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">Could not retrieve mirrorlist http://mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=os&amp;infra=stock error was</span><br><span class="line">14: curl#6 - &quot;Could not resolve host: mirrorlist.centos.org; 未知的错误&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> One of the configured repositories failed (未知),</span><br><span class="line"> and yum doesn&#x27;t have enough cached data to continue. At this point the only</span><br><span class="line"> safe thing yum can do is fail. There are a few ways to work &quot;fix&quot; this:</span><br><span class="line"></span><br><span class="line">     1. Contact the upstream for the repository and get them to fix the problem.</span><br><span class="line"></span><br><span class="line">     2. Reconfigure the baseurl/etc. for the repository, to point to a working</span><br><span class="line">        upstream. This is most often useful if you are using a newer</span><br><span class="line">        distribution release than is supported by the repository (and the</span><br><span class="line">        packages for the previous distribution release still work).</span><br><span class="line"></span><br><span class="line">     3. Run the command with the repository temporarily disabled</span><br><span class="line">            yum --disablerepo=&lt;repoid&gt; ...</span><br><span class="line"></span><br><span class="line">     4. Disable the repository permanently, so yum won&#x27;t use it by default. Yum</span><br><span class="line">        will then just ignore the repository until you permanently enable it</span><br><span class="line">        again or use --enablerepo for temporary usage:</span><br><span class="line"></span><br><span class="line">            yum-config-manager --disable &lt;repoid&gt;</span><br><span class="line">        or</span><br><span class="line">            subscription-manager repos --disable=&lt;repoid&gt;</span><br><span class="line"></span><br><span class="line">     5. Configure the failing repository to be skipped, if it is unavailable.</span><br><span class="line">        Note that yum will try to contact the repo. when it runs most commands,</span><br><span class="line">        so will have to try and fail each time (and thus. yum will be be much</span><br><span class="line">        slower). If it is a very temporary problem though, this is often a nice</span><br><span class="line">        compromise:</span><br><span class="line"></span><br><span class="line">            yum-config-manager --save --setopt=&lt;repoid&gt;.skip_if_unavailable=true</span><br><span class="line"></span><br><span class="line">Cannot find a valid baseurl for repo: base/7/x86_64</span><br></pre></td></tr></table></figure>

<p>解决方案：<a target="_blank" rel="noopener" href="https://blog.csdn.net/chj_1224365967/article/details/107866170">https://blog.csdn.net/chj_1224365967/article/details/107866170</a></p>
<blockquote>
<p>再次安装</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# yum install tcsh</span><br><span class="line">已加载插件：fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirror.lzu.edu.cn</span><br><span class="line"> * extras: mirror.lzu.edu.cn</span><br><span class="line"> * updates: mirror.lzu.edu.cn</span><br><span class="line">base                                   | 3.6 kB     00:00     </span><br><span class="line">extras                                 | 2.9 kB     00:00     </span><br><span class="line">updates                                | 2.9 kB     00:00     </span><br><span class="line">(1/4): base/7/x86_64/group_gz            | 153 kB   00:00     </span><br><span class="line">(2/4): extras/7/x86_64/primary_db        | 250 kB   00:00     </span><br><span class="line">(3/4): base/7/x86_64/primary_db          | 6.1 MB   00:01     </span><br><span class="line">(4/4): updates/7/x86_64/primary_db       |  17 MB   00:06     </span><br><span class="line">正在解决依赖关系</span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">正在检查事务</span></span><br><span class="line"><span class="meta prompt_">---&gt; </span><span class="language-bash">软件包 tcsh.x86_64.0.6.18.01-17.el7_9.1 将被 安装</span></span><br><span class="line"><span class="meta prompt_">--&gt; </span><span class="language-bash">解决依赖关系完成</span></span><br><span class="line"></span><br><span class="line">依赖关系解决</span><br><span class="line"></span><br><span class="line">==============================================================</span><br><span class="line"> Package  架构       版本                   源           大小</span><br><span class="line">==============================================================</span><br><span class="line">正在安装:</span><br><span class="line"> tcsh     x86_64     6.18.01-17.el7_9.1     updates     339 k</span><br><span class="line"></span><br><span class="line">事务概要</span><br><span class="line">==============================================================</span><br><span class="line">安装  1 软件包</span><br><span class="line"></span><br><span class="line">总下载量：339 k</span><br><span class="line">安装大小：662 k</span><br><span class="line">Is this ok [y/d/N]: y</span><br><span class="line">Downloading packages:</span><br><span class="line">tcsh-6.18.01-17.el7_9.1.x86_64.rpm       | 339 kB   00:00     </span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction test</span><br><span class="line">Transaction test succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  正在安装    : tcsh-6.18.01-17.el7_9.1.x86_64            1/1 </span><br><span class="line">  验证中      : tcsh-6.18.01-17.el7_9.1.x86_64            1/1 </span><br><span class="line"></span><br><span class="line">已安装:</span><br><span class="line">  tcsh.x86_64 0:6.18.01-17.el7_9.1                            </span><br><span class="line"></span><br><span class="line">完毕！</span><br></pre></td></tr></table></figure>

<blockquote>
<p>再次查看当前系统包含的解释器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# cat /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/bin/tcsh</span><br><span class="line">/bin/csh</span><br><span class="line">[root@localhost /]# </span><br></pre></td></tr></table></figure>

<blockquote>
<p>新建shell用户</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd 用户名</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改用户的解释器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -s /bin/tcsh 用户名</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看用户的解释器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep 用户名 /etc/passwd</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# useradd test</span><br><span class="line">useradd：用户“test”已存在</span><br><span class="line">[root@localhost /]# usermod -s /bin/tcsh test</span><br><span class="line">[root@localhost /]# grep test /etc/passwd</span><br><span class="line">test:x:1000:1000::/home/test:/bin/tcsh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改用户的解释器2</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/bash 用户名</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# chsh -s /bin/bash test</span><br><span class="line">Changing shell for test.</span><br><span class="line">Shell changed.</span><br><span class="line">[root@localhost /]# grep test /etc/passwd</span><br><span class="line">test:x:1000:1000::/home/test:/bin/bash</span><br></pre></td></tr></table></figure>

<h2 id="1-1-Bash解释器"><a href="#1-1-Bash解释器" class="headerlink" title="1.1 Bash解释器"></a>1.1 Bash解释器</h2><blockquote>
<p>基本特性</p>
</blockquote>
<ul>
<li>快捷键、Tab键补齐</li>
<li>命令历史</li>
<li>命令别名</li>
<li>标准输入与输出的重定向(&gt;、&gt;&gt;、2&gt;、2&gt;&gt;、&amp;&gt;)</li>
<li>管道(l)</li>
</ul>
<blockquote>
<p>例子</p>
</blockquote>
<ul>
<li>标准输入与输出的重定向</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ls #在页面中显示当前目录下的文件名</span><br><span class="line">ls &gt; a.txt #不在页面中显示，而是新建一个a.txt文件，并将当前目录下的文件名输出到a.txt文件中;每次会新建一个a.txt文件，覆盖前一个a.txt文件，然后重新输出到a.txt文件中</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">先创建文件后输出</span></span><br><span class="line">cat 文件名 #查看文件的内容</span><br><span class="line"></span><br><span class="line">ls &gt;&gt; a.txt #追加</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">[root@localhost ~]# ls &gt; a.txt</span><br><span class="line">[root@localhost ~]# cat a.txt</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">a.txt</span><br><span class="line">[root@localhost ~]# ls &gt; a.txt</span><br><span class="line">[root@localhost ~]# cat a.txt</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">a.txt</span><br><span class="line">[root@localhost ~]# ls &gt;&gt; a.txt</span><br><span class="line">[root@localhost ~]# cat a.txt</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">a.txt</span><br><span class="line">anaconda-ks.cfg</span><br><span class="line">a.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls &gt; #错误使用，报错信息会打印到页面中，但是文件还是会被创建</span><br><span class="line">ls 2&gt; #错误使用，报错信息不会打印到页面中，而是存储到文件中</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls xxyyzz.txt &gt; b.txt</span><br><span class="line">ls: 无法访问xxyyzz.txt: 没有那个文件或目录</span><br><span class="line">[root@localhost ~]# ls xxyyzz.txt 2&gt; c.txt</span><br><span class="line">[root@localhost ~]# cat c.txt</span><br><span class="line">ls: 无法访问xxyyzz.txt: 没有那个文件或目录</span><br><span class="line">[root@localhost ~]# cat b.txt</span><br><span class="line">[root@localhost ~]# </span><br></pre></td></tr></table></figure>

<ul>
<li>管道(l)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list | grep bash # 前|后,grep过滤,就是后面从前面输出的内容中过滤出bash相关内容</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum list | grep bash</span><br><span class="line">bash.x86_64                               4.2.46-34.el7                @anaconda</span><br><span class="line">bash.x86_64                               4.2.46-35.el7_9              updates  </span><br><span class="line">bash-completion.noarch                    1:2.1-8.el7                  base     </span><br><span class="line">bash-doc.x86_64                           4.2.46-35.el7_9              updates  </span><br><span class="line">libguestfs-bash-completion.noarch         1:1.40.2-10.el7              base     </span><br><span class="line">libvirt-bash-completion.x86_64            4.5.0-36.el7_9.5             updates  </span><br><span class="line">pcp-pmda-bash.x86_64                      4.3.2-13.el7_9               updates  </span><br></pre></td></tr></table></figure>

<h2 id="1-2-ksh解释器"><a href="#1-2-ksh解释器" class="headerlink" title="1.2 ksh解释器"></a>1.2 ksh解释器</h2><blockquote>
<p>安装</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install ksh</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/shells</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/bash</span><br><span class="line">/usr/bin/sh</span><br><span class="line">/usr/bin/bash</span><br><span class="line">/bin/tcsh</span><br><span class="line">/bin/csh</span><br><span class="line">/bin/ksh</span><br><span class="line">/bin/rksh</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ksh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">anaconda-ks.cfg  a.txt	b.txt  c.txt</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span> /</span></span><br><span class="line">bin  boot  dev	etc  home  lib	lib64  media  mnt  opt	proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">clear</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">bash</span></span><br><span class="line">[root@localhost ~]# </span><br></pre></td></tr></table></figure>

<h2 id="1-3-shell执行命令的方式"><a href="#1-3-shell执行命令的方式" class="headerlink" title="1.3 shell执行命令的方式"></a>1.3 shell执行命令的方式</h2><ul>
<li>交互式(命令行)<ul>
<li>人工干预</li>
<li>逐条解释执行、效率低</li>
</ul>
</li>
<li>非交互式(脚本)<ul>
<li>需要提前设计</li>
<li>批量执行、效率高</li>
</ul>
</li>
</ul>
<h1 id="2-shell脚本设计和运行"><a href="#2-shell脚本设计和运行" class="headerlink" title="2.shell脚本设计和运行"></a>2.shell脚本设计和运行</h1><h2 id="2-1-脚本设计"><a href="#2-1-脚本设计" class="headerlink" title="2.1 脚本设计"></a>2.1 脚本设计</h2><h3 id="2-1-1-什么是shell脚本"><a href="#2-1-1-什么是shell脚本" class="headerlink" title="2.1.1 什么是shell脚本"></a>2.1.1 什么是shell脚本</h3><p><img src="image-20220929150640257.png" alt="shell脚本语言/image-20220929150640257"></p>
<h3 id="2-1-2-第一个shell脚本"><a href="#2-1-2-第一个shell脚本" class="headerlink" title="2.1.2 第一个shell脚本"></a>2.1.2 第一个shell脚本</h3><ul>
<li>编写一个hello word脚本<ul>
<li>新建文件</li>
<li>添加可执行语句（命令）</li>
<li>给文件添加x执行权限</li>
</ul>
</li>
</ul>
<blockquote>
<p>新建一个目录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir 目录名</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mkdir shell</span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">anaconda-ks.cfg  shell</span><br><span class="line">[root@localhost ~]# mkdir shell/day01</span><br><span class="line">[root@localhost ~]# ls</span><br><span class="line">anaconda-ks.cfg  shell</span><br><span class="line">[root@localhost ~]# cd shell</span><br><span class="line">[root@localhost shell]# ls</span><br><span class="line">day01</span><br></pre></td></tr></table></figure>

<blockquote>
<p>新建文件</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /root/shell/day01/first.sh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>添加可执行语句（命令）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;hello world&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>给文件添加x执行权限</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /root/shell/day01/first.sh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>执行脚本</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/shell/day01/first.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /root/shell/day01/first.sh</span><br><span class="line">[root@localhost ~]# chmod +x /root/shell/day01/first.sh</span><br><span class="line">[root@localhost ~]# /root/shell/day01/first.sh</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>

<h3 id="2-1-3-规范脚本的构成"><a href="#2-1-3-规范脚本的构成" class="headerlink" title="2.1.3 规范脚本的构成"></a>2.1.3 规范脚本的构成</h3><ul>
<li>#！脚本声明（使用哪一种解释器解释代码）</li>
<li>注释信息（步骤、思路、用途等），以#开始的为注释信息</li>
<li>可执行语句</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">A <span class="built_in">test</span> program <span class="keyword">for</span> shell</span></span><br><span class="line">echo &quot;hello world&quot;</span><br></pre></td></tr></table></figure>

<p><img src="image-20220929152419747.png" alt="shell脚本语言/image-20220929152419747"></p>
<h2 id="2-2-脚本运行"><a href="#2-2-脚本运行" class="headerlink" title="2.2 脚本运行"></a>2.2 脚本运行</h2><ul>
<li>方法一：需要为文件赋予可执行的权限<ul>
<li>绝对路径执行</li>
<li>相对路径执行</li>
</ul>
</li>
<li>方法二：不需要文件有可执行的权限<ul>
<li>sh 脚本文件名</li>
<li><strong>source 脚本文件名 #不会启动子线程，通过pstree查看进程树</strong></li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell]# cd day01</span><br><span class="line">[root@localhost day01]# chmod -x first.sh    #取消脚本的可执行权限</span><br><span class="line">[root@localhost day01]# ll</span><br><span class="line">总用量 4</span><br><span class="line">-rw-r--r--. 1 root root 57 9月  29 15:24 first.sh</span><br><span class="line">[root@localhost day01]# ./first.sh</span><br><span class="line">bash: ./first.sh: 权限不够</span><br><span class="line">[root@localhost day01]# /root/shell/day01/first.sh</span><br><span class="line">bash: /root/shell/day01/first.sh: 权限不够</span><br><span class="line">[root@localhost day01]# sh first.sh</span><br><span class="line">hello world</span><br><span class="line">[root@localhost day01]# source first.sh</span><br><span class="line">hello world</span><br><span class="line">[root@localhost day01]# ksh first.sh</span><br><span class="line">hello world</span><br><span class="line">[root@localhost day01]# </span><br></pre></td></tr></table></figure>

<blockquote>
<p>通过pstree查看进程树</p>
</blockquote>
<ul>
<li>安装pstree</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install psmisc</span><br></pre></td></tr></table></figure>

<ul>
<li>查看进程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost day01]<span class="comment"># pstree</span></span><br><span class="line">systemd─┬─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─login───bash</span><br><span class="line">        ├─lvmetad</span><br><span class="line">        ├─master─┬─pickup</span><br><span class="line">        │        └─qmgr</span><br><span class="line">        ├─polkitd───6*[&#123;polkitd&#125;]</span><br><span class="line">        ├─rsyslogd───2*[&#123;rsyslogd&#125;]</span><br><span class="line">        ├─sshd─┬─sshd───bash───ksh───bash───pstree</span><br><span class="line">        │      └─sshd───sftp-server</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        ├─tuned───4*[&#123;tuned&#125;]</span><br><span class="line">        └─vmtoolsd───2*[&#123;vmtoolsd&#125;]</span><br></pre></td></tr></table></figure>

<h1 id="3-变量"><a href="#3-变量" class="headerlink" title="3.变量"></a>3.变量</h1><h2 id="3-1-自定义变量"><a href="#3-1-自定义变量" class="headerlink" title="3.1 自定义变量"></a>3.1 自定义变量</h2><ul>
<li>以固定的名称，存放可以有变化的值</li>
<li><strong>定义变量的格式：变量名&#x3D;变量值</strong></li>
<li><strong>取消变量的格式：unset 变量名</strong></li>
<li><strong>注意事项：</strong><ul>
<li>&#x3D;两边不能有空格，不能使用关键字做变量名，例如ls、cd等</li>
<li>如果有变量名已经存在则覆盖之前的变量值</li>
<li>变量名称有：字母&#x2F;数字&#x2F;下划线组成，不能以数字开始</li>
</ul>
</li>
</ul>
<h2 id="3-2-查看变量"><a href="#3-2-查看变量" class="headerlink" title="3.2 查看变量"></a>3.2 查看变量</h2><blockquote>
<p>语法格式</p>
</blockquote>
<ul>
<li>$变量名</li>
<li>${变量名}</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># a=11</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $a</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;a&#125;</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $a</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># a=33</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $a</span></span><br><span class="line">33</span><br><span class="line">[root@localhost ~]<span class="comment"># a = 11</span></span><br><span class="line">bash: a: 未找到命令</span><br><span class="line">[root@localhost ~]<span class="comment"># a)=11</span></span><br><span class="line">bash: 未预期的符号 `)<span class="string">&#x27; 附近有语法错误</span></span><br><span class="line"><span class="string">[root@localhost ~]# a_=22</span></span><br><span class="line"><span class="string">[root@localhost ~]# echo $a_</span></span><br><span class="line"><span class="string">22</span></span><br><span class="line"><span class="string">[root@localhost ~]# 3a = 33</span></span><br><span class="line"><span class="string">bash: 3a: 未找到命令</span></span><br><span class="line"><span class="string">[root@localhost ~]# x=centos</span></span><br><span class="line"><span class="string">[root@localhost ~]# echo $x</span></span><br><span class="line"><span class="string">centos</span></span><br><span class="line"><span class="string">[root@localhost ~]# echo $x7.9</span></span><br><span class="line"><span class="string">.9</span></span><br><span class="line"><span class="string">[root@localhost ~]# echo $&#123;x&#125;7.9</span></span><br><span class="line"><span class="string">centos7.9</span></span><br><span class="line"><span class="string">[root@localhost ~]# unset x</span></span><br><span class="line"><span class="string">[root@localhost ~]# echo $x</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@localhost ~]# </span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-变量类型"><a href="#3-3-变量类型" class="headerlink" title="3.3 变量类型"></a>3.3 变量类型</h2><ul>
<li>环境变量（变量名通常大写，由操作系统维护）</li>
<li>位置变量（bash内置变量，存储脚本执行时的参数）</li>
<li>预定义变量（bash内置变量，可以调用但是不可以赋值或修改）</li>
<li>自定义变量（用户自主设置）</li>
</ul>
<blockquote>
<p>环境变量</p>
</blockquote>
<ul>
<li>存储在&#x2F;etc&#x2F;profile或~&#x2F;.bash_profile</li>
<li>命令env可以列出所有的环境变量</li>
<li>常见的环境变量：<ul>
<li>PATH(当前路径)、PWD(当前目录)、USER(当前用户)、UID(当前用户id)、HOME(当前目录的家目录)、SHELL(当前应用的解释器)</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $PWD</span></span><br><span class="line">/root</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $USER</span></span><br><span class="line">root</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $UID</span></span><br><span class="line">0</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $HOME</span></span><br><span class="line">/root</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $SHELL</span></span><br><span class="line">/bin/bash</span><br></pre></td></tr></table></figure>

<blockquote>
<p>位置变量</p>
</blockquote>
<ul>
<li>存储脚本执行时的参数</li>
<li>使用$n表示，n为数字序列号</li>
<li>$1、$2、…、${10}、${11}、…</li>
</ul>
<blockquote>
<blockquote>
<p>vars.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#test positional parameters.</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$3</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day01/vars.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day01/vars.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day01/vars.sh aa bb cc</span></span><br><span class="line">aa</span><br><span class="line">bb</span><br><span class="line">cc</span><br></pre></td></tr></table></figure>

<ul>
<li>应用</li>
</ul>
<blockquote>
<blockquote>
<p>user.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">useradd <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$2</span>&quot;</span> | passwd --stdin <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day01/user.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day01/user.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day01/user.sh tom 123</span></span><br><span class="line">更改用户 tom 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@localhost ~]<span class="comment"># grep tom /etc/passwd</span></span><br><span class="line">tom:x:1001:1001::/home/tom:/bin/bash</span><br></pre></td></tr></table></figure>

<blockquote>
<p>预定义变量</p>
</blockquote>
<ul>
<li>用来保存脚本程序的执行信息<ul>
<li>直接使用这些变量</li>
<li>不能直接为这些变量赋值</li>
</ul>
</li>
</ul>
<p><img src="image-20220929184933107.png" alt="shell脚本语言/image-20220929184933107"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ls /etc/hosts</span></span><br><span class="line">/etc/hosts</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /yyyyyy</span></span><br><span class="line"><span class="built_in">ls</span>: 无法访问/yyyyyy: 没有那个文件或目录</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $?</span></span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<ul>
<li>pre.sh</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$0</span></span><br><span class="line"><span class="built_in">echo</span> $$</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$#</span></span><br><span class="line"><span class="built_in">echo</span> $*</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day01/pre.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day01/pre.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day01/pre.sh aa 88 cc 9u</span></span><br><span class="line">/root/shell/day01/pre.sh</span><br><span class="line">13613</span><br><span class="line">4</span><br><span class="line">aa 88 cc 9u</span><br></pre></td></tr></table></figure>

<h1 id="4-变量扩展应用"><a href="#4-变量扩展应用" class="headerlink" title="4.变量扩展应用"></a>4.变量扩展应用</h1><h2 id="4-1-引号"><a href="#4-1-引号" class="headerlink" title="4.1 引号"></a>4.1 引号</h2><p> <strong>多种引号的区别</strong></p>
<ul>
<li>双引号””：允许扩展，以$引用其他变量</li>
<li>单引号’’：禁止扩展，<strong>即便$也视为普通字符</strong></li>
<li>反引号&#96;&#96;：将命令的执行输出作为变量值，$()与反引号等效</li>
</ul>
<blockquote>
<p>双引号</p>
</blockquote>
<p><img src="image-20220929190418410.png" alt="shell脚本语言/image-20220929190418410"></p>
<p><img src="image-20220929190445946.png" alt="shell脚本语言/image-20220929190445946"></p>
<blockquote>
<p>单引号</p>
</blockquote>
<p><img src="image-20220929190638195.png" alt="shell脚本语言/image-20220929190638195"></p>
<p><img src="image-20220929190652238.png" alt="shell脚本语言/image-20220929190652238"></p>
<p><img src="image-20220929190742557.png" alt="shell脚本语言/image-20220929190742557"></p>
<blockquote>
<p>反引号</p>
</blockquote>
<p><img src="image-20220929190926304.png" alt="shell脚本语言/image-20220929190926304"></p>
<p><img src="image-20220929191002434.png" alt="shell脚本语言/image-20220929191002434"></p>
<h2 id="4-2-read标准输入取值"><a href="#4-2-read标准输入取值" class="headerlink" title="4.2 read标准输入取值"></a>4.2 read标准输入取值</h2><ul>
<li>read从键盘读入变量值完成赋值<ul>
<li>格式：read [-p “提示信息”] 变量名</li>
<li>-p可选，-t可以指定超时秒数，-s设置是否在终端显示输入的内容</li>
</ul>
</li>
</ul>
<blockquote>
<p>read.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> name</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入密码：&quot;</span> -s pass</span><br><span class="line">useradd <span class="string">&quot;<span class="variable">$name</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$pass</span>&quot;</span> | passwd --stdin <span class="string">&quot;<span class="variable">$name</span>&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day01/read.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day01/read.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day01/read.sh</span></span><br><span class="line">请输入用户名：yty</span><br><span class="line">请输入密码：更改用户 yty 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># read -t 3 iname</span></span><br><span class="line">[root@localhost ~]<span class="comment"># read iname</span></span><br><span class="line">^C</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h2 id="4-3-变量的作用范围"><a href="#4-3-变量的作用范围" class="headerlink" title="4.3 变量的作用范围"></a>4.3 变量的作用范围</h2><ul>
<li>局部变量<ul>
<li>新定义的变量默认只在当前shell环境中有效，无法在子shell环境中使用</li>
</ul>
</li>
<li>全局变量<ul>
<li>全局变量在当前shell及子shell环境中均有效</li>
</ul>
</li>
</ul>
<blockquote>
<p>测试</p>
</blockquote>
<ul>
<li>起初线程详情</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pstree</span></span><br><span class="line">systemd─┬─NetworkManager───3*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─agetty</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─lvmetad</span><br><span class="line">        ├─master─┬─pickup</span><br><span class="line">        │        └─qmgr</span><br><span class="line">        ├─polkitd───6*[&#123;polkitd&#125;]</span><br><span class="line">        ├─rsyslogd───2*[&#123;rsyslogd&#125;]</span><br><span class="line">        ├─sshd─┬─sshd───bash───pstree</span><br><span class="line">        │      └─sshd───bash</span><br><span class="line">        ├─systemd-hostnam</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        ├─tuned───4*[&#123;tuned&#125;]</span><br><span class="line">        └─vmtoolsd───2*[&#123;vmtoolsd&#125;]</span><br></pre></td></tr></table></figure>

<ul>
<li>定义局部变量x，开启bash子线程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># x=11</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># bash</span></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>线程详情</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pstree</span></span><br><span class="line">systemd─┬─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─agetty</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─lvmetad</span><br><span class="line">        ├─master─┬─pickup</span><br><span class="line">        │        └─qmgr</span><br><span class="line">        ├─polkitd───6*[&#123;polkitd&#125;]</span><br><span class="line">        ├─rsyslogd───2*[&#123;rsyslogd&#125;]</span><br><span class="line">        ├─sshd─┬─sshd───bash───pstree</span><br><span class="line">        │      └─sshd───bash（定义了x=11）───bash（开启了bash子线程）</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        ├─tuned───4*[&#123;tuned&#125;]</span><br><span class="line">        └─vmtoolsd───2*[&#123;vmtoolsd&#125;]</span><br></pre></td></tr></table></figure>

<ul>
<li>在bash子线程访问x,结果为空</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># x=11</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># bash    #开启了一个bash线程</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x #无法访问在父线程x</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>关闭开启的bash子线程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>此时线程详情</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pstree</span></span><br><span class="line">systemd─┬─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─agetty</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─lvmetad</span><br><span class="line">        ├─master─┬─pickup</span><br><span class="line">        │        └─qmgr</span><br><span class="line">        ├─polkitd───6*[&#123;polkitd&#125;]</span><br><span class="line">        ├─rsyslogd───2*[&#123;rsyslogd&#125;]</span><br><span class="line">        ├─sshd─┬─sshd───bash───pstree</span><br><span class="line">        │      └─sshd───bash</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        ├─tuned───4*[&#123;tuned&#125;]</span><br><span class="line">        └─vmtoolsd───2*[&#123;vmtoolsd&#125;]</span><br></pre></td></tr></table></figure>

<ul>
<li>定义一个全局变量Y,开启子线程和子线程的子线程</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># export Y=88</span></span><br><span class="line">[root@localhost ~]<span class="comment"># bash</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $Y</span></span><br><span class="line">88</span><br><span class="line">[root@localhost ~]<span class="comment"># bash</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $Y</span></span><br><span class="line">88</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">systemd─┬─NetworkManager───2*[&#123;NetworkManager&#125;]</span><br><span class="line">        ├─VGAuthService</span><br><span class="line">        ├─agetty</span><br><span class="line">        ├─auditd───&#123;auditd&#125;</span><br><span class="line">        ├─crond</span><br><span class="line">        ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">        ├─firewalld───&#123;firewalld&#125;</span><br><span class="line">        ├─lvmetad</span><br><span class="line">        ├─master─┬─pickup</span><br><span class="line">        │        └─qmgr</span><br><span class="line">        ├─polkitd───6*[&#123;polkitd&#125;]</span><br><span class="line">        ├─rsyslogd───2*[&#123;rsyslogd&#125;]</span><br><span class="line">        ├─sshd─┬─sshd───bash───pstree</span><br><span class="line">        │      └─sshd───bash(定义了一个全局变量Y)───bash(可以访问Y)───bash(可以访问Y)</span><br><span class="line">        ├─systemd-journal</span><br><span class="line">        ├─systemd-logind</span><br><span class="line">        ├─systemd-udevd</span><br><span class="line">        ├─tuned───4*[&#123;tuned&#125;]</span><br><span class="line">        └─vmtoolsd───2*[&#123;vmtoolsd&#125;]</span><br></pre></td></tr></table></figure>

<h1 id="5-shell中的运算"><a href="#5-shell中的运算" class="headerlink" title="5.shell中的运算"></a>5.shell中的运算</h1><h2 id="5-1-整数运算"><a href="#5-1-整数运算" class="headerlink" title="5.1 整数运算"></a>5.1 整数运算</h2><ul>
<li><p>四则运算</p>
<ul>
<li>加法：num1 + num2</li>
<li>减法：num1 - num2</li>
<li>乘法：num1 * num2</li>
<li>除法：num1 &#x2F; num2</li>
</ul>
</li>
<li><p>取余运算</p>
<ul>
<li>求模：num1 % num2</li>
</ul>
</li>
<li><p>算术表达式</p>
<ul>
<li>格式：$[整数1 运算符 整数2 .. ..]</li>
<li>将计算结果替换表达式本身，可结合echo命令输出</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo $[1+8]</span></span><br><span class="line">9</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[1-8]</span></span><br><span class="line">-7</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[1*8]</span></span><br><span class="line">8</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[1*8]</span></span><br><span class="line">8</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[1/8]</span></span><br><span class="line">0</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[10%3]</span></span><br><span class="line">1</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[10%2]</span></span><br><span class="line">0</span><br><span class="line">[root@localhost ~]<span class="comment"># x=2</span></span><br><span class="line">[root@localhost ~]<span class="comment"># y=3</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x+y]</span></span><br><span class="line">5</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $((x*y))</span></span><br><span class="line">6</span><br></pre></td></tr></table></figure>

<p><img src="image-20220929203304243.png" alt="shell脚本语言/image-20220929203304243"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># x=2</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x+=4]</span></span><br><span class="line">6</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br><span class="line">6</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x+=1]</span></span><br><span class="line">7</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br><span class="line">7</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x-=1]</span></span><br><span class="line">6</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x/=2]</span></span><br><span class="line">3</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x*=2]</span></span><br><span class="line">6</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[x%=2]</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>let命令</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># let i=2*3</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $i</span></span><br><span class="line">6</span><br><span class="line">[root@localhost ~]<span class="comment"># i=2</span></span><br><span class="line">[root@localhost ~]<span class="comment"># let i+=3</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $i</span></span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<h2 id="4-2-小数运算"><a href="#4-2-小数运算" class="headerlink" title="4.2 小数运算"></a>4.2 小数运算</h2><ul>
<li>bash内建机制仅支持整数运算，不支持小数运算</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo $[1.1+1.2]</span></span><br><span class="line">-bash: 1.1+1.2: 语法错误: 无效的算术运算符 （错误符号是 <span class="string">&quot;.1+1.2&quot;</span>）</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $((1.1+1.2))</span></span><br><span class="line">-bash: 1.1+1.2: 语法错误: 无效的算术运算符 （错误符号是 <span class="string">&quot;.1+1.2&quot;</span>）</span><br><span class="line">[root@localhost ~]<span class="comment"># let i=1.2</span></span><br><span class="line">-bash: <span class="built_in">let</span>: i=1.2: 语法错误: 无效的算术运算符 （错误符号是 <span class="string">&quot;.2&quot;</span>）</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>可以通过计算器软件bc实现小数运算</strong><ul>
<li>yum安装bc计算器</li>
<li><strong>bc支持交互式和非交互式两种方式计算，scale&#x3D;n可以约束小数位</strong></li>
</ul>
</li>
</ul>
<blockquote>
<p>bc计算器</p>
</blockquote>
<ul>
<li>交互式</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># bc</span></span><br><span class="line">bc 1.06.95</span><br><span class="line">Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.</span><br><span class="line">This is free software with ABSOLUTELY NO WARRANTY.</span><br><span class="line">For details <span class="built_in">type</span> `warranty<span class="string">&#x27;. </span></span><br><span class="line"><span class="string">1.5+2.3</span></span><br><span class="line"><span class="string">3.8</span></span><br><span class="line"><span class="string">3.8+3</span></span><br><span class="line"><span class="string">6.8</span></span><br><span class="line"><span class="string">2.5*6.3</span></span><br><span class="line"><span class="string">15.7</span></span><br><span class="line"><span class="string">10/2</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">scale=2</span></span><br><span class="line"><span class="string">10/2</span></span><br><span class="line"><span class="string">5.00</span></span><br><span class="line"><span class="string">10/3</span></span><br><span class="line"><span class="string">3.33</span></span><br><span class="line"><span class="string">quit</span></span><br></pre></td></tr></table></figure>

<ul>
<li>非交互式</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># clear</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;1.2+2.3&quot; | bc</span></span><br><span class="line">3.5</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;1.2+2.3;8.9*3.3&quot; | bc</span></span><br><span class="line">3.5</span><br><span class="line">29.3</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;scale=2;10/2&quot; | bc</span></span><br><span class="line">5.00</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;scale=3;10/2&quot; | bc</span></span><br><span class="line">5.000</span><br></pre></td></tr></table></figure>

<ul>
<li>bc支持比较运算符：&gt;、&gt;&#x3D;、&lt;、&lt;&#x3D;、&#x3D;&#x3D;、!&#x3D;<ul>
<li>表达式成立返回1，否则返回0</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo &quot;1&gt;2&quot; | bc</span></span><br><span class="line">0</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;1&lt;2&quot; | bc</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h1 id="6-综合案例"><a href="#6-综合案例" class="headerlink" title="6.综合案例"></a>6.综合案例</h1><h2 id="6-1-监控脚本之显示硬件信息"><a href="#6-1-监控脚本之显示硬件信息" class="headerlink" title="6.1 监控脚本之显示硬件信息"></a>6.1 监控脚本之显示硬件信息</h2><blockquote>
<p>echo命令</p>
</blockquote>
<p><img src="image-20220929205549032.png" alt="shell脚本语言/image-20220929205549032"></p>
<blockquote>
<p>编写info.sh脚本文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#显示硬件信息</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[34m------服务器硬件信息------\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m网卡信息\033[0m&quot;</span></span><br><span class="line">ifconfig ens33 | grep <span class="string">&quot;inet &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m内存的剩余容量信息：\033[0m&quot;</span></span><br><span class="line">grep MemAvailable /proc/meminfo</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m磁盘根分区的使用情况：\033[0m&quot;</span></span><br><span class="line"><span class="built_in">df</span> -h /</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m本机CPU型号信息：\033[0m&quot;</span></span><br><span class="line">grep <span class="string">&quot;model name&quot;</span> /proc/cpuinfo</span><br></pre></td></tr></table></figure>

<p><img src="image-20220929211736986.png" alt="shell脚本语言/image-20220929211736986"></p>
<h2 id="6-2-数据计算"><a href="#6-2-数据计算" class="headerlink" title="6.2 数据计算"></a>6.2 数据计算</h2><blockquote>
<p>编写calc.sh脚本文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#计算1+2+3+...+n的和，可以使用n*(n+1)/2公式快速计算结果</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入一个正整数：&quot;</span> num</span><br><span class="line"><span class="built_in">sum</span>=$[num*(num+1)/2]</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m<span class="variable">$num</span>以内整数和是：<span class="variable">$sum</span>\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用三角形的底边和高计算面积：A=(bh)/2</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入三角形底边长度：&quot;</span> bottom</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入三角形高度：&quot;</span> hight</span><br><span class="line">A=$(<span class="built_in">echo</span> <span class="string">&quot;scale=1;1/2*<span class="variable">$bottom</span>*<span class="variable">$hight</span>&quot;</span> | bc)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m三角形面积是：<span class="variable">$A</span>\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#梯形面积：（上底边+下底边）*高/2</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入梯形上底边长度：&quot;</span> a</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入梯形下底边长度：&quot;</span> b</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入梯形高度：&quot;</span> h</span><br><span class="line">A=$(<span class="built_in">echo</span> <span class="string">&quot;scale=2;(<span class="variable">$a</span>+<span class="variable">$b</span>)*<span class="variable">$h</span>/2&quot;</span> | bc)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m梯形面积是：<span class="variable">$A</span>\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用A=2Πr公式计算圆的面积，取2位小数点精度，Π=3.14</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入圆的半径：&quot;</span> r</span><br><span class="line">A=$(<span class="built_in">echo</span> <span class="string">&quot;scale=2;3.14*<span class="variable">$r</span>^2&quot;</span> | bc)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m圆的面积是：<span class="variable">$A</span>\033[0m&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20220929214912582.png" alt="shell脚本语言/image-20220929214912582"></p>
<h2 id="6-3-自动配置YUM源"><a href="#6-3-自动配置YUM源" class="headerlink" title="6.3 自动配置YUM源"></a>6.3 自动配置YUM源</h2><blockquote>
<p>编写yum.sh脚本文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">URL=ftp://192.168.1.25/centos</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[centos]</span></span><br><span class="line"><span class="string">name=centos</span></span><br><span class="line"><span class="string">baseurl=<span class="variable">$URL</span></span></span><br><span class="line"><span class="string">gpgcheck=0&quot;</span> &gt; /etc/yum.repos.d/iyum.repo</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># vim /root/shell/day01/yum.sh</span></span><br><span class="line">[root@localhost /]<span class="comment"># chmod +x /root/shell/day01/yum.sh</span></span><br><span class="line">[root@localhost /]<span class="comment"># ls /etc/yum.repos.d/</span></span><br><span class="line">CentOS-Base.repo  CentOS-Debuginfo.repo  CentOS-Media.repo    CentOS-Vault.repo</span><br><span class="line">CentOS-CR.repo    CentOS-fasttrack.repo  CentOS-Sources.repo  CentOS-x86_64-kernel.repo</span><br><span class="line">[root@localhost /]<span class="comment"># /root/shell/day01/yum.sh</span></span><br><span class="line">[root@localhost /]<span class="comment"># cat /etc/yum.repos.d/iyum.repo</span></span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=ftp://192.168.1.25/centos</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>

<h1 id="7-条件测试"><a href="#7-条件测试" class="headerlink" title="7.条件测试"></a>7.条件测试</h1><ul>
<li>shell脚本的智能化<ul>
<li>使shell脚本获得识别能力</li>
<li>为命令的执行提供最直接的识别依据<ul>
<li>文件或目录的读&#x2F;写状态</li>
<li>数值的大小</li>
<li>字符串是否匹配</li>
<li>多条件组合</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="7-1-test测试操作"><a href="#7-1-test测试操作" class="headerlink" title="7.1 test测试操作"></a>7.1 test测试操作</h2><ul>
<li><p>语法格式</p>
<ul>
<li>test 选项 参数</li>
<li>[ 选项 参数 ]</li>
</ul>
</li>
<li><p>基本语法</p>
<ul>
<li>是否为空[ -z 字符串 ]</li>
<li>等于[ 字符串1 &#x3D;&#x3D; 字符串2 ]</li>
<li>不等于[ 字符串1 !&#x3D; 字符串2 ]</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># [ -z $TT ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># TT=&quot;hello&quot;</span></span><br><span class="line">[root@localhost /]<span class="comment"># [ -z $TT ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># [ a == a ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># [ a == c ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># [ $USER == root ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># [ $USER == tom ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># [ $USER != tom ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># [ $USER != root ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>整数值比较<ul>
<li>[ 整数值1 操作符 整数值2 ]</li>
</ul>
</li>
</ul>
<p><img src="image-20220929221209118.png" alt="shell脚本语言/image-20220929221209118"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># [ 3 -lt 8 ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># </span></span><br><span class="line">[root@localhost /]<span class="comment"># who</span></span><br><span class="line">root     pts/0        2022-09-29 21:09 (192.168.1.180)</span><br><span class="line">[root@localhost /]<span class="comment"># who | wc -l</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># [ $(who | wc -l) -ge 2 ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>文件状态测试<ul>
<li>[ 操作符 文件或目录 ]</li>
</ul>
</li>
</ul>
<p><img src="image-20220929221707875.png" alt="shell脚本语言/image-20220929221707875"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># [ -e /etc/ ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># [ -e /etc/hosts ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br><span class="line">[root@localhost /]<span class="comment"># [ -e /etc/yyyy ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># [ -d /etc/hosts ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">1</span><br><span class="line">[root@localhost /]<span class="comment"># [ -d /etc/ ]</span></span><br><span class="line">[root@localhost /]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<h2 id="7-2-控制操作符"><a href="#7-2-控制操作符" class="headerlink" title="7.2 控制操作符"></a>7.2 控制操作符</h2><blockquote>
<p>组合多个命令</p>
</blockquote>
<ul>
<li>使用控制符组合多个命令<ul>
<li>；</li>
<li>&amp;&amp;</li>
<li>||</li>
</ul>
</li>
<li>命令1 操作符 命令2</li>
</ul>
<p><img src="image-20220929222259400.png" alt="shell脚本语言/image-20220929222259400"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># [ a == a ] &amp;&amp; ls</span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@localhost /]<span class="comment"># [ a == b ] &amp;&amp; ls</span></span><br><span class="line">[root@localhost /]<span class="comment"># [ a == b ] || ls</span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@localhost /]<span class="comment"># [ a == a ] || ls</span></span><br><span class="line">[root@localhost /]<span class="comment"># [ a == a ] &amp;&amp; echo Y || echo  N</span></span><br><span class="line">Y</span><br></pre></td></tr></table></figure>

<h2 id="7-3-案例：监控脚本"><a href="#7-3-案例：监控脚本" class="headerlink" title="7.3 案例：监控脚本"></a>7.3 案例：监控脚本</h2><blockquote>
<p>tr -s 删除多余重复的字串</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># echo &quot;a  b  c&quot; | tr -s &quot; &quot;</span></span><br><span class="line">a b c</span><br><span class="line">[root@localhost /]<span class="comment"># echo &quot;aaaaaaacaaaaq&quot; | tr -s &quot;a&quot;</span></span><br><span class="line">acaq</span><br><span class="line">[root@localhost /]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>cut 过滤数据</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># cut -d: -f1 /etc/passwd</span></span><br><span class="line">root</span><br><span class="line">bin</span><br><span class="line">daemon</span><br><span class="line">adm</span><br><span class="line">lp</span><br><span class="line"><span class="built_in">sync</span></span><br><span class="line">shutdown</span><br><span class="line">halt</span><br><span class="line">mail</span><br><span class="line">operator</span><br><span class="line">games</span><br><span class="line">ftp</span><br><span class="line">nobody</span><br><span class="line">systemd-network</span><br><span class="line">dbus</span><br><span class="line">polkitd</span><br><span class="line">sshd</span><br><span class="line">postfix</span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">tom</span><br><span class="line">yty</span><br></pre></td></tr></table></figure>

<blockquote>
<p>编写info.sh脚本文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#本脚本获取系统各项性能参数指标，并与预设阈值进行比较</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#time:时间，loal_ip:eth0网卡IP，free_mem:剩余内存大小，free_disk:剩余磁盘大小</span></span><br><span class="line"><span class="comment">#cpu_load:15mim平均负载，login_user:登录系统用户，procs:当前进程数量</span></span><br><span class="line"></span><br><span class="line">local_time=$(<span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">local_ip=$(ifconfig ens33 | grep netmask | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f3)</span><br><span class="line">free_mem=$(<span class="built_in">cat</span> /proc/meminfo | grep Avai | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f2)</span><br><span class="line">free_disk=$(<span class="built_in">df</span>| grep <span class="string">&quot;/$&quot;</span> | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f4)</span><br><span class="line">cpu_load=$(<span class="built_in">cat</span> /proc/loadavg | <span class="built_in">cut</span> -d<span class="string">&#x27; &#x27;</span> -f3)</span><br><span class="line">login_user=$(<span class="built_in">who</span> | <span class="built_in">wc</span> -l)</span><br><span class="line">procs=$(ps aux | <span class="built_in">wc</span> -l)</span><br><span class="line"></span><br><span class="line"><span class="comment">#当剩余内存不足1GB时发送邮件给root进行报警</span></span><br><span class="line">[ <span class="variable">$free_mem</span> -lt 1048576 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$local_time</span> Free memory not enough.Free_mem:<span class="variable">$free_mem</span> on <span class="variable">$local_ip</span>&quot;</span> | mail -s Warning root@localhost</span><br><span class="line"></span><br><span class="line"><span class="comment">#当剩余磁盘不足10GB时发送邮件给root进行报警</span></span><br><span class="line">[ <span class="variable">$free_mem</span> -lt 10485760 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$local_time</span> Free disk not enough.root_free_disk:<span class="variable">$free_disk</span> on <span class="variable">$local_ip</span>&quot;</span> | mail -s Warning root@localhost</span><br><span class="line"></span><br><span class="line"><span class="comment">#当CPU的15min平均负载超过4时发送邮件给root进行报警</span></span><br><span class="line">result=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$cpu_load</span> &gt; 4&quot;</span> | bc)</span><br><span class="line">[ <span class="variable">$result</span> -eq 1 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$local_time</span> CPU load to high,CPU 15 averageload:<span class="variable">$cpu_load</span> on <span class="variable">$local_ip</span>&quot;</span> | mail -s Warning root@localhost</span><br><span class="line"></span><br><span class="line"><span class="comment">#当系统实时在线人数超过3人时发送邮件给root进行报警</span></span><br><span class="line">[ <span class="variable">$login_user</span> -gt 3 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$local_time</span> Too many user.<span class="variable">$login_user</span> users login to <span class="variable">$local_ip</span>&quot;</span> | mail -s Warning root@localhost</span><br><span class="line"></span><br><span class="line"><span class="comment">#当实时进程数量大于500时发送邮件给root进行报警</span></span><br><span class="line">[ <span class="variable">$procs</span> -gt 500 ] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$local_time</span> Too many procs.<span class="variable">$procs</span> procs are runing on <span class="variable">$local_ip</span>&quot;</span> | mail -s Warning root@localhost</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/info.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/info.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum install mailx</span></span><br><span class="line">已加载插件：fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.ustc.edu.cn</span><br><span class="line"> * extras: mirrors.ustc.edu.cn</span><br><span class="line"> * updates: mirrors.ustc.edu.cn</span><br><span class="line">软件包 mailx-12.5-19.el7.x86_64 已安装并且是最新版本</span><br><span class="line">无须任何处理</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/info.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mail</span></span><br><span class="line">Heirloom Mail version 12.5 7/5/10.  Type ? <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"><span class="string">&quot;/var/spool/mail/root&quot;</span>: 1 message 1 new</span><br><span class="line">&gt;N  1 root                  Fri Sep 30 12:15  18/688   <span class="string">&quot;Warning&quot;</span></span><br><span class="line">&amp; <span class="built_in">exit</span></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h1 id="8-if、for、while、case"><a href="#8-if、for、while、case" class="headerlink" title="8.if、for、while、case"></a>8.if、for、while、case</h1><h2 id="8-1-if"><a href="#8-1-if" class="headerlink" title="8.1 if"></a>8.1 if</h2><h3 id="8-1-1-if单分支判断"><a href="#8-1-1-if单分支判断" class="headerlink" title="8.1.1 if单分支判断"></a>8.1.1 if单分支判断</h3><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>当“条件成立”时执行命令序列</li>
<li>否则，不执行如何操作</li>
</ul>
<p><img src="image-20220930131805074.png" alt="shell脚本语言/image-20220930131805074"></p>
<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>判断用户名和密码是否为空</li>
</ul>
<blockquote>
<blockquote>
<p>user_v1.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> user</span><br><span class="line"><span class="built_in">read</span> -s -p <span class="string">&quot;请输入密码：&quot;</span> pass</span><br><span class="line"><span class="keyword">if</span> [ ! -z <span class="string">&quot;<span class="variable">$user</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">useradd <span class="string">&quot;<span class="variable">$user</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -z <span class="string">&quot;<span class="variable">$pass</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$pass</span>&quot;</span> | passwd --stdin <span class="string">&quot;<span class="variable">$user</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/user_v1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/user_v1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/user_v1.sh</span></span><br><span class="line">请输入用户名：</span><br><span class="line">请输入密码：</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/user_v1.sh</span></span><br><span class="line">请输入用户名：yty</span><br><span class="line">请输入密码：更改用户 yty 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>user_v2.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名：&quot;</span> user</span><br><span class="line"><span class="built_in">read</span> -s -p <span class="string">&quot;请输入密码：&quot;</span> pass</span><br><span class="line"><span class="keyword">if</span> [ ! -z <span class="string">&quot;<span class="variable">$user</span>&quot;</span> ] &amp;&amp; [ ! -z <span class="string">&quot;<span class="variable">$pass</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">useradd <span class="string">&quot;<span class="variable">$user</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$pass</span>&quot;</span> | passwd --stdin <span class="string">&quot;<span class="variable">$user</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/user_v2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/user_v2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/user_v2.sh</span></span><br><span class="line">请输入用户名：</span><br><span class="line">请输入密码：</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/user_v2.sh</span></span><br><span class="line">请输入用户名：yty2</span><br><span class="line">请输入密码：</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h3 id="8-1-2-if双分支判断"><a href="#8-1-2-if双分支判断" class="headerlink" title="8.1.2 if双分支判断"></a>8.1.2 if双分支判断</h3><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>当“条件成立”时执行命令序列1</li>
<li>否则，执行命令序列2</li>
</ul>
<p><img src="image-20220930133943607.png" alt="shell脚本语言/image-20220930133943607"></p>
<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>测试主机是否能ping通</li>
</ul>
<blockquote>
<blockquote>
<p>if_ping.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#ping通脚本返回up,否则返回down</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">&quot;用法：脚本&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> -e <span class="string">&quot;\033[32m域名或IP\033[0m&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#-c(设置ping的次数)，-i(设置ping间隔描述),-W(设置超时时间)</span></span><br><span class="line">ping -c2 -i0.1 -W1 <span class="string">&quot;<span class="variable">$1</span>&quot;</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> is up&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> is down&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/if_ping.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/if_ping.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/if_ping.sh</span></span><br><span class="line">用法：脚本域名或IP</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/if_ping.sh 192.168.1.125</span></span><br><span class="line">192.168.1.125 is down</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/if_ping.sh 192.168.1.25</span></span><br><span class="line">192.168.1.25 is up</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/if_ping.sh www.baidu.com</span></span><br><span class="line">www.baidu.com is up</span><br></pre></td></tr></table></figure>

<h3 id="8-1-3-if多分支判断"><a href="#8-1-3-if多分支判断" class="headerlink" title="8.1.3 if多分支判断"></a>8.1.3 if多分支判断</h3><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>相当于if语句嵌套</li>
<li>针对多个条件分别执行不同的操作</li>
</ul>
<p><img src="image-20220930135540378.png" alt="shell脚本语言/image-20220930135540378"></p>
<blockquote>
<p>应用案例</p>
</blockquote>
<blockquote>
<blockquote>
<p>guess_num.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#脚本自动生成10以内的随机数，根据用户输入，输出判断结果</span></span><br><span class="line">clear</span><br><span class="line">num=$[RANDOM%10+1]</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入1-10之间的整数：&quot;</span> guess</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$guess</span> -eq <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;恭喜你，猜对了，就是：<span class="variable">$num</span>&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$guess</span> -lt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Oops,猜小了.&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Oops,猜大了.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/guess_num.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/guess_num.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/guess_num.sh</span></span><br><span class="line">请输入1-10之间的整数：3</span><br><span class="line">恭喜你，猜对了，就是：3</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/guess_num.sh</span></span><br><span class="line">请输入1-10之间的整数：5</span><br><span class="line">Oops,猜大了.</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h2 id="8-2-for"><a href="#8-2-for" class="headerlink" title="8.2 for"></a>8.2 for</h2><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>根据变量的不同取值，重复执行命令序列</li>
</ul>
<p><img src="image-20220930142111775.png" alt="shell脚本语言/image-20220930142111775"></p>
<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>循环输出数字和字符</li>
</ul>
<blockquote>
<blockquote>
<p>for_demo1.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 1 8 ab 99 qq</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;I am <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/for_demo1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/for_demo1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/for_demo1.sh</span></span><br><span class="line">I am 1</span><br><span class="line">I am 8</span><br><span class="line">I am ab</span><br><span class="line">I am 99</span><br><span class="line">I am qq</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>for_demo2.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((i=1;i&lt;5;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;I am <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/for_demo2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/for_demo2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/for_demo2.sh</span></span><br><span class="line">I am 1</span><br><span class="line">I am 2</span><br><span class="line">I am 3</span><br><span class="line">I am 4</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>循环创建10个系统用户</li>
</ul>
<blockquote>
<blockquote>
<p>for_user.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	useradd <span class="built_in">test</span><span class="variable">$i</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;123456&quot;</span> | passwd --stdin <span class="built_in">test</span><span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<ul>
<li>读取账户名列表文件创建系统用户</li>
</ul>
<blockquote>
<blockquote>
<p>user.txt</p>
</blockquote>
</blockquote>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">page</span><br><span class="line">ocean</span><br><span class="line">book</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>user.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">cat</span> user.txt)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	useradd <span class="string">&quot;<span class="variable">$i</span>&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;123456&quot;</span> | passwd --stdin <span class="string">&quot;<span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<ul>
<li>打印九九乘法表</li>
</ul>
<blockquote>
<blockquote>
<p>99.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((i=1;i&lt;=9;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">for</span>((j=1;j&lt;=i;j++))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$i</span>*<span class="variable">$j</span>=$[i*j] &quot;</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/99.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/99.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/99.sh</span></span><br><span class="line">1*1=1 </span><br><span class="line">2*1=2 2*2=4 </span><br><span class="line">3*1=3 3*2=6 3*3=9 </span><br><span class="line">4*1=4 4*2=8 4*3=12 4*4=16 </span><br><span class="line">5*1=5 5*2=10 5*3=15 5*4=20 5*5=25 </span><br><span class="line">6*1=6 6*2=12 6*3=18 6*4=24 6*5=30 6*6=36 </span><br><span class="line">7*1=7 7*2=14 7*3=21 7*4=28 7*5=35 7*6=42 7*7=49 </span><br><span class="line">8*1=8 8*2=16 8*3=24 8*4=32 8*5=40 8*6=48 8*7=56 8*8=64 </span><br><span class="line">9*1=9 9*2=18 9*3=27 9*4=36 9*5=45 9*6=54 9*7=63 9*8=72 9*9=81 </span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h2 id="8-3-while"><a href="#8-3-while" class="headerlink" title="8.3 while"></a>8.3 while</h2><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>条件式循环<ul>
<li>反复测试条件，只要成立就立即执行命令序列</li>
</ul>
</li>
</ul>
<p><img src="image-20220930144557396.png" alt="shell脚本语言/image-20220930144557396"></p>
<blockquote>
<blockquote>
<p>应用案例</p>
</blockquote>
</blockquote>
<ul>
<li>打印1-5</li>
</ul>
<blockquote>
<blockquote>
<p>while_1.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 5 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>while_2.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 5 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line">	<span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/while_2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/while_2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/while_2.sh</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>死循环脚本</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> hello world</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<ul>
<li>批量添加和删除用户（名称有规律）</li>
</ul>
<blockquote>
<blockquote>
<p>uaddwhile.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">PREFIX=<span class="string">&quot;tuser&quot;</span>;i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 5 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	useradd <span class="variable">$&#123;PREFIX&#125;</span><span class="variable">$i</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;123456&quot;</span> | passwd --stdin <span class="variable">$&#123;PREFIX&#125;</span><span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">	<span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>udelwhile.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">PREFIX=<span class="string">&quot;tuser&quot;</span>;i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 5 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	userdel -r <span class="variable">$&#123;PREFIX&#125;</span><span class="variable">$i</span></span><br><span class="line">	<span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/uaddwhile.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/uaddwhile.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/uaddwhile.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">yty:x:1000:1000::/home/yty:/bin/bash</span><br><span class="line">yty2:x:1001:1001::/home/yty2:/bin/bash</span><br><span class="line">tuser1:x:1002:1002::/home/tuser1:/bin/bash</span><br><span class="line">tuser2:x:1003:1003::/home/tuser2:/bin/bash</span><br><span class="line">tuser3:x:1004:1004::/home/tuser3:/bin/bash</span><br><span class="line">tuser4:x:1005:1005::/home/tuser4:/bin/bash</span><br><span class="line">tuser5:x:1006:1006::/home/tuser5:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/udelwhile.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/udelwhile.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/udelwhile.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">yty:x:1000:1000::/home/yty:/bin/bash</span><br><span class="line">yty2:x:1001:1001::/home/yty2:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>猜随机数</li>
</ul>
<blockquote>
<blockquote>
<p>guess_num2.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#脚本自动生成10以内的随机数，根据用户输入，输出判断结果</span></span><br><span class="line">num=$[RANDOM%10+1]</span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">read</span> -p <span class="string">&quot;请输入1-10之间的整数：&quot;</span> guess</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$guess</span> -eq <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;恭喜你，猜对了，就是：<span class="variable">$num</span>&quot;</span></span><br><span class="line">            <span class="built_in">exit</span></span><br><span class="line">    <span class="keyword">elif</span> [ <span class="variable">$guess</span> -lt <span class="variable">$num</span> ];<span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Oops,猜小了.&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Oops,猜大了.&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/guess_num2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/guess_num2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/guess_num2.sh</span></span><br><span class="line">请输入1-10之间的整数：2</span><br><span class="line">Oops,猜小了.</span><br><span class="line">请输入1-10之间的整数：3</span><br><span class="line">Oops,猜小了.</span><br><span class="line">请输入1-10之间的整数：8</span><br><span class="line">Oops,猜大了.</span><br><span class="line">请输入1-10之间的整数：5</span><br><span class="line">Oops,猜大了.</span><br><span class="line">请输入1-10之间的整数：4</span><br><span class="line">恭喜你，猜对了，就是：4</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h2 id="8-4-判断循环综合案例"><a href="#8-4-判断循环综合案例" class="headerlink" title="8.4 判断循环综合案例"></a>8.4 判断循环综合案例</h2><h3 id="8-4-1-一键部署FTP服务"><a href="#8-4-1-一键部署FTP服务" class="headerlink" title="8.4.1 一键部署FTP服务"></a>8.4.1 一键部署FTP服务</h3><blockquote>
<blockquote>
<p>install_vsftp.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#安装vsftp软件，修改配置文件，设置匿名用户可以上传文件.</span></span><br><span class="line"><span class="keyword">if</span> rpm -q vsftpd &amp;&gt; /dev/null;<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;vsftpd已安装.&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	yum -y install vsftpd</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">systemctl restart vsftpd</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/install_vsftp.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -q vsftpd</span></span><br><span class="line">未安装软件包 vsftpd </span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/install_vsftp.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/install_vsftp.sh</span></span><br><span class="line">已加载插件：fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.ustc.edu.cn</span><br><span class="line"> * extras: mirrors.tuna.tsinghua.edu.cn</span><br><span class="line"> * updates: mirrors.ustc.edu.cn</span><br><span class="line">正在解决依赖关系</span><br><span class="line">--&gt; 正在检查事务</span><br><span class="line">---&gt; 软件包 vsftpd.x86_64.0.3.0.2-29.el7_9 将被 安装</span><br><span class="line">--&gt; 解决依赖关系完成</span><br><span class="line"></span><br><span class="line">依赖关系解决</span><br><span class="line"></span><br><span class="line">==================================================================================================================================================================</span><br><span class="line"> Package                             架构                                版本                                          源                                    大小</span><br><span class="line">==================================================================================================================================================================</span><br><span class="line">正在安装:</span><br><span class="line"> vsftpd                              x86_64                              3.0.2-29.el7_9                                updates                              173 k</span><br><span class="line"></span><br><span class="line">事务概要</span><br><span class="line">==================================================================================================================================================================</span><br><span class="line">安装  1 软件包</span><br><span class="line"></span><br><span class="line">总下载量：173 k</span><br><span class="line">安装大小：353 k</span><br><span class="line">Downloading packages:</span><br><span class="line">vsftpd-3.0.2-29.el7_9.x86_64.rpm                                                                                                           | 173 kB  00:00:00     </span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction <span class="built_in">test</span></span><br><span class="line">Transaction <span class="built_in">test</span> succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  正在安装    : vsftpd-3.0.2-29.el7_9.x86_64                                                                                                                  1/1 </span><br><span class="line">  验证中      : vsftpd-3.0.2-29.el7_9.x86_64                                                                                                                  1/1 </span><br><span class="line"></span><br><span class="line">已安装:</span><br><span class="line">  vsftpd.x86_64 0:3.0.2-29.el7_9                                                                                                                                  </span><br><span class="line"></span><br><span class="line">完毕！</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/install_vsftp.sh</span></span><br><span class="line">vsftpd已安装.</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h3 id="8-4-2-监控网络流量"><a href="#8-4-2-监控网络流量" class="headerlink" title="8.4.2 监控网络流量"></a>8.4.2 监控网络流量</h3><blockquote>
<blockquote>
<p>net.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	clear</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&#x27;本地网卡ens33流量信息如下：&#x27;</span></span><br><span class="line">	ifconfig ens33 | grep <span class="string">&quot;RX pack&quot;</span> | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f6</span><br><span class="line">	ifconfig ens33 | grep <span class="string">&quot;TX pack&quot;</span> | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d<span class="string">&quot; &quot;</span> -f6</span><br><span class="line">	<span class="built_in">sleep</span> 1</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day02/net.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day02/net.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day02/net.sh</span></span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2359499</span><br><span class="line">2727730</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2359559</span><br><span class="line">2728072</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2359679</span><br><span class="line">2728414</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2359859</span><br><span class="line">2728816</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2359979</span><br><span class="line">2729158</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2360099</span><br><span class="line">2729500</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2360219</span><br><span class="line">2729842</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2360339</span><br><span class="line">2730184</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2360459</span><br><span class="line">2730526</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2360579</span><br><span class="line">2730868</span><br><span class="line">本地网卡ens33流量信息如下：</span><br><span class="line">2360699</span><br><span class="line">2731210</span><br></pre></td></tr></table></figure>

<h3 id="8-4-3-统计闰年"><a href="#8-4-3-统计闰年" class="headerlink" title="8.4.3 统计闰年"></a>8.4.3 统计闰年</h3><blockquote>
<blockquote>
<p>leap.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5000&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">if</span> [[ $[i%4] -eq 0 &amp;&amp; $[i%100] -ne 0 || $[i%400] -eq 0 ]];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$i</span>:是闰年&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$i</span>:不是闰年&quot;</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="8-4-4-计算等差数列之和"><a href="#8-4-4-计算等差数列之和" class="headerlink" title="8.4.4 计算等差数列之和"></a>8.4.4 计算等差数列之和</h3><blockquote>
<blockquote>
<p>sum.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#计算等差数列之和1+2+3+...+100</span></span><br><span class="line"><span class="built_in">sum</span>=0;i=1</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 100 ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">let</span> <span class="built_in">sum</span>+=<span class="variable">$i</span></span><br><span class="line">	<span class="built_in">let</span> i++</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;1+2+3+...+100的总和为：\033[1;32m<span class="variable">$sum</span>\033[0m&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20220930165207290.png" alt="shell脚本语言/image-20220930165207290"></p>
<h2 id="8-5-case语句"><a href="#8-5-case语句" class="headerlink" title="8.5 case语句"></a>8.5 case语句</h2><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>检查、判断变量的值<ul>
<li>效果类似于多分支If语句</li>
<li>如果与预设值相匹配，则执行对应的操作</li>
<li><strong>命令序列最后必须以分号结尾</strong></li>
</ul>
</li>
</ul>
<p><img src="image-20220930170136107.png" alt="shell脚本语言/image-20220930170136107"></p>
<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>判断用户的输入<ul>
<li>输入redhat返回redora</li>
<li>输入fedora返回redhat</li>
<li>输入其它返回用法</li>
</ul>
</li>
</ul>
<blockquote>
<blockquote>
<p>case1.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入redhat|fedora:&quot;</span> key</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$key</span> <span class="keyword">in</span></span><br><span class="line">redhat)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;fedora&quot;</span>;;</span><br><span class="line">fedora)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;redhat&quot;</span>;;</span><br><span class="line">*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;必须输入redhat或fedora.&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/case1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/case1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case1.sh</span></span><br><span class="line">请输入redhat|fedora:redhat</span><br><span class="line">fedora</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case1.sh</span></span><br><span class="line">请输入redhat|fedora:fedora</span><br><span class="line">redhat</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case1.sh</span></span><br><span class="line">请输入redhat|fedora:wwwww</span><br><span class="line">必须输入redhat或fedora.</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>case2.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Are you sure?[y/n]:&quot;</span> sure</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$sure</span> <span class="keyword">in</span></span><br><span class="line">y|Y|<span class="built_in">yes</span>|YES)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;you enter <span class="variable">$sure</span>,OK&quot;</span>;;</span><br><span class="line">n|N|NO|no)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;you enter <span class="variable">$sure</span>,OVER&quot;</span>;;</span><br><span class="line">*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;error&quot;</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/case2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/case2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case2.sh</span></span><br><span class="line">Are you sure?[y/n]:y</span><br><span class="line">you enter y,OK</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case2.sh</span></span><br><span class="line">Are you sure?[y/n]:Ye^H^H^H</span><br><span class="line">error</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case2.sh</span></span><br><span class="line">Are you sure?[y/n]:YES</span><br><span class="line">you enter YES,OK</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/case2.sh</span></span><br><span class="line">Are you sure?[y/n]:NO</span><br><span class="line">you enter NO,OVER</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>石头剪刀布</li>
</ul>
<blockquote>
<blockquote>
<p>stone.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">game=(石头 剪刀 布)</span><br><span class="line">num=$[RANDOM%3]</span><br><span class="line">computer=<span class="variable">$&#123;game[$num]&#125;</span></span><br><span class="line"><span class="comment">#通过随机数获取计算机出的拳</span></span><br><span class="line"><span class="comment">#出拳的可能性保存在一个数组中：game[0],game[1],game[2]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;请根据下列提示选择您的出拳手势：&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.石头&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2.剪刀&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3.布&quot;</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请选择1-3:&quot;</span> person</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$person</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$num</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;平局&quot;</span></span><br><span class="line">	<span class="keyword">elif</span> [ <span class="variable">$num</span> -eq 1 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;你赢&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;计算机赢&quot;</span></span><br><span class="line">	<span class="keyword">fi</span>;;</span><br><span class="line">2)</span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$num</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;计算机赢&quot;</span></span><br><span class="line">	<span class="keyword">elif</span> [ <span class="variable">$num</span> -eq 1 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;平局&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;你赢&quot;</span></span><br><span class="line">	<span class="keyword">fi</span>;;</span><br><span class="line">3)</span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$num</span> -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;你赢&quot;</span></span><br><span class="line">	<span class="keyword">elif</span> [ <span class="variable">$num</span> -eq 1 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;计算机赢&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;平局&quot;</span></span><br><span class="line">	<span class="keyword">fi</span>;;</span><br><span class="line">*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;必须输入1-3的数字&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/stone.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/stone.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/stone.sh</span></span><br><span class="line">请根据下列提示选择您的出拳手势：</span><br><span class="line">1.石头</span><br><span class="line">2.剪刀</span><br><span class="line">3.布</span><br><span class="line">请选择1-3:5</span><br><span class="line">必须输入1-3的数字</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/stone.sh</span></span><br><span class="line">请根据下列提示选择您的出拳手势：</span><br><span class="line">1.石头</span><br><span class="line">2.剪刀</span><br><span class="line">3.布</span><br><span class="line">请选择1-3:2</span><br><span class="line">你赢</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/stone.sh</span></span><br><span class="line">请根据下列提示选择您的出拳手势：</span><br><span class="line">1.石头</span><br><span class="line">2.剪刀</span><br><span class="line">3.布</span><br><span class="line">请选择1-3:1</span><br><span class="line">计算机赢</span><br></pre></td></tr></table></figure>

<h2 id="8-6-中断与退出"><a href="#8-6-中断与退出" class="headerlink" title="8.6 中断与退出"></a>8.6 中断与退出</h2><blockquote>
<p>脚本中断和退出的命令</p>
</blockquote>
<ul>
<li>continue可以结束单词循环</li>
<li>break可以结束循环体</li>
<li>exit可以退出脚本</li>
</ul>
<p><img src="image-20220930191748225.png" alt="shell脚本语言/image-20220930191748225"></p>
<blockquote>
<p>continue</p>
</blockquote>
<ul>
<li>结束本次循环，继续后面的循环</li>
</ul>
<p><img src="image-20220930192104926.png" alt="shell脚本语言/image-20220930192104926"></p>
<blockquote>
<p>break</p>
</blockquote>
<ul>
<li>结束整个循环体</li>
</ul>
<p><img src="image-20220930192142836.png" alt="shell脚本语言/image-20220930192142836"></p>
<blockquote>
<p>exit</p>
</blockquote>
<ul>
<li>退出脚本</li>
</ul>
<p><img src="image-20220930192217058.png" alt="shell脚本语言/image-20220930192217058"></p>
<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>机选双色球</li>
</ul>
<blockquote>
<blockquote>
<p> jixuan.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#功能：机选双色球</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;---机选双色球---&quot;</span></span><br><span class="line">red_ball=<span class="string">&quot;&quot;</span></span><br><span class="line">blue_ball=<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#每选出一个号码通过+=的方式存储在变量中</span></span><br><span class="line"><span class="comment">#通过grep判断新机选的红球号码是否已经存在，-w选项过滤单词</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	clear</span><br><span class="line">	tmp=$[RANDOM%33+1]</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$red_ball</span>&quot;</span> | grep -q -w <span class="variable">$tmp</span> &amp;&amp; <span class="built_in">continue</span></span><br><span class="line">	red_ball+=<span class="string">&quot; <span class="variable">$tmp</span>&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> -en <span class="string">&quot;\033[91m<span class="variable">$red_ball</span>\033[0m&quot;</span></span><br><span class="line">	word=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$red_ball</span>&quot;</span> | <span class="built_in">wc</span> -w)</span><br><span class="line">	<span class="keyword">if</span> [ <span class="variable">$word</span> -eq 6 ];<span class="keyword">then</span></span><br><span class="line">		blue_ball=$[RANDOM%16+1]</span><br><span class="line">		<span class="built_in">echo</span> -e <span class="string">&quot;\033[34m <span class="variable">$blue_ball</span>\033[0m&quot;</span></span><br><span class="line">		<span class="built_in">break</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	<span class="built_in">sleep</span> 0.5</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20220930202039459.png" alt="shell脚本语言/image-20220930202039459"></p>
<h1 id="9-数组"><a href="#9-数组" class="headerlink" title="9.数组"></a>9.数组</h1><ul>
<li>数组也是一个变量，是一个有点特殊的变量</li>
<li>存储多个数据的集合就是数组</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># test=(11 22 88)   #定义数组</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;test[0]&#125;   #调用数组的值</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $[test[0]]</span></span><br><span class="line">11</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;test[1]&#125;</span></span><br><span class="line">22</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;test[2]&#125;</span></span><br><span class="line">88</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h1 id="10-字符串处理和变量初始化"><a href="#10-字符串处理和变量初始化" class="headerlink" title="10.字符串处理和变量初始化"></a>10.字符串处理和变量初始化</h1><h2 id="10-1-字符串处理"><a href="#10-1-字符串处理" class="headerlink" title="10.1 字符串处理"></a>10.1 字符串处理</h2><h3 id="10-1-1-字串截取"><a href="#10-1-1-字串截取" class="headerlink" title="10.1.1 字串截取"></a>10.1.1 字串截取</h3><blockquote>
<p>语法格式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;变量:起始位置:长度&#125;</span></span><br><span class="line">统计变量长度：<span class="variable">$&#123;#变量名&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pthone=122425235364646</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;#pthone&#125;</span></span><br><span class="line">15</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone:0:3&#125;</span></span><br><span class="line">122</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone:2:5&#125;</span></span><br><span class="line">24252</span><br></pre></td></tr></table></figure>

<h3 id="10-1-2-字串替换"><a href="#10-1-2-字串替换" class="headerlink" title="10.1.2 字串替换"></a>10.1.2 字串替换</h3><blockquote>
<p>语法格式</p>
</blockquote>
<ul>
<li>替换一个结果<ul>
<li>${变量&#x2F;旧字串&#x2F;新字串}</li>
</ul>
</li>
<li>替换全部结果<ul>
<li>${变量&#x2F;&#x2F;旧字串&#x2F;新字串}</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pthone=122425235364646</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;#pthone&#125;</span></span><br><span class="line">15</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone:0:3&#125;</span></span><br><span class="line">122</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone:2:5&#125;</span></span><br><span class="line">24252</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone/2/X&#125;</span></span><br><span class="line">1X2425235364646</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone//3/Y&#125;</span></span><br><span class="line">1224252Y5Y64646</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;pthone//22/Y&#125;</span></span><br><span class="line">1Y425235364646</span><br><span class="line">[root@localhost ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h3 id="10-1-3-字串掐头"><a href="#10-1-3-字串掐头" class="headerlink" title="10.1.3 字串掐头"></a>10.1.3 字串掐头</h3><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>从左向右，最短匹配删除<ul>
<li>${变量#关键字}</li>
</ul>
</li>
<li>从左向右，最长匹配删除<ul>
<li>${变量##关键字}</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># A=`head -1 /etc/passwd`</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $A</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;A#*:&#125;</span></span><br><span class="line">x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;A##*:&#125;</span></span><br><span class="line">/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $A</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="10-1-4-字串去尾"><a href="#10-1-4-字串去尾" class="headerlink" title="10.1.4 字串去尾"></a>10.1.4 字串去尾</h3><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>从右向左，最短匹配删除<ul>
<li>${变量%关键词}</li>
</ul>
</li>
<li>从右向左，最长匹配删除<ul>
<li>${变量%%关键词}</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo $A</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;A%:*&#125;</span></span><br><span class="line">root:x:0:0:root:/root</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;A%%:*&#125;</span></span><br><span class="line">root</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $A</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="10-1-5-应用案例"><a href="#10-1-5-应用案例" class="headerlink" title="10.1.5 应用案例"></a>10.1.5 应用案例</h3><ul>
<li>批量修改文件扩展名</li>
</ul>
<blockquote>
<blockquote>
<p>rename1.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">ls</span> *.txt)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">mv</span> <span class="variable">$i</span> <span class="variable">$&#123;i%.*&#125;</span>.doc</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># touch &#123;a,b,c,d,e,f&#125;.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  a.txt  b.txt  c.txt  d.txt  e.txt  f.txt  shell</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/rename1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/rename1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/rename1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">a.doc  anaconda-ks.cfg  b.doc  c.doc  d.doc  e.doc  f.doc  shell</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<p>rename2.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">ls</span> *.<span class="variable">$1</span>)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">mv</span> <span class="variable">$i</span> <span class="variable">$&#123;i%.*&#125;</span>.<span class="variable">$2</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># touch &#123;a,b,c,d,e,f&#125;.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  a.txt  b.txt  c.txt  d.txt  e.txt  f.txt  shell</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/rename1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/rename1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/rename1.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">a.doc  anaconda-ks.cfg  b.doc  c.doc  d.doc  e.doc  f.doc  shell</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/rename2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/rename2.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/rename2.sh doc jpg</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">a.jpg  anaconda-ks.cfg  b.jpg  c.jpg  d.jpg  e.jpg  f.jpg  shell</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h2 id="10-2-变量初始化"><a href="#10-2-变量初始化" class="headerlink" title="10.2 变量初始化"></a>10.2 变量初始化</h2><blockquote>
<p>语法</p>
</blockquote>
<ul>
<li>变量有值，则返回该变量的值</li>
<li>变量无值，则返回初始值</li>
<li>格式：${变量:-关键词}</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># X=123</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;X:-abc&#125;</span></span><br><span class="line">123</span><br><span class="line">[root@localhost ~]<span class="comment"># echo $&#123;XYY:-abc&#125;</span></span><br><span class="line">abc</span><br></pre></td></tr></table></figure>

<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>创建系统用户</li>
</ul>
<blockquote>
<blockquote>
<p>user.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入用户名:&quot;</span> iname</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$iname</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m未输入用户名，脚本即将退出...\033[0m&quot;</span></span><br><span class="line">	<span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入密码:&quot;</span> ipass</span><br><span class="line">ipass=<span class="variable">$&#123;ipass:-123456&#125;</span></span><br><span class="line">useradd <span class="string">&quot;<span class="variable">$iname</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$ipass</span>&quot;</span> | passwd --stdin <span class="string">&quot;<span class="variable">$iname</span>&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/user.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/user.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/user.sh</span></span><br><span class="line">请输入用户名:</span><br><span class="line">未输入用户名，脚本即将退出...</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/user.sh</span></span><br><span class="line">请输入用户名:yangtongyu</span><br><span class="line">请输入密码:</span><br><span class="line">更改用户 yangtongyu 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/user.sh</span></span><br><span class="line">请输入用户名:yangty</span><br><span class="line">请输入密码:000000</span><br><span class="line">更改用户 yangty 的密码 。</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新。</span><br></pre></td></tr></table></figure>

<h1 id="11-函数"><a href="#11-函数" class="headerlink" title="11.函数"></a>11.函数</h1><blockquote>
<p>语法格式</p>
</blockquote>
<ul>
<li>在Shell环境中，将一些需要重复使用的操作，定义为公共的语句块，即可称为函数</li>
</ul>
<p><img src="image-20220930184931327.png" alt="shell脚本语言/image-20220930184931327"></p>
<blockquote>
<p>函数传递参数</p>
</blockquote>
<ul>
<li>调用已定义的函数<ul>
<li>格式：函数名</li>
</ul>
</li>
<li>函数传值<ul>
<li>格式：函数名 值1 值 2 .. ..</li>
<li>传递的值作为函数的”位置参数”</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># imsg()&#123;</span></span><br><span class="line">&gt; <span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span></span><br><span class="line">&gt; <span class="built_in">echo</span> <span class="string">&quot;compute cloud&quot;</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">[root@localhost ~]<span class="comment"># imsg</span></span><br><span class="line">hello world</span><br><span class="line">compute cloud</span><br><span class="line">[root@localhost ~]<span class="comment"># imsg</span></span><br><span class="line">hello world</span><br><span class="line">compute cloud</span><br><span class="line">[root@localhost ~]<span class="comment"># imsg</span></span><br><span class="line">hello world</span><br><span class="line">compute cloud</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># function msg()&#123;</span></span><br><span class="line">&gt; <span class="built_in">echo</span> <span class="string">&quot;function msg&quot;</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">[root@localhost ~]<span class="comment"># msg</span></span><br><span class="line"><span class="keyword">function</span> msg</span><br><span class="line">[root@localhost ~]<span class="comment"># msg</span></span><br><span class="line"><span class="keyword">function</span> msg</span><br></pre></td></tr></table></figure>

<blockquote>
<p>应用案例</p>
</blockquote>
<ul>
<li>加法器</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># add()&#123;</span></span><br><span class="line">&gt; <span class="built_in">echo</span> $[<span class="variable">$1</span>+<span class="variable">$2</span>]</span><br><span class="line">&gt; &#125;</span><br><span class="line">[root@localhost ~]<span class="comment"># add 1 2</span></span><br><span class="line">3</span><br><span class="line">[root@localhost ~]<span class="comment"># add 7 9</span></span><br><span class="line">16</span><br></pre></td></tr></table></figure>

<ul>
<li>输出颜色</li>
</ul>
<blockquote>
<blockquote>
<p>color.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">cecho</span></span>()&#123;</span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[$1m<span class="variable">$2</span>\033[0m&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">cecho 31 Ok</span><br><span class="line">cecho 32 OK</span><br><span class="line">cecho 33 OK</span><br><span class="line">cecho 34 OK</span><br><span class="line">cecho 35 Error</span><br></pre></td></tr></table></figure>

<p><img src="image-20220930190315458.png" alt="shell脚本语言/image-20220930190315458"></p>
<ul>
<li>多进程版Ping测试</li>
</ul>
<blockquote>
<blockquote>
<p>mutiping.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">myping</span></span>()&#123;</span><br><span class="line">	ping -c3 -i0.2 -W1 <span class="variable">$1</span> &amp;&gt; /dev/null</span><br><span class="line">	<span class="keyword">if</span> [ $? -eq 0 ];<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> is up&quot;</span></span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$1</span> is down&quot;</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..254&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	myping <span class="string">&quot;192.168.1.<span class="variable">$i</span>&quot;</span> &amp;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">wait</span></span><br><span class="line"><span class="comment">#使用&amp;符号，将执行的函数放入后台执行，wait等待所有后台进程结束后退出脚本</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/mutiping.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/mutiping.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/mutiping.sh</span></span><br><span class="line">192.168.1.1 is up</span><br><span class="line">192.168.1.25 is up</span><br><span class="line">192.168.1.14 is down</span><br><span class="line">192.168.1.16 is down</span><br><span class="line">192.168.1.19 is down</span><br><span class="line">192.168.1.15 is down</span><br><span class="line">192.168.1.17 is down</span><br><span class="line">192.168.1.6 is down</span><br><span class="line">192.168.1.11 is down</span><br><span class="line">192.168.1.2 is down</span><br><span class="line">192.168.1.7 is down</span><br><span class="line">192.168.1.3 is down</span><br><span class="line">192.168.1.4 is down</span><br><span class="line">192.168.1.9 is down</span><br><span class="line">192.168.1.8 is down</span><br><span class="line">192.168.1.13 is down</span><br><span class="line">192.168.1.5 is down</span><br><span class="line">192.168.1.18 is down</span><br><span class="line">192.168.1.10 is down</span><br><span class="line">192.168.1.12 is down</span><br><span class="line">192.168.1.20 is down</span><br><span class="line">192.168.1.31 is down</span><br><span class="line">192.168.1.101 is down</span><br><span class="line">192.168.1.92 is down</span><br><span class="line">192.168.1.86 is down</span><br><span class="line">192.168.1.77 is down</span><br><span class="line">192.168.1.21 is down</span><br><span class="line">192.168.1.50 is down</span><br><span class="line">192.168.1.89 is down</span><br><span class="line">192.168.1.90 is down</span><br><span class="line">192.168.1.91 is down</span><br><span class="line">192.168.1.49 is down</span><br><span class="line">192.168.1.95 is down</span><br><span class="line">192.168.1.35 is down</span><br><span class="line">192.168.1.83 is down</span><br><span class="line">192.168.1.102 is down</span><br><span class="line">192.168.1.70 is down</span><br><span class="line">192.168.1.61 is down</span><br><span class="line">192.168.1.42 is down</span><br><span class="line">192.168.1.71 is down</span><br><span class="line">192.168.1.88 is down</span><br><span class="line">192.168.1.43 is down</span><br><span class="line">192.168.1.97 is down</span><br><span class="line">192.168.1.56 is down</span><br><span class="line">192.168.1.60 is down</span><br><span class="line">192.168.1.98 is down</span><br><span class="line">192.168.1.23 is down</span><br><span class="line">192.168.1.99 is down</span><br><span class="line">192.168.1.58 is down</span><br><span class="line">192.168.1.24 is down</span><br><span class="line">192.168.1.52 is down</span><br><span class="line">192.168.1.82 is down</span><br><span class="line">192.168.1.76 is down</span><br><span class="line">192.168.1.34 is down</span><br><span class="line">192.168.1.65 is down</span><br><span class="line">192.168.1.64 is down</span><br><span class="line">192.168.1.55 is down</span><br><span class="line">192.168.1.36 is down</span><br><span class="line">192.168.1.37 is down</span><br><span class="line">192.168.1.39 is down</span><br><span class="line">192.168.1.45 is down</span><br><span class="line">192.168.1.54 is down</span><br><span class="line">192.168.1.72 is down</span><br><span class="line">192.168.1.66 is down</span><br><span class="line">192.168.1.74 is down</span><br><span class="line">192.168.1.81 is down</span><br><span class="line">192.168.1.44 is down</span><br><span class="line">192.168.1.69 is down</span><br><span class="line">192.168.1.94 is down</span><br><span class="line">192.168.1.22 is down</span><br><span class="line">192.168.1.96 is down</span><br><span class="line">192.168.1.53 is down</span><br><span class="line">192.168.1.26 is down</span><br><span class="line">192.168.1.27 is down</span><br><span class="line">192.168.1.47 is down</span><br><span class="line">192.168.1.79 is down</span><br><span class="line">192.168.1.28 is down</span><br><span class="line">192.168.1.38 is down</span><br><span class="line">192.168.1.33 is down</span><br><span class="line">192.168.1.30 is down</span><br><span class="line">192.168.1.29 is down</span><br><span class="line">192.168.1.40 is down</span><br><span class="line">192.168.1.48 is down</span><br><span class="line">192.168.1.51 is down</span><br><span class="line">192.168.1.62 is down</span><br><span class="line">192.168.1.59 is down</span><br><span class="line">192.168.1.68 is down</span><br><span class="line">192.168.1.78 is down</span><br><span class="line">192.168.1.73 is down</span><br><span class="line">192.168.1.80 is down</span><br><span class="line">192.168.1.84 is down</span><br><span class="line">192.168.1.93 is down</span><br><span class="line">192.168.1.100 is down</span><br><span class="line">192.168.1.32 is down</span><br><span class="line">192.168.1.87 is down</span><br><span class="line">192.168.1.41 is down</span><br><span class="line">192.168.1.67 is down</span><br><span class="line">192.168.1.105 is down</span><br><span class="line">192.168.1.103 is down</span><br><span class="line">192.168.1.112 is down</span><br><span class="line">192.168.1.120 is down</span><br><span class="line">192.168.1.106 is down</span><br><span class="line">192.168.1.117 is down</span><br><span class="line">192.168.1.109 is down</span><br><span class="line">192.168.1.104 is down</span><br><span class="line">192.168.1.119 is down</span><br><span class="line">192.168.1.114 is down</span><br><span class="line">192.168.1.113 is down</span><br><span class="line">192.168.1.110 is down</span><br><span class="line">192.168.1.108 is down</span><br><span class="line">192.168.1.115 is down</span><br><span class="line">192.168.1.107 is down</span><br><span class="line">192.168.1.116 is down</span><br><span class="line">192.168.1.111 is down</span><br><span class="line">192.168.1.165 is up</span><br><span class="line">192.168.1.75 is down</span><br><span class="line">192.168.1.85 is down</span><br><span class="line">192.168.1.57 is down</span><br><span class="line">192.168.1.63 is down</span><br><span class="line">192.168.1.118 is down</span><br><span class="line">192.168.1.46 is down</span><br><span class="line">192.168.1.121 is down</span><br><span class="line">192.168.1.126 is down</span><br><span class="line">192.168.1.124 is down</span><br><span class="line">192.168.1.123 is down</span><br><span class="line">192.168.1.125 is down</span><br><span class="line">192.168.1.122 is down</span><br><span class="line">192.168.1.131 is down</span><br><span class="line">192.168.1.129 is down</span><br><span class="line">192.168.1.127 is down</span><br><span class="line">192.168.1.135 is down</span><br><span class="line">192.168.1.134 is down</span><br><span class="line">192.168.1.133 is down</span><br><span class="line">192.168.1.130 is down</span><br><span class="line">192.168.1.128 is down</span><br><span class="line">192.168.1.132 is down</span><br><span class="line">192.168.1.136 is down</span><br><span class="line">192.168.1.137 is down</span><br><span class="line">192.168.1.138 is down</span><br><span class="line">192.168.1.139 is down</span><br><span class="line">192.168.1.142 is down</span><br><span class="line">192.168.1.141 is down</span><br><span class="line">192.168.1.143 is down</span><br><span class="line">192.168.1.144 is down</span><br><span class="line">192.168.1.145 is down</span><br><span class="line">192.168.1.146 is down</span><br><span class="line">192.168.1.149 is down</span><br><span class="line">192.168.1.147 is down</span><br><span class="line">192.168.1.151 is down</span><br><span class="line">192.168.1.155 is down</span><br><span class="line">192.168.1.154 is down</span><br><span class="line">192.168.1.150 is down</span><br><span class="line">192.168.1.140 is down</span><br><span class="line">192.168.1.148 is down</span><br><span class="line">192.168.1.157 is down</span><br><span class="line">192.168.1.153 is down</span><br><span class="line">192.168.1.152 is down</span><br><span class="line">192.168.1.160 is down</span><br><span class="line">192.168.1.156 is down</span><br><span class="line">192.168.1.159 is down</span><br><span class="line">192.168.1.161 is down</span><br><span class="line">192.168.1.158 is down</span><br><span class="line">192.168.1.162 is down</span><br><span class="line">192.168.1.174 is down</span><br><span class="line">192.168.1.168 is down</span><br><span class="line">192.168.1.185 is down</span><br><span class="line">192.168.1.181 is down</span><br><span class="line">192.168.1.171 is down</span><br><span class="line">192.168.1.170 is down</span><br><span class="line">192.168.1.169 is down</span><br><span class="line">192.168.1.177 is down</span><br><span class="line">192.168.1.163 is down</span><br><span class="line">192.168.1.164 is down</span><br><span class="line">192.168.1.166 is down</span><br><span class="line">192.168.1.180 is down</span><br><span class="line">192.168.1.179 is down</span><br><span class="line">192.168.1.176 is down</span><br><span class="line">192.168.1.178 is down</span><br><span class="line">192.168.1.184 is down</span><br><span class="line">192.168.1.172 is down</span><br><span class="line">192.168.1.175 is down</span><br><span class="line">192.168.1.173 is down</span><br><span class="line">192.168.1.187 is down</span><br><span class="line">192.168.1.186 is down</span><br><span class="line">192.168.1.189 is down</span><br><span class="line">192.168.1.182 is down</span><br><span class="line">192.168.1.183 is down</span><br><span class="line">192.168.1.191 is down</span><br><span class="line">192.168.1.190 is down</span><br><span class="line">192.168.1.188 is down</span><br><span class="line">192.168.1.167 is down</span><br><span class="line">192.168.1.192 is down</span><br><span class="line">192.168.1.195 is down</span><br><span class="line">192.168.1.194 is down</span><br><span class="line">192.168.1.193 is down</span><br><span class="line">192.168.1.199 is down</span><br><span class="line">192.168.1.201 is down</span><br><span class="line">192.168.1.196 is down</span><br><span class="line">192.168.1.200 is down</span><br><span class="line">192.168.1.198 is down</span><br><span class="line">192.168.1.197 is down</span><br><span class="line">192.168.1.233 is down</span><br><span class="line">192.168.1.202 is down</span><br><span class="line">192.168.1.251 is down</span><br><span class="line">192.168.1.246 is down</span><br><span class="line">192.168.1.235 is down</span><br><span class="line">192.168.1.234 is down</span><br><span class="line">192.168.1.253 is down</span><br><span class="line">192.168.1.236 is down</span><br><span class="line">192.168.1.210 is down</span><br><span class="line">192.168.1.215 is down</span><br><span class="line">192.168.1.239 is down</span><br><span class="line">192.168.1.245 is down</span><br><span class="line">192.168.1.223 is down</span><br><span class="line">192.168.1.225 is down</span><br><span class="line">192.168.1.237 is down</span><br><span class="line">192.168.1.238 is down</span><br><span class="line">192.168.1.228 is down</span><br><span class="line">192.168.1.231 is down</span><br><span class="line">192.168.1.208 is down</span><br><span class="line">192.168.1.212 is down</span><br><span class="line">192.168.1.211 is down</span><br><span class="line">192.168.1.213 is down</span><br><span class="line">192.168.1.219 is down</span><br><span class="line">192.168.1.229 is down</span><br><span class="line">192.168.1.218 is down</span><br><span class="line">192.168.1.241 is down</span><br><span class="line">192.168.1.243 is down</span><br><span class="line">192.168.1.227 is down</span><br><span class="line">192.168.1.244 is down</span><br><span class="line">192.168.1.205 is down</span><br><span class="line">192.168.1.217 is down</span><br><span class="line">192.168.1.250 is down</span><br><span class="line">192.168.1.209 is down</span><br><span class="line">192.168.1.226 is down</span><br><span class="line">192.168.1.230 is down</span><br><span class="line">192.168.1.220 is down</span><br><span class="line">192.168.1.248 is down</span><br><span class="line">192.168.1.252 is down</span><br><span class="line">192.168.1.203 is down</span><br><span class="line">192.168.1.204 is down</span><br><span class="line">192.168.1.207 is down</span><br><span class="line">192.168.1.221 is down</span><br><span class="line">192.168.1.214 is down</span><br><span class="line">192.168.1.232 is down</span><br><span class="line">192.168.1.216 is down</span><br><span class="line">192.168.1.247 is down</span><br><span class="line">192.168.1.222 is down</span><br><span class="line">192.168.1.224 is down</span><br><span class="line">192.168.1.242 is down</span><br><span class="line">192.168.1.249 is down</span><br><span class="line">192.168.1.240 is down</span><br><span class="line">192.168.1.206 is down</span><br><span class="line">192.168.1.254 is down</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h1 id="12-随机密码"><a href="#12-随机密码" class="headerlink" title="12.随机密码"></a>12.随机密码</h1><h2 id="12-1-随机密码1"><a href="#12-1-随机密码1" class="headerlink" title="12.1 随机密码1"></a>12.1 随机密码1</h2><ul>
<li>字串截取生成随机密码</li>
</ul>
<blockquote>
<blockquote>
<p>pass.sh</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#定义变量：10个数字+52个字母.</span></span><br><span class="line"><span class="comment">#用随机数对62取余数，返回结果为[0-61]</span></span><br><span class="line">key=<span class="string">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;</span></span><br><span class="line">pass=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	num=$[RANDOM%<span class="variable">$&#123;#key&#125;</span>]</span><br><span class="line">	tmp=<span class="variable">$&#123;key:num:1&#125;</span></span><br><span class="line">	pass=<span class="variable">$&#123;pass&#125;</span><span class="variable">$&#123;tmp&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$pass</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/pass.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/pass.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/pass.sh</span></span><br><span class="line">RBZw9WgDJ7</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/pass.sh</span></span><br><span class="line">mFhav0JBEl</span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/pass.sh</span></span><br><span class="line">IdHSgsydeA</span><br></pre></td></tr></table></figure>

<h2 id="12-2-随机密码2"><a href="#12-2-随机密码2" class="headerlink" title="12.2 随机密码2"></a>12.2 随机密码2</h2><ul>
<li>使用命令生成随机密码<ul>
<li>uuidgen</li>
<li>openssl</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">b8a4e198-cf50-402b-bdd7-42b2966f665a</span><br><span class="line">[root@localhost ~]<span class="comment"># uuidgen</span></span><br><span class="line">37e9ea82-ae7f-48c3-851f-a293ddf383bf</span><br><span class="line">[root@localhost ~]<span class="comment"># uuidgen</span></span><br><span class="line">507fe548-9528-4696-aa3b-4330fd6abe86</span><br><span class="line">[root@localhost ~]<span class="comment"># uuidgen</span></span><br><span class="line">3fc3d073-d650-49b0-b23c-53860f9c4e49</span><br><span class="line">[root@localhost ~]<span class="comment"># openssl rand -base64 10</span></span><br><span class="line">L0DcwWAboXfRhg==</span><br><span class="line">[root@localhost ~]<span class="comment"># openssl rand -base64 10</span></span><br><span class="line">Vqn4c1fuWpXSnw==</span><br></pre></td></tr></table></figure>

<h2 id="12-3-随机密码3"><a href="#12-3-随机密码3" class="headerlink" title="12.3 随机密码3"></a>12.3 随机密码3</h2><ul>
<li>使用随机设备文件(&#x2F;dev&#x2F;random、&#x2F;dev&#x2F;urandom)</li>
<li>tr命令可以对数据进行替换、删除等操作<ul>
<li>-c：取反、-d：删除</li>
</ul>
</li>
</ul>
<p><img src="image-20220930214751655.png" alt="shell脚本语言/image-20220930214751655"></p>
<h1 id="13-综合案例"><a href="#13-综合案例" class="headerlink" title="13.综合案例"></a>13.综合案例</h1><h2 id="13-1-进度条"><a href="#13-1-进度条" class="headerlink" title="13.1 进度条"></a>13.1 进度条</h2><blockquote>
<p>progress.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="function"><span class="title">bar</span></span>()&#123;</span><br><span class="line">	<span class="keyword">while</span> :</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> -en <span class="string">&quot;\033[42m \033[0m&quot;</span></span><br><span class="line">		<span class="built_in">sleep</span> 0.5</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line">bar &amp;</span><br><span class="line"><span class="built_in">cp</span> -r <span class="variable">$1</span> <span class="variable">$2</span></span><br><span class="line"><span class="built_in">kill</span> $!</span><br><span class="line"><span class="built_in">echo</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day03/progress.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day03/progress.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day03/progress.sh a.txt /root/shell</span></span><br></pre></td></tr></table></figure>

<h2 id="13-2-菜单选择"><a href="#13-2-菜单选择" class="headerlink" title="13.2 菜单选择"></a>13.2 菜单选择</h2><blockquote>
<p>menu.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#定义功能菜单，使用case语句判断用户选择的菜单项，实现对应的功能.</span></span><br><span class="line"></span><br><span class="line">clear</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[42m--------------------------------------\033[0m&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;#\e[32m 1.查看网卡信息\e[0m                          #&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;#\e[33m 2.查看内存信息\e[0m                          #&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;#\e[34m 3.查看磁盘信息\e[0m                          #&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;#\e[35m 4.查看CPU信息\e[0m                          #&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;#\e[36m 5.查看账户信息\e[0m                          #&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[42m--------------------------------------\033[0m&quot;</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请输入选择1-5:&quot;</span> key</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$key</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">	ifconfig | <span class="built_in">head</span> -2;;</span><br><span class="line">2)</span><br><span class="line">	mem=$(free | grep Mem | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f7)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;本机剩余内存容量为:<span class="variable">$&#123;mem&#125;</span>K.&quot;</span>;;</span><br><span class="line">3)</span><br><span class="line">	root_free=$(<span class="built_in">df</span> | grep /$ | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f4)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;本机磁盘剩余容量为:<span class="variable">$&#123;root_free&#125;</span>K.&quot;</span>;;</span><br><span class="line">4)</span><br><span class="line">	cpu=$(<span class="built_in">uptime</span> | <span class="built_in">tr</span> -s <span class="string">&quot; &quot;</span> | <span class="built_in">cut</span> -d <span class="string">&quot; &quot;</span> -f11)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;本机CPU 15分钟的平均负载为:<span class="variable">$cpu</span>.&quot;</span>;;</span><br><span class="line">5)</span><br><span class="line">	login_number=$(<span class="built_in">who</span> | <span class="built_in">wc</span> -l)</span><br><span class="line">	total_number=$(<span class="built_in">cat</span> /etc/passwd | <span class="built_in">wc</span> -l)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;当前系统账户为:<span class="variable">$USER</span>.&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;当前系统登陆的账户数量为:<span class="variable">$login_number</span>.&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;当前系统中一共有用户数量为:<span class="variable">$total_number</span>.&quot;</span>;;</span><br><span class="line">*)</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;输入有误，超出1-5的范围.&quot;</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20220930221417928.png" alt="shell脚本语言/image-20220930221417928"></p>
<h2 id="13-3-fork炸弹"><a href="#13-3-fork炸弹" class="headerlink" title="13.3 fork炸弹"></a>13.3 fork炸弹</h2><ul>
<li>无限循环自己，消耗系统资源</li>
</ul>
<p><img src="image-20220930221549639.png" alt="shell脚本语言/image-20220930221549639"></p>
<h1 id="14-正则表达式"><a href="#14-正则表达式" class="headerlink" title="14.正则表达式"></a>14.正则表达式</h1><h2 id="14-1-什么是正则表达式"><a href="#14-1-什么是正则表达式" class="headerlink" title="14.1 什么是正则表达式"></a>14.1 什么是正则表达式</h2><ul>
<li>描述一个字符集合的表达方式</li>
<li>模糊匹配</li>
<li>Regular Expression</li>
</ul>
<h2 id="14-2-基本正则符号"><a href="#14-2-基本正则符号" class="headerlink" title="14.2 基本正则符号"></a>14.2 基本正则符号</h2><p><img src="image-20220930231436994.png" alt="shell脚本语言/image-20220930231436994"></p>
<blockquote>
<p>包含某一个部分     ^以什么开头</p>
</blockquote>
<p><img src="image-20220930233006165.png" alt="shell脚本语言/image-20220930233006165"></p>
<blockquote>
<p>以什么结尾$        [abc]</p>
</blockquote>
<p><img src="image-20220930233224535.png" alt="shell脚本语言/image-20220930233224535"></p>
<blockquote>
<p>[^abc]</p>
</blockquote>
<p><img src="image-20220930233257345.png" alt="shell脚本语言/image-20220930233257345"></p>
<blockquote>
<p>.所有</p>
</blockquote>
<p><img src="image-20220930233327129.png" alt="shell脚本语言/image-20220930233327129"></p>
<blockquote>
<p>r.*t  包含以r开始，以t结尾的一部分</p>
</blockquote>
<p><img src="image-20220930233431230.png" alt="shell脚本语言/image-20220930233431230"></p>
<blockquote>
<p>[0-9]</p>
</blockquote>
<p><img src="image-20220930233511502.png" alt="shell脚本语言/image-20220930233511502"></p>
<blockquote>
<p>[0-9]*</p>
</blockquote>
<p><img src="image-20220930233555326.png" alt="shell脚本语言/image-20220930233555326"></p>
<blockquote>
<p>[0-9]\{m,n\}     [0-9]\{m\}</p>
</blockquote>
<p><img src="image-20220930233735371.png" alt="shell脚本语言/image-20220930233735371"></p>
<h2 id="14-3-扩展正则符号"><a href="#14-3-扩展正则符号" class="headerlink" title="14.3 扩展正则符号"></a>14.3 扩展正则符号</h2><p><img src="image-20220930233857801.png" alt="shell脚本语言/image-20220930233857801"></p>
<p><strong>注意：grep命令默认不支持扩展正则，需要在后面加 -E</strong></p>
<p><img src="image-20221001132116871.png" alt="shell脚本语言/image-20221001132116871"></p>
<p><img src="image-20221001132233404.png" alt="shell脚本语言/image-20221001132233404"></p>
<h2 id="14-4-Perl兼容的正则"><a href="#14-4-Perl兼容的正则" class="headerlink" title="14.4 Perl兼容的正则"></a>14.4 Perl兼容的正则</h2><p><strong>注意：grep命令默认不支持Perl兼容的正则，需要在后面加 -P</strong></p>
<p><img src="image-20221001132605681.png" alt="shell脚本语言/image-20221001132605681"></p>
<p><img src="image-20221001132822078.png" alt="shell脚本语言/image-20221001132822078"></p>
<p><img src="image-20221001133011743.png" alt="shell脚本语言/image-20221001133011743"></p>
<p><img src="image-20221001133115603.png" alt="shell脚本语言/image-20221001133115603"></p>
<p><img src="image-20221001133152498.png" alt="shell脚本语言/image-20221001133152498"></p>
<p><img src="image-20221001133441054.png" alt="shell脚本语言/image-20221001133441054"></p>
<p><img src="image-20221001133304275.png" alt="shell脚本语言/image-20221001133304275"></p>
<p><img src="image-20221001133514483.png" alt="shell脚本语言/image-20221001133514483"></p>
<h2 id="14-5-grep语法"><a href="#14-5-grep语法" class="headerlink" title="14.5 grep语法"></a>14.5 grep语法</h2><ul>
<li>用法：grep [选项] 匹配模式 [文件]…</li>
<li>常用选项：</li>
</ul>
<table>
<thead>
<tr>
<th>-i</th>
<th>忽略大小写</th>
</tr>
</thead>
<tbody><tr>
<td>-v</td>
<td>取反匹配</td>
</tr>
<tr>
<td>-w</td>
<td>匹配单词</td>
</tr>
<tr>
<td>-q</td>
<td>静默匹配，不将结果显示在屏幕</td>
</tr>
</tbody></table>
<h1 id="15-sed"><a href="#15-sed" class="headerlink" title="15.sed"></a>15.sed</h1><h2 id="15-1-什么是sed"><a href="#15-1-什么是sed" class="headerlink" title="15.1 什么是sed"></a>15.1 什么是sed</h2><ul>
<li>Stream Editor：流式编辑器<ul>
<li>非交互式</li>
<li>逐行处理</li>
<li>可以对文本进行增删改查等操作</li>
</ul>
</li>
</ul>
<h2 id="15-2-语法格式"><a href="#15-2-语法格式" class="headerlink" title="15.2 语法格式"></a>15.2 语法格式</h2><ul>
<li>语法<ul>
<li>sed [选项] ‘[定位符]指令’ 文件名</li>
<li>命令 | sed [选项] ‘[定位符]指令’</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sed &#x27;2p&#x27; /etc/hosts</span></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;2p&#x27; /etc/hosts</span></span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/hosts</span></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;3p&#x27; /etc/passwd</span></span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;1,3p&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>

<ul>
<li>常用的命令选项：</li>
</ul>
<table>
<thead>
<tr>
<th>-n</th>
<th>屏蔽默认输出</th>
</tr>
</thead>
<tbody><tr>
<td>-i</td>
<td>直接修改源文件</td>
</tr>
<tr>
<td>-r</td>
<td>支持扩展正则</td>
</tr>
</tbody></table>
<h2 id="15-3-数据定位"><a href="#15-3-数据定位" class="headerlink" title="15.3 数据定位"></a>15.3 数据定位</h2><h3 id="15-3-1-行号定位"><a href="#15-3-1-行号定位" class="headerlink" title="15.3.1 行号定位"></a>15.3.1 行号定位</h3><ul>
<li>sed可以使用行号来定位自己需要修改的数据内容</li>
</ul>
<p><img src="image-20221001135737983.png" alt="shell脚本语言/image-20221001135737983"></p>
<h3 id="15-3-2-正则定位"><a href="#15-3-2-正则定位" class="headerlink" title="15.3.2 正则定位"></a>15.3.2 正则定位</h3><ul>
<li>sed可以使用正则匹配需要的数据，然后再编辑对应的内容</li>
<li>&#x2F;正则表达式&#x2F;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sed -n &quot;/^root/p&quot; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -rn &quot;/[0-9]&#123;2&#125;/p&quot; /etc/passwd</span></span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br></pre></td></tr></table></figure>

<h2 id="15-4-常用sed指令"><a href="#15-4-常用sed指令" class="headerlink" title="15.4 常用sed指令"></a>15.4 常用sed指令</h2><table>
<thead>
<tr>
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>p(print)</td>
<td>打印行</td>
</tr>
<tr>
<td>d(delete)</td>
<td>删除行</td>
</tr>
<tr>
<td>c(replace)</td>
<td>替换行</td>
</tr>
<tr>
<td>s(substitution)</td>
<td>替换关键词</td>
</tr>
<tr>
<td>&#x3D;</td>
<td>打印行号</td>
</tr>
</tbody></table>
<blockquote>
<p>Print指令</p>
</blockquote>
<p><img src="image-20221001173408832.png" alt="shell脚本语言/image-20221001173408832"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;/IPADDR/p&#x27; /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.1.25&quot;</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">TYPE=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line">PROXY_METHOD=<span class="string">&quot;none&quot;</span></span><br><span class="line">BROWSER_ONLY=<span class="string">&quot;dhcp&quot;</span></span><br><span class="line">BOOTPROTO=<span class="string">&quot;static&quot;</span></span><br><span class="line">DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV4_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">IPV6INIT=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_AUTOCONF=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_DEFROUTE=<span class="string">&quot;yes&quot;</span></span><br><span class="line">IPV6_FAILURE_FATAL=<span class="string">&quot;no&quot;</span></span><br><span class="line">IPV6_ADDR_GEN_MODE=<span class="string">&quot;stable-privacy&quot;</span></span><br><span class="line">NAME=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">UUID=<span class="string">&quot;25297bb4-b1e8-48a9-9a0a-6fc8e840bc6e&quot;</span></span><br><span class="line">DEVICE=<span class="string">&quot;ens33&quot;</span></span><br><span class="line">ONBOOT=<span class="string">&quot;yes&quot;</span></span><br><span class="line"></span><br><span class="line">IPADDR=<span class="string">&quot;192.168.1.25&quot;</span></span><br><span class="line">GATEWAY=<span class="string">&quot;192.168.1.1&quot;</span></span><br><span class="line">[root@localhost ~]<span class="comment"># free</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:        1863004      227420     1484488        9724      151096     1483072</span><br><span class="line">Swap:       2097148           0     2097148</span><br><span class="line">[root@localhost ~]<span class="comment"># free | sed -n &#x27;/Mem/p&#x27;</span></span><br><span class="line">Mem:        1863004      227644     1484244        9724      151116     1482848</span><br><span class="line">[root@localhost ~]<span class="comment"># df -h</span></span><br><span class="line">文件系统                 容量  已用  可用 已用% 挂载点</span><br><span class="line">devtmpfs                 898M     0  898M    0% /dev</span><br><span class="line">tmpfs                    910M     0  910M    0% /dev/shm</span><br><span class="line">tmpfs                    910M  9.5M  901M    2% /run</span><br><span class="line">tmpfs                    910M     0  910M    0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/centos-root   27G  1.6G   26G    6% /</span><br><span class="line">/dev/sda1               1014M  151M  864M   15% /boot</span><br><span class="line">tmpfs                    182M     0  182M    0% /run/user/0</span><br><span class="line">[root@localhost ~]<span class="comment"># df -h | sed -n &#x27;/\/$/p&#x27;</span></span><br><span class="line">/dev/mapper/centos-root   27G  1.6G   26G    6% /</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;1p;3p;6p&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;2!p&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;2p&#x27; /etc/passwd</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Delete指令（不使用-i选项，源文件不会被修改）</p>
</blockquote>
<p><img src="image-20221001174247850.png" alt="shell脚本语言/image-20221001174247850"></p>
<blockquote>
<p>Replace指令（不使用-i选项，源文件不会被修改）</p>
</blockquote>
<p><img src="image-20221001174702340.png" alt="shell脚本语言/image-20221001174702340"></p>
<blockquote>
<p> Substitution（不使用-i选项，源文件不会被修改）</p>
</blockquote>
<p><img src="image-20221001175107205.png" alt="shell脚本语言/image-20221001175107205"></p>
<ul>
<li><strong>Substitution(替换符&#x2F;可以用其它字换)</strong></li>
</ul>
<p><img src="image-20221001175732090.png" alt="shell脚本语言/image-20221001175732090"></p>
<ul>
<li><strong>Substitution(正则符号（）具有保留的功能)</strong></li>
</ul>
<p><img src="image-20221001180110429.png" alt="shell脚本语言/image-20221001180110429"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo &quot;hello the world&quot; | sed -r &#x27;s/^(.)(.*)(.)$/\3\2\1/&#x27;</span></span><br><span class="line">dello the worlh</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;hello the world&quot; | sed -r &#x27;s/^(.)(.*)(.)$/\3\1\2/&#x27;</span></span><br><span class="line">dhello the worl</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;hello the world&quot; | sed -r &#x27;s/^(.)(.*)(.)$/\3\3\3\1/&#x27;</span></span><br><span class="line">dddh</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;hello the world&quot; | sed -r &#x27;s/^(.)(.*)(.)$/\3/&#x27;</span></span><br><span class="line">d</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;hello the world&quot; | sed -r &#x27;s/^(.)(.*)(.)$/\2/&#x27;</span></span><br><span class="line">ello the worl</span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;hello the world&quot; | sed -r &#x27;s/^(.)(.*)(.)$/\1/&#x27;</span></span><br><span class="line">h</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x3D;</p>
</blockquote>
<p><img src="image-20221001180816520.png" alt="shell脚本语言/image-20221001180816520"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;1=&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;8=&#x27; /etc/passwd</span></span><br><span class="line">8</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;/root/=&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">10</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;/bash$/=&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;/$/=&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n &#x27;$=&#x27; /etc/passwd</span></span><br><span class="line">18</span><br><span class="line">[root@localhost ~]<span class="comment"># wc -l /etc/passwd</span></span><br><span class="line">18 /etc/passwd</span><br></pre></td></tr></table></figure>

<h2 id="15-5-文本块指令"><a href="#15-5-文本块指令" class="headerlink" title="15.5 文本块指令"></a>15.5 文本块指令</h2><h3 id="15-5-1-常用指令"><a href="#15-5-1-常用指令" class="headerlink" title="15.5.1 常用指令"></a>15.5.1 常用指令</h3><table>
<thead>
<tr>
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>i(insert)</td>
<td>插入</td>
</tr>
<tr>
<td>a(append)</td>
<td>追加</td>
</tr>
<tr>
<td>r(read)</td>
<td>读取文件|导入文件内容</td>
</tr>
<tr>
<td>w(write)</td>
<td>文件另存为|导出文件内容</td>
</tr>
</tbody></table>
<h3 id="15-5-2-插入指令"><a href="#15-5-2-插入指令" class="headerlink" title="15.5.2 插入指令"></a>15.5.2 插入指令</h3><ul>
<li>insert(插入，行前写入)</li>
</ul>
<p><img src="image-20221001181621059.png" alt="shell脚本语言/image-20221001181621059"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat test.txt</span></span><br><span class="line">2046 2048 2046 2046</span><br><span class="line">1001 2046 2999 1888</span><br><span class="line">2046 2046 2046 2046</span><br><span class="line">[root@localhost ~]<span class="comment"># sed &#x27;2iABC_XYZ&#x27; test.txt</span></span><br><span class="line">2046 2048 2046 2046</span><br><span class="line">ABC_XYZ</span><br><span class="line">1001 2046 2999 1888</span><br><span class="line">2046 2046 2046 2046</span><br><span class="line">[root@localhost ~]<span class="comment"># cat test.txt</span></span><br><span class="line">2046 2048 2046 2046</span><br><span class="line">1001 2046 2999 1888</span><br><span class="line">2046 2046 2046 2046</span><br><span class="line">[root@localhost ~]<span class="comment"># sed -i &#x27;3iABC_XYZ&#x27; test.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat test.txt</span></span><br><span class="line">2046 2048 2046 2046</span><br><span class="line">1001 2046 2999 1888</span><br><span class="line">ABC_XYZ</span><br><span class="line">2046 2046 2046 2046</span><br><span class="line">[root@localhost ~]<span class="comment"># sed &#x27;/2046/iABC\nXYZ&#x27; test.txt</span></span><br><span class="line">ABC</span><br><span class="line">XYZ</span><br><span class="line">2046 2048 2046 2046</span><br><span class="line">ABC</span><br><span class="line">XYZ</span><br><span class="line">1001 2046 2999 1888</span><br><span class="line">ABC_XYZ</span><br><span class="line">ABC</span><br><span class="line">XYZ</span><br><span class="line">2046 2046 2046 2046</span><br><span class="line">[root@localhost ~]<span class="comment"># sed &#x27;/1888/iABC\nXYZ&#x27; test.txt</span></span><br><span class="line">2046 2048 2046 2046</span><br><span class="line">ABC</span><br><span class="line">XYZ</span><br><span class="line">1001 2046 2999 1888</span><br><span class="line">ABC_XYZ</span><br><span class="line">2046 2046 2046 2046</span><br></pre></td></tr></table></figure>

<h3 id="15-5-3-追加指令"><a href="#15-5-3-追加指令" class="headerlink" title="15.5.3 追加指令"></a>15.5.3 追加指令</h3><ul>
<li>append(追加，行后写入)</li>
</ul>
<p><img src="image-20221001182433197.png" alt="shell脚本语言/image-20221001182433197"></p>
<h3 id="15-5-4-导入指令"><a href="#15-5-4-导入指令" class="headerlink" title="15.5.4 导入指令"></a>15.5.4 导入指令</h3><ul>
<li>read(将其它文件的内容导入)</li>
</ul>
<p><img src="image-20221001182625949.png" alt="shell脚本语言/image-20221001182625949"></p>
<h3 id="15-5-5-导出指令"><a href="#15-5-5-导出指令" class="headerlink" title="15.5.5 导出指令"></a>15.5.5 导出指令</h3><ul>
<li>write(将其它文件内容导出另存到其它文件)</li>
</ul>
<p><img src="image-20221001182827717.png" alt="shell脚本语言/image-20221001182827717"></p>
<h2 id="15-6-综合案例"><a href="#15-6-综合案例" class="headerlink" title="15.6 综合案例"></a>15.6 综合案例</h2><h3 id="15-6-1-点名器"><a href="#15-6-1-点名器" class="headerlink" title="15.6.1 点名器"></a>15.6.1 点名器</h3><ul>
<li>新建一个名单文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day04/name.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /root/shell/day04/name.txt</span></span><br><span class="line">李白</span><br><span class="line">杜甫</span><br><span class="line">白居易</span><br><span class="line">孟浩然</span><br><span class="line">苏轼</span><br></pre></td></tr></table></figure>

<ul>
<li>编写随机点名脚本</li>
</ul>
<blockquote>
<p>roll.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#功能描述：随机点名抽奖器.按Ctrl+c结束脚本</span></span><br><span class="line">name_file=<span class="string">&quot;name.txt&quot;</span></span><br><span class="line">line_file=$(sed -n <span class="string">&#x27;$=&#x27;</span> <span class="variable">$name_file</span>)</span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	clear</span><br><span class="line">	tmp=$(sed -n <span class="string">&quot;$[RANDOM%line_file+1]p&quot;</span> <span class="variable">$name_file</span>)</span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m  随机点名器（按Ctrl+C停止）：\033[0m&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m#############################\033[0m&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m#                     #\033[0m&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m         <span class="variable">$tmp</span>           \033[0m&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m#                     #\033[0m&quot;</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">&quot;\033[32m#############################\033[0m&quot;</span></span><br><span class="line">	<span class="built_in">sleep</span> 0.1</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20221001185009012.png" alt="shell脚本语言/image-20221001185009012"></p>
<h3 id="15-6-2-抓取某个网站首页的所有图片"><a href="#15-6-2-抓取某个网站首页的所有图片" class="headerlink" title="15.6.2 抓取某个网站首页的所有图片"></a>15.6.2 抓取某个网站首页的所有图片</h3><blockquote>
<p>grasppig.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#功能描述：编写脚本抓取单个网页中的图片数据</span></span><br><span class="line">URL=<span class="string">&quot;/root/shell/day04/spider_$$.txt&quot;</span></span><br><span class="line"><span class="comment">#将网页源代码保存到文件中</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m正在获取网页源码，请稍后...\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">curl -s https://xiaguyangdie.github.io/2022/09/27/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%B9%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ &gt; <span class="variable">$URL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#对文件进行过滤和清洗，获取需要的种子URL链接</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m正在获取种子URL，请稍后...\033[0m&quot;</span></span><br><span class="line"><span class="comment">#删除包含&lt;img的行</span></span><br><span class="line">sed -i <span class="string">&#x27;/&lt;img/!d&#x27;</span> <span class="variable">$URL</span></span><br><span class="line"><span class="comment">#删除src=&quot;及其前面的所有内容</span></span><br><span class="line">sed -i <span class="string">&#x27;s/.*src=&quot;/https:\/\/xiaguyangdie.github.io/&#x27;</span> <span class="variable">$URL</span></span><br><span class="line"><span class="comment">#删除双引号及其后面的所有内容</span></span><br><span class="line">sed -i <span class="string">&#x27;s/&quot;.*//&#x27;</span> <span class="variable">$URL</span></span><br><span class="line"><span class="comment">#根据源码，发现有一张图片经过上述处理还有’&lt;img class=‘冗余</span></span><br><span class="line">sed -i <span class="string">&#x27;s/&lt;img class=//&#x27;</span> <span class="variable">$URL</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#检测系统是否安装wget下载根据</span></span><br><span class="line"><span class="keyword">if</span> ! rpm -q wget &amp;&gt; /dev/null</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	yum -y install wget</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#wget下载根据，其参数选项描述如下：-P指定将数据下载到特定的目录下，-q不显示下载过程</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[32m正在批量下载种子数据，请稍后...\033[0m&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">cat</span> <span class="variable">$URL</span>)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	wget -P /root/shell/day04/下载图片/ -q <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\033[33m下载完成\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除临时种子列表文件</span></span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$URL</span></span><br></pre></td></tr></table></figure>

<h2 id="15-7-总结"><a href="#15-7-总结" class="headerlink" title="15.7 总结"></a>15.7 总结</h2><p><img src="image-20221001211128959.png" alt="shell脚本语言/image-20221001211128959"></p>
<h1 id="16-awk"><a href="#16-awk" class="headerlink" title="16.awk"></a>16.awk</h1><h2 id="16-1-概述"><a href="#16-1-概述" class="headerlink" title="16.1 概述"></a>16.1 概述</h2><ul>
<li><p>awk编程语言&#x2F;数据处理引擎</p>
<ul>
<li>创造者：Aho、Weinberger、Kernighan</li>
<li>基于模式匹配检查输入文本，逐行处理并输出</li>
<li>通常用在Shell脚本中，获取指定的数据</li>
<li>单独使用时，可以对文本数据做统计</li>
</ul>
</li>
<li><p>语法格式</p>
<ul>
<li>格式1：前置命令 | awk [选项] ‘[条件]{指令}’</li>
<li>格式2：awk [选项] ‘[条件]{指令}’ 文件.. ..</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat test.txt</span></span><br><span class="line">hello the world</span><br><span class="line">welcome to Beijing</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;&#123;print $1,$3&#125;&#x27; test.txt</span></span><br><span class="line">hello world</span><br><span class="line">welcome Beijing</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;&#123;print&#125;&#x27; test.txt</span></span><br><span class="line">hello the world</span><br><span class="line">welcome to Beijing</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;&#123;print $3,$1&#125;&#x27; test.txt</span></span><br><span class="line">world hello</span><br><span class="line">Beijing welcome</span><br></pre></td></tr></table></figure>

<ul>
<li>常见选项：<code>-F</code>可以指定分隔符，默认分隔符为（空格或Tab键）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print $1,$3&#125;&#x27; /etc/passwd</span></span><br><span class="line">root 0</span><br><span class="line">bin 1</span><br><span class="line">daemon 2</span><br><span class="line">adm 3</span><br><span class="line">lp 4</span><br><span class="line"><span class="built_in">sync</span> 5</span><br><span class="line">shutdown 6</span><br><span class="line">halt 7</span><br><span class="line">mail 8</span><br><span class="line">operator 11</span><br><span class="line">games 12</span><br><span class="line">ftp 14</span><br><span class="line">nobody 99</span><br><span class="line">systemd-network 192</span><br><span class="line">dbus 81</span><br><span class="line">polkitd 999</span><br><span class="line">sshd 74</span><br><span class="line">postfix 89</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;&#123;print $1,$3&#125;&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash </span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin </span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin </span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin </span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin </span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync </span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown </span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt </span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin </span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin </span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin </span><br><span class="line">ftp:x:14:50:FTP </span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin </span><br><span class="line">systemd-network:x:192:192:systemd Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated </span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin </span><br></pre></td></tr></table></figure>

<ul>
<li>awk内置变量：都有特殊含义，可以直接使用</li>
</ul>
<p><img src="image-20221001213139090.png" alt="shell脚本语言/image-20221001213139090"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print NF&#125;&#x27; /etc/passwd</span></span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">7</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print NR&#125;&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print $NF&#125;&#x27; /etc/passwd</span></span><br><span class="line">/bin/bash</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/bin/sync</span><br><span class="line">/sbin/shutdown</span><br><span class="line">/sbin/halt</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;print &quot;用户名:&quot;$1,&quot;UID:&quot;$3&#125;&#x27; /etc/passwd</span></span><br><span class="line">用户名:root UID:0</span><br><span class="line">用户名:bin UID:1</span><br><span class="line">用户名:daemon UID:2</span><br><span class="line">用户名:adm UID:3</span><br><span class="line">用户名:lp UID:4</span><br><span class="line">用户名:<span class="built_in">sync</span> UID:5</span><br><span class="line">用户名:shutdown UID:6</span><br><span class="line">用户名:halt UID:7</span><br><span class="line">用户名:mail UID:8</span><br><span class="line">用户名:operator UID:11</span><br><span class="line">用户名:games UID:12</span><br><span class="line">用户名:ftp UID:14</span><br><span class="line">用户名:nobody UID:99</span><br><span class="line">用户名:systemd-network UID:192</span><br><span class="line">用户名:dbus UID:81</span><br><span class="line">用户名:polkitd UID:999</span><br><span class="line">用户名:sshd UID:74</span><br><span class="line">用户名:postfix UID:89</span><br></pre></td></tr></table></figure>

<ul>
<li>awk过滤的时机</li>
</ul>
<p><img src="image-20221001213751741.png" alt="shell脚本语言/image-20221001213751741"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;a=36;print a+64&#125;&#x27;</span></span><br><span class="line">100</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;a=36;b=64;print a+b&#125;&#x27;</span></span><br><span class="line">100</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;a=36;b=64;print a*b&#125;&#x27;</span></span><br><span class="line">2304</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;a=36;b=64;print a/b&#125;&#x27;</span></span><br><span class="line">0.5625</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;x=0&#125;/bash$/&#123;x++&#125;END&#123;print x&#125;&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;BEGIN&#123;print NR&#125; END&#123;print NR&#125;&#x27; /etc/passwd</span></span><br><span class="line">0</span><br><span class="line">18</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;/bash$/&#123;x++;print x&#125;&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;x=0&#125;/bash$/&#123;x++&#125;END&#123;print x&#125;&#x27; /etc/passwd</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h2 id="16-2-基本案例"><a href="#16-2-基本案例" class="headerlink" title="16.2 基本案例"></a>16.2 基本案例</h2><h3 id="16-2-1-过滤内存信息"><a href="#16-2-1-过滤内存信息" class="headerlink" title="16.2.1 过滤内存信息"></a>16.2.1 过滤内存信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># free</span></span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:        1863004      234940     1329084        9756      298980     1458928</span><br><span class="line">Swap:       2097148           0     2097148</span><br><span class="line">[root@localhost ~]<span class="comment"># free | awk &#x27;&#123;print $7&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">1458656</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># free | awk &#x27;&#123;print NF&#125;&#x27;</span></span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">4</span><br><span class="line">[root@localhost ~]<span class="comment"># free | awk &#x27;&#123;print $NF&#125;&#x27;</span></span><br><span class="line">available</span><br><span class="line">1458656</span><br><span class="line">2097148</span><br><span class="line">[root@localhost ~]<span class="comment"># free | grep Mem</span></span><br><span class="line">Mem:        1863004      235208     1328812        9756      298984     1458660</span><br><span class="line">[root@localhost ~]<span class="comment"># free | awk &#x27;/Mem/&#123;print $7&#125;&#x27;</span></span><br><span class="line">1458676</span><br><span class="line">[root@localhost ~]<span class="comment"># free | awk &#x27;/Mem/&#123;print $NF&#125;&#x27;</span></span><br><span class="line">1458676</span><br><span class="line">[root@localhost ~]<span class="comment"># df</span></span><br><span class="line">文件系统                   1K-块    已用     可用 已用% 挂载点</span><br><span class="line">devtmpfs                  919440       0   919440    0% /dev</span><br><span class="line">tmpfs                     931500       0   931500    0% /dev/shm</span><br><span class="line">tmpfs                     931500    9756   921744    2% /run</span><br><span class="line">tmpfs                     931500       0   931500    0% /sys/fs/cgroup</span><br><span class="line">/dev/mapper/centos-root 28289540 1585972 26703568    6% /</span><br><span class="line">/dev/sda1                1038336  153872   884464   15% /boot</span><br><span class="line">tmpfs                     186304       0   186304    0% /run/user/0</span><br><span class="line">[root@localhost ~]<span class="comment"># df | grep &quot;\/$&quot; | awk &#x27;&#123;print $4&#125;&#x27;</span></span><br><span class="line">26703568</span><br><span class="line">[root@localhost ~]<span class="comment"># df | grep &quot;\/$&quot;</span></span><br><span class="line">/dev/mapper/centos-root 28289540 1585972 26703568    6% /</span><br></pre></td></tr></table></figure>

<h3 id="16-2-2-过滤CPU信息"><a href="#16-2-2-过滤CPU信息" class="headerlink" title="16.2.2 过滤CPU信息"></a>16.2.2 过滤CPU信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># LANG=C lscpu</span></span><br><span class="line">Architecture:          x86_64</span><br><span class="line">CPU op-mode(s):        32-bit, 64-bit</span><br><span class="line">Byte Order:            Little Endian</span><br><span class="line">CPU(s):                1</span><br><span class="line">On-line CPU(s) list:   0</span><br><span class="line">Thread(s) per core:    1</span><br><span class="line">Core(s) per socket:    1</span><br><span class="line">Socket(s):             1</span><br><span class="line">NUMA node(s):          1</span><br><span class="line">Vendor ID:             GenuineIntel</span><br><span class="line">CPU family:            6</span><br><span class="line">Model:                 78</span><br><span class="line">Model name:            Intel(R) Core(TM) i5-6200U CPU @ 2.30GHz</span><br><span class="line">Stepping:              3</span><br><span class="line">CPU MHz:               2399.999</span><br><span class="line">BogoMIPS:              4799.99</span><br><span class="line">Hypervisor vendor:     VMware</span><br><span class="line">Virtualization <span class="built_in">type</span>:   full</span><br><span class="line">L1d cache:             32K</span><br><span class="line">L1i cache:             32K</span><br><span class="line">L2 cache:              256K</span><br><span class="line">L3 cache:              3072K</span><br><span class="line">NUMA node0 CPU(s):     0</span><br><span class="line">Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon nopl xtopology tsc_reliable nonstop_tsc eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch invpcid_single ssbd ibrs ibpb stibp fsgsbase tsc_adjust bmi1 avx2 smep bmi2 invpcid rdseed adx smap clflushopt xsaveopt xsavec xgetbv1 arat md_clear spec_ctrl intel_stibp flush_l1d arch_capabilities</span><br><span class="line">[root@localhost ~]<span class="comment"># LANG=C lscpu | grep &quot;Model name&quot; | awk -F: &#x27;&#123;print $2&#125;&#x27;</span></span><br><span class="line">            Intel(R) Core(TM) i5-6200U CPU @ 2.30GHz</span><br><span class="line">[root@localhost ~]<span class="comment"># LANG=C lscpu | grep &quot;Model name&quot; | awk -F: &#x27;&#123;print $2&#125;&#x27; | tr -s &quot; &quot;</span></span><br><span class="line"> Intel(R) Core(TM) i5-6200U CPU @ 2.30GHz</span><br><span class="line">[root@localhost ~]<span class="comment"># LANG=C lscpu | grep &quot;^CPU(s)&quot; | awk -F: &#x27;&#123;print $2&#125;&#x27;|tr -s &quot; &quot;</span></span><br><span class="line"> 1</span><br><span class="line">[root@localhost ~]<span class="comment"># uptime</span></span><br><span class="line"> 23:01:58 up 10:03,  2 <span class="built_in">users</span>,  load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]<span class="comment"># uptime | awk &#x27;&#123;print $NF&#125;&#x27;</span></span><br><span class="line">0.05</span><br></pre></td></tr></table></figure>

<h3 id="16-2-3-过滤网卡信息"><a href="#16-2-3-过滤网卡信息" class="headerlink" title="16.2.3 过滤网卡信息"></a>16.2.3 过滤网卡信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ifconfig ens33</span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.1.25  netmask 255.255.255.0  broadcast 192.168.1.255</span><br><span class="line">        inet6 fe80::f52a:6ec0:134d:1f2e  prefixlen 64  scopeid 0x20&lt;<span class="built_in">link</span>&gt;</span><br><span class="line">        ether 00:0c:29:9f:78:8e  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 20098  bytes 6728180 (6.4 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 14100  bytes 3412182 (3.2 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig ens33 | grep &quot;RX p&quot; | awk &#x27;&#123;print &quot;进站流量为:&quot; $5 &quot;字节&quot;&#125;&#x27;</span></span><br><span class="line">进站流量为:6737774字节</span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig ens33 | grep &quot;TX p&quot; | awk &#x27;&#123;print &quot;出站流量为:&quot; $5 &quot;字节&quot;&#125;&#x27;</span></span><br><span class="line">出站流量为:3423066字节</span><br></pre></td></tr></table></figure>

<h3 id="16-2-4-监控暴力破解的IP地址"><a href="#16-2-4-监控暴力破解的IP地址" class="headerlink" title="16.2.4 监控暴力破解的IP地址"></a>16.2.4 监控暴力破解的IP地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># grep &quot;Failed&quot; /var/log/secure</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ssh 192.168.1.25</span></span><br><span class="line">The authenticity of host <span class="string">&#x27;192.168.1.25 (192.168.1.25)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is SHA256:WyzcmUkCb1ERgx03IxblQQnTewpz0HbMXrNczyNEBms.</span></span><br><span class="line"><span class="string">ECDSA key fingerprint is MD5:9e:d9:42:d2:7f:7f:dc:19:2f:a1:08:17:69:16:58:87.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>192.168.1.25<span class="string">&#x27; (ECDSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">root@192.168.1.25&#x27;</span>s password: </span><br><span class="line">Permission denied, please try again.</span><br><span class="line">root@192.168.1.25<span class="string">&#x27;s password: </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@localhost ~]# vim /var/log/secure</span></span><br><span class="line"><span class="string">[root@localhost ~]# grep &quot;Failed&quot; /var/log/secure</span></span><br><span class="line"><span class="string">Oct  1 23:10:38 localhost sshd[44717]: Failed password for root from 192.168.1.25 port 34560 ssh2</span></span><br><span class="line"><span class="string">[root@localhost ~]# grep &quot;Failed&quot; /var/log/secure | awk &#x27;</span>&#123;<span class="built_in">print</span> <span class="variable">$11</span>&#125;<span class="string">&#x27;</span></span><br><span class="line"><span class="string">192.168.1.25</span></span><br><span class="line"><span class="string">[root@localhost ~]# awk &#x27;</span>/Failed/&#123;<span class="built_in">print</span> <span class="variable">$11</span>&#125;<span class="string">&#x27; /var/log/secure</span></span><br><span class="line"><span class="string">192.168.1.25</span></span><br></pre></td></tr></table></figure>

<h2 id="16-3-条件判断"><a href="#16-3-条件判断" class="headerlink" title="16.3 条件判断"></a>16.3 条件判断</h2><ul>
<li>输出所有行还是输出部分行?</li>
<li>如何限制仅输出部分行的数据内容？</li>
<li>如何设置多个条件？</li>
<li>awk [选项] ‘[条件]{指令}’ 文件</li>
<li>条件：<ul>
<li>正则表达式</li>
<li>数值&#x2F;字符比较</li>
<li>逻辑比较</li>
</ul>
</li>
</ul>
<blockquote>
<p>正则表达式</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/正则表达式/</span><br><span class="line">~匹配，!~不匹配</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;/^ro/&#123;print&#125;&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$7!~/bash$/&#123;print $1,$7&#125;&#x27; /etc/passwd</span></span><br><span class="line">bin /sbin/nologin</span><br><span class="line">daemon /sbin/nologin</span><br><span class="line">adm /sbin/nologin</span><br><span class="line">lp /sbin/nologin</span><br><span class="line"><span class="built_in">sync</span> /bin/sync</span><br><span class="line">shutdown /sbin/shutdown</span><br><span class="line">halt /sbin/halt</span><br><span class="line">mail /sbin/nologin</span><br><span class="line">operator /sbin/nologin</span><br><span class="line">games /sbin/nologin</span><br><span class="line">ftp /sbin/nologin</span><br><span class="line">nobody /sbin/nologin</span><br><span class="line">systemd-network /sbin/nologin</span><br><span class="line">dbus /sbin/nologin</span><br><span class="line">polkitd /sbin/nologin</span><br><span class="line">sshd /sbin/nologin</span><br><span class="line">postfix /sbin/nologin</span><br><span class="line">rpc /sbin/nologin</span><br><span class="line">gluster /sbin/nologin</span><br><span class="line">libstoragemgmt /sbin/nologin</span><br><span class="line">qemu /sbin/nologin</span><br><span class="line">chrony /sbin/nologin</span><br><span class="line">unbound /sbin/nologin</span><br><span class="line">saslauth /sbin/nologin</span><br><span class="line">radvd /sbin/nologin</span><br><span class="line">rtkit /sbin/nologin</span><br><span class="line">ntp /sbin/nologin</span><br><span class="line">tss /sbin/nologin</span><br><span class="line">usbmuxd /sbin/nologin</span><br><span class="line">pulse /sbin/nologin</span><br><span class="line">setroubleshoot /sbin/nologin</span><br><span class="line">colord /sbin/nologin</span><br><span class="line">abrt /sbin/nologin</span><br><span class="line">geoclue /sbin/nologin</span><br><span class="line">saned /sbin/nologin</span><br><span class="line">sssd /sbin/nologin</span><br><span class="line">rpcuser /sbin/nologin</span><br><span class="line">nfsnobody /sbin/nologin</span><br><span class="line">gdm /sbin/nologin</span><br><span class="line">gnome-initial-setup /sbin/nologin</span><br><span class="line">tcpdump /sbin/nologin</span><br><span class="line">avahi /sbin/nologin</span><br></pre></td></tr></table></figure>

<blockquote>
<p>数值&#x2F;字符比较</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">== 等于、!= 不等于</span><br><span class="line">&gt; 大于、&gt;= 大于等于</span><br><span class="line">&lt; 小于、&lt;= 小于等于</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;NR==2 &#123;print&#125;&#x27; /etc/passwd</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;NR==2&#x27; /etc/passwd</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$7!=&quot;/bin/bash&quot;&#x27; /etc/passwd</span></span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line"><span class="built_in">sync</span>:x:5:0:<span class="built_in">sync</span>:/sbin:/bin/sync</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">halt:x:7:0:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">polkitd:x:999:998:User <span class="keyword">for</span> polkitd:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">postfix:x:89:89::/var/spool/postfix:/sbin/nologin</span><br><span class="line">rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin</span><br><span class="line">gluster:x:998:994:GlusterFS daemons:/run/gluster:/sbin/nologin</span><br><span class="line">libstoragemgmt:x:997:993:daemon account <span class="keyword">for</span> libstoragemgmt:/var/run/lsm:/sbin/nologin</span><br><span class="line">qemu:x:107:107:qemu user:/:/sbin/nologin</span><br><span class="line">chrony:x:996:992::/var/lib/chrony:/sbin/nologin</span><br><span class="line">unbound:x:995:991:Unbound DNS resolver:/etc/unbound:/sbin/nologin</span><br><span class="line">saslauth:x:994:76:Saslauthd user:/run/saslauthd:/sbin/nologin</span><br><span class="line">radvd:x:75:75:radvd user:/:/sbin/nologin</span><br><span class="line">rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin</span><br><span class="line">ntp:x:38:38::/etc/ntp:/sbin/nologin</span><br><span class="line">tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</span><br><span class="line">usbmuxd:x:113:113:usbmuxd user:/:/sbin/nologin</span><br><span class="line">pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin</span><br><span class="line">setroubleshoot:x:993:987::/var/lib/setroubleshoot:/sbin/nologin</span><br><span class="line">colord:x:992:986:User <span class="keyword">for</span> colord:/var/lib/colord:/sbin/nologin</span><br><span class="line">abrt:x:173:173::/etc/abrt:/sbin/nologin</span><br><span class="line">geoclue:x:991:985:User <span class="keyword">for</span> geoclue:/var/lib/geoclue:/sbin/nologin</span><br><span class="line">saned:x:990:984:SANE scanner daemon user:/usr/share/sane:/sbin/nologin</span><br><span class="line">sssd:x:989:983:User <span class="keyword">for</span> sssd:/:/sbin/nologin</span><br><span class="line">rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin</span><br><span class="line">nfsnobody:x:65534:65534:Anonymous NFS User:/var/lib/nfs:/sbin/nologin</span><br><span class="line">gdm:x:42:42::/var/lib/gdm:/sbin/nologin</span><br><span class="line">gnome-initial-setup:x:988:982::/run/gnome-initial-setup/:/sbin/nologin</span><br><span class="line">tcpdump:x:72:72::/:/sbin/nologin</span><br><span class="line">avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$3&gt;=1000&#123;print $1&#125;&#x27; /etc/passwd</span></span><br><span class="line">nfsnobody</span><br></pre></td></tr></table></figure>

<blockquote>
<p>逻辑比较</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp;逻辑与：期望多个条件都成立</span><br><span class="line">||逻辑或：只要有一个条件处理即满足要求</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$3&gt;=0&amp;&amp;$3&lt;2&#123;print $1,$3&#125;&#x27; /etc/passwd</span></span><br><span class="line">root 0</span><br><span class="line">bin 1</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;$3==1||$3==7&#123;print $1,$3&#125;&#x27; /etc/passwd</span></span><br><span class="line">bin 1</span><br><span class="line">halt 7</span><br></pre></td></tr></table></figure>

<blockquote>
<p>运算符</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+、-、*、/、%</span><br><span class="line">++、--、+=、-=、*=、/=</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;NR%2==1&#123;print&#125;&#x27; /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown</span><br><span class="line">mail:x:8:12:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line">games:x:12:100:games:/usr/games:/sbin/nologin</span><br><span class="line">nobody:x:99:99:Nobody:/:/sbin/nologin</span><br><span class="line">dbus:x:81:81:System message bus:/:/sbin/nologin</span><br><span class="line">sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin</span><br><span class="line">rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin</span><br><span class="line">libstoragemgmt:x:997:993:daemon account <span class="keyword">for</span> libstoragemgmt:/var/run/lsm:/sbin/nologin</span><br><span class="line">chrony:x:996:992::/var/lib/chrony:/sbin/nologin</span><br><span class="line">saslauth:x:994:76:Saslauthd user:/run/saslauthd:/sbin/nologin</span><br><span class="line">rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin</span><br><span class="line">tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin</span><br><span class="line">pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin</span><br><span class="line">colord:x:992:986:User <span class="keyword">for</span> colord:/var/lib/colord:/sbin/nologin</span><br><span class="line">geoclue:x:991:985:User <span class="keyword">for</span> geoclue:/var/lib/geoclue:/sbin/nologin</span><br><span class="line">sssd:x:989:983:User <span class="keyword">for</span> sssd:/:/sbin/nologin</span><br><span class="line">nfsnobody:x:65534:65534:Anonymous NFS User:/var/lib/nfs:/sbin/nologin</span><br><span class="line">gnome-initial-setup:x:988:982::/run/gnome-initial-setup/:/sbin/nologin</span><br><span class="line">avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin</span><br><span class="line">[root@localhost ~]<span class="comment"># seq 200 | awk &#x27;BEGIN&#123;i=0&#125; ($0%3==0)&amp;&amp;($0%13==0)&#123;i++&#125;END&#123;print i&#125;&#x27;</span></span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<h2 id="16-4-流程控制"><a href="#16-4-流程控制" class="headerlink" title="16.4 流程控制"></a>16.4 流程控制</h2><h3 id="16-4-1-if判断"><a href="#16-4-1-if判断" class="headerlink" title="16.4.1 if判断"></a>16.4.1 if判断</h3><blockquote>
<p>单分支if判断</p>
</blockquote>
<p><img src="image-20221002134836470.png" alt="shell脚本语言/image-20221002134836470"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;if($3&gt;=1000)&#123;i++&#125;&#125;END&#123;print i&#125;&#x27; /etc/passwd</span></span><br><span class="line">1</span><br><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;if($1==&quot;root&quot;)&#123;print $1,$3&#125;&#125;&#x27; /etc/passwd</span></span><br><span class="line">root 0</span><br><span class="line">[root@localhost ~]<span class="comment"># uptime</span></span><br><span class="line"> 13:51:02 up 45 min,  2 <span class="built_in">users</span>,  load average: 0.00, 0.01, 0.05</span><br><span class="line">[root@localhost ~]<span class="comment"># uptime | awk &#x27;&#123;if($NF&gt;0.01)&#123;print &quot;CPUload:&quot;$NF&#125;&#125;&#x27;</span></span><br><span class="line">CPUload:0.05</span><br></pre></td></tr></table></figure>

<blockquote>
<p>双分支if判断</p>
</blockquote>
<p><img src="image-20221002142727139.png" alt="shell脚本语言/image-20221002142727139"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;&#123;if($3&gt;=1000)&#123;i++&#125;else&#123;j++&#125;&#125;END&#123;print &quot;普通用户:&quot;i,&quot;系统用户:&quot;j&#125;&#x27; /etc/passwd</span></span><br><span class="line">普通用户:1 系统用户:42</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l</span></span><br><span class="line">总用量 12</span><br><span class="line">-rw-------. 1 root root 1243 9月  28 15:46 anaconda-ks.cfg</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Desktop</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Documents</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Downloads</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Music</span><br><span class="line">-rw-r--r--. 1 root root   41 10月  1 18:46 name.txt</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Pictures</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Public</span><br><span class="line">drwxr-xr-x. 6 root root   58 10月  1 18:31 shell</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Templates</span><br><span class="line">-rw-r--r--. 1 root root   35 10月  1 21:22 test.txt</span><br><span class="line">drwxr-xr-x. 2 root root    6 10月  2 09:11 Videos</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l /etc</span></span><br><span class="line">总用量 1416</span><br><span class="line">drwxr-xr-x.  3 root root      101 10月  2 09:03 abrt</span><br><span class="line">-rw-r--r--.  1 root root       16 9月  28 15:44 adjtime</span><br><span class="line">-rw-r--r--.  1 root root     1529 4月   1 2020 aliases</span><br><span class="line">-rw-r--r--.  1 root root    12288 9月  28 15:48 aliases.db</span><br><span class="line">drwxr-xr-x.  3 root root       65 10月  2 09:06 alsa</span><br><span class="line">drwxr-xr-x.  2 root root     4096 10月  2 09:07 alternatives</span><br><span class="line">-rw-------.  1 root root      541 8月   9 2019 anacrontab</span><br><span class="line">-rw-r--r--.  1 root root       55 8月   8 2019 asound.conf</span><br><span class="line">-rw-r--r--.  1 root root        1 5月  18 23:54 at.deny</span><br><span class="line">drwxr-x---.  3 root root       43 9月  28 15:40 audisp</span><br><span class="line">drwxr-x---.  3 root root       83 9月  28 15:47 audit</span><br><span class="line">-rw-r--r--.  1 root root    15137 12月 16 2020 autofs.conf</span><br><span class="line">-rw-------.  1 root root      232 12月 16 2020 autofs_ldap_auth.conf</span><br><span class="line">-rw-r--r--.  1 root root      795 12月 16 2020 auto.master</span><br><span class="line">drwxr-xr-x.  2 root root        6 12月 16 2020 auto.master.d</span><br><span class="line">-rw-r--r--.  1 root root      524 12月 16 2020 auto.misc</span><br><span class="line">-rwxr-xr-x.  1 root root     1260 12月 16 2020 auto.net</span><br><span class="line">-rwxr-xr-x.  1 root root      687 12月 16 2020 auto.smb</span><br><span class="line">drwxr-xr-x.  4 root root       71 10月  2 09:06 avahi</span><br><span class="line">drwxr-xr-x.  2 root root     4096 10月  2 09:06 bash_completion.d</span><br><span class="line">-rw-r--r--.  1 root root     2853 4月   1 2020 bashrc</span><br><span class="line">drwxr-xr-x.  2 root root       26 9月   1 22:57 binfmt.d</span><br><span class="line">drwxr-xr-x.  2 root root       23 10月  2 09:01 bluetooth</span><br><span class="line">drwxr-xr-x.  2 root root    12288 10月  2 09:02 brltty</span><br><span class="line">-rw-r--r--.  1 root root    21929 4月  11 2018 brltty.conf</span><br><span class="line">-rw-r--r--.  1 root root       37 10月 23 2020 centos-release</span><br><span class="line">-rw-r--r--.  1 root root       51 10月 23 2020 centos-release-upstream</span><br><span class="line">drwxr-xr-x.  2 root root       29 10月  2 09:02 certmonger</span><br><span class="line">-rw-r--r--.  1 root root      676 8月   9 2019 cgconfig.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 8月   9 2019 cgconfig.d</span><br><span class="line">-rw-r--r--.  1 root root      265 10月  2 09:06 cgrules.conf</span><br><span class="line">-rw-r--r--.  1 root root      131 8月   9 2019 cgsnapshot_blacklist.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 13 2020 chkconfig.d</span><br><span class="line">-rw-r--r--.  1 root root     1108 8月   8 2019 chrony.conf</span><br><span class="line">-rw-r-----.  1 root chrony    481 8月   8 2019 chrony.keys</span><br><span class="line">drwxr-xr-x.  2 root root       26 10月  2 09:06 cifs-utils</span><br><span class="line">drwxr-xr-x.  2 root root       54 10月  2 09:06 cron.d</span><br><span class="line">drwxr-xr-x.  2 root root       57 10月  2 09:06 cron.daily</span><br><span class="line">-rw-------.  1 root root        0 8月   9 2019 cron.deny</span><br><span class="line">drwxr-xr-x.  2 root root       22 6月  10 2014 cron.hourly</span><br><span class="line">drwxr-xr-x.  2 root root        6 6月  10 2014 cron.monthly</span><br><span class="line">-rw-r--r--.  1 root root      451 6月  10 2014 crontab</span><br><span class="line">drwxr-xr-x.  2 root root        6 6月  10 2014 cron.weekly</span><br><span class="line">-rw-------.  1 root root        0 9月  28 15:38 crypttab</span><br><span class="line">-rw-r--r--.  1 root root     1620 4月   1 2020 csh.cshrc</span><br><span class="line">-rw-r--r--.  1 root root     1103 4月   1 2020 csh.login</span><br><span class="line">drwxr-xr-x.  5 root lp       4096 10月  2 10:12 cups</span><br><span class="line">drwxr-xr-x.  2 root root       34 10月  2 09:03 cupshelpers</span><br><span class="line">drwxr-xr-x.  4 root root       78 9月  28 15:40 dbus-1</span><br><span class="line">drwxr-xr-x.  4 root root       31 10月  2 09:01 dconf</span><br><span class="line">drwxr-xr-x.  2 root root       44 9月  28 15:44 default</span><br><span class="line">drwxr-xr-x.  2 root root       40 10月  2 09:04 depmod.d</span><br><span class="line">drwxr-x---.  4 root root       53 9月  28 15:40 dhcp</span><br><span class="line">-rw-r--r--.  1 root root     5090 8月   6 2019 DIR_COLORS</span><br><span class="line">-rw-r--r--.  1 root root     5725 8月   6 2019 DIR_COLORS.256color</span><br><span class="line">-rw-r--r--.  1 root root     4669 8月   6 2019 DIR_COLORS.lightbgcolor</span><br><span class="line">-rw-r--r--.  1 root root     1174 4月  11 2018 dleyna-server-service.conf</span><br><span class="line">-rw-r--r--.  1 root root    26832 7月  21 2021 dnsmasq.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 7月  21 2021 dnsmasq.d</span><br><span class="line">-rw-r--r--.  1 root root     1285 9月  30 2020 dracut.conf</span><br><span class="line">drwxr-xr-x.  2 root root       34 10月  2 09:01 dracut.conf.d</span><br><span class="line">-rw-r--r--.  1 root root      112 9月  30 2020 e2fsck.conf</span><br><span class="line">drwxr-xr-x.  3 root root       37 9月  29 15:14 egl</span><br><span class="line">-rw-r--r--.  1 root root     4760 8月   9 2019 enscript.cfg</span><br><span class="line">-rw-r--r--.  1 root root        0 4月   1 2020 environment</span><br><span class="line">-rw-r--r--.  1 root root     1317 4月  11 2018 ethertypes</span><br><span class="line">-rw-r--r--.  1 root root        0 6月   7 2013 exports</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 14 2021 exports.d</span><br><span class="line">lrwxrwxrwx.  1 root root       56 9月  28 15:40 favicon.png -&gt; /usr/share/icons/hicolor/16x16/apps/fedora-logo-icon.png</span><br><span class="line">drwxr-xr-x.  2 root root       22 10月  2 09:02 fcoe</span><br><span class="line">drwxr-xr-x.  2 root root       46 10月  2 09:02 festival</span><br><span class="line">-rw-r--r--.  1 root root       70 4月   1 2020 filesystems</span><br><span class="line">drwxr-xr-x.  3 root root       18 10月  2 09:06 firefox</span><br><span class="line">drwxr-x---.  7 root root      133 10月  2 09:05 firewalld</span><br><span class="line">drwxr-xr-x.  3 root root       23 10月  2 09:04 flatpak</span><br><span class="line">drwxr-xr-x.  3 root root       38 9月  29 15:14 fonts</span><br><span class="line">-rw-r--r--.  1 root root       20 10月 31 2018 fprintd.conf</span><br><span class="line">-rw-r--r--.  1 root root      465 9月  28 15:38 fstab</span><br><span class="line">-rw-r--r--.  1 root root       38 10月 30 2018 fuse.conf</span><br><span class="line">drwxr-xr-x.  3 root root       59 10月  2 09:04 fwupd</span><br><span class="line">drwxr-xr-x.  7 root root      107 10月  2 09:01 gconf</span><br><span class="line">drwxr-xr-x.  2 root root        6 8月   2 2017 gcrypt</span><br><span class="line">-rw-r--r--.  1 root root      265 9月  30 2020 gdbinit</span><br><span class="line">drwxr-xr-x.  2 root root        6 9月  30 2020 gdbinit.d</span><br><span class="line">drwxr-xr-x.  6 root root      107 10月  2 09:05 gdm</span><br><span class="line">drwxr-xr-x.  2 root root       26 10月  2 09:03 geoclue</span><br><span class="line">-rw-r--r--.  1 root root     1704 8月  13 2019 GeoIP.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月  1 2020 ghostscript</span><br><span class="line">drwxr-xr-x.  3 root root       26 9月  29 15:14 glvnd</span><br><span class="line">drwxr-xr-x.  2 root root        6 7月  13 2018 gnupg</span><br><span class="line">-rw-r--r--.  1 root root       94 3月  25 2017 GREP_COLORS</span><br><span class="line">drwxr-xr-x.  4 root root       40 9月  28 15:39 groff</span><br><span class="line">-rw-r--r--.  1 root root      960 10月  2 09:06 group</span><br><span class="line">-rw-r--r--.  1 root root      946 10月  2 09:06 group-</span><br><span class="line">lrwxrwxrwx.  1 root root       22 9月  28 15:40 grub2.cfg -&gt; ../boot/grub2/grub.cfg</span><br><span class="line">drwx------.  2 root root      182 9月  28 15:40 grub.d</span><br><span class="line">----------.  1 root root      772 10月  2 09:06 gshadow</span><br><span class="line">----------.  1 root root      760 10月  2 09:06 gshadow-</span><br><span class="line">drwxr-xr-x.  3 root root       20 6月  28 23:31 gss</span><br><span class="line">drwxr-xr-x.  2 root root       79 10月  2 09:05 gssproxy</span><br><span class="line">-rw-r--r--.  1 root root        9 6月   7 2013 host.conf</span><br><span class="line">-rw-r--r--.  1 root root       22 9月  28 15:44 hostname</span><br><span class="line">-rw-r--r--.  1 root root      158 6月   7 2013 hosts</span><br><span class="line">-rw-r--r--.  1 root root      370 6月   7 2013 hosts.allow</span><br><span class="line">-rw-r--r--.  1 root root      460 6月   7 2013 hosts.deny</span><br><span class="line">drwxr-xr-x.  2 root root       24 10月  2 09:02 hp</span><br><span class="line">-rw-r--r--.  1 root root     4849 4月  11 2018 idmapd.conf</span><br><span class="line">lrwxrwxrwx.  1 root root       11 9月  28 15:39 init.d -&gt; rc.d/init.d</span><br><span class="line">-rw-r--r--.  1 root root      511 10月 13 2020 inittab</span><br><span class="line">-rw-r--r--.  1 root root      942 6月   7 2013 inputrc</span><br><span class="line">drwxr-xr-x.  3 root root       19 10月  2 09:01 ipa</span><br><span class="line">drwxr-xr-x.  2 root root      159 9月  28 15:39 iproute2</span><br><span class="line">-rw-r--r--.  1 root root     1073 8月   7 2020 ipsec.conf</span><br><span class="line">drwx------.  3 root root       22 10月  2 09:02 ipsec.d</span><br><span class="line">-rw-------.  1 root root       31 8月   7 2020 ipsec.secrets</span><br><span class="line">drwxr-xr-x.  2 root root       52 10月  2 09:01 iscsi</span><br><span class="line">-rw-r--r--.  1 root root       23 10月 23 2020 issue</span><br><span class="line">-rw-r--r--.  1 root root       22 10月 23 2020 issue.net</span><br><span class="line">drwxr-xr-x.  3 root root       62 10月  2 09:02 java</span><br><span class="line">drwxr-xr-x.  2 root root        6 11月 21 2015 jvm</span><br><span class="line">drwxr-xr-x.  2 root root        6 11月 21 2015 jvm-commmon</span><br><span class="line">-rw-r--r--.  1 root root     7274 9月  28 15:40 kdump.conf</span><br><span class="line">drwxr-xr-x.  3 root root       24 9月  28 15:40 kernel</span><br><span class="line">-rw-r--r--.  1 root root      646 1月  14 2022 krb5.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 6月  28 23:31 krb5.conf.d</span><br><span class="line">-rw-r--r--.  1 root root     1128 8月  11 01:53 kshrc</span><br><span class="line">-rw-r--r--.  1 root root      478 1月   8 2022 ksmtuned.conf</span><br><span class="line">-rw-r--r--.  1 root root    81151 10月  2 09:07 ld.so.cache</span><br><span class="line">-rw-r--r--.  1 root root       28 2月  28 2013 ld.so.conf</span><br><span class="line">drwxr-xr-x.  2 root root      161 10月  2 09:03 ld.so.conf.d</span><br><span class="line">-rw-r-----.  1 root root      191 3月   2 2019 libaudit.conf</span><br><span class="line">drwxr-xr-x.  3 root root       20 10月  2 09:01 libblockdev</span><br><span class="line">drwxr-xr-x.  2 root root     4096 10月  2 09:01 libibverbs.d</span><br><span class="line">drwxr-xr-x.  2 root root       35 9月  28 15:39 libnl</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月  1 2020 libpaper.d</span><br><span class="line">drwxr-xr-x.  6 root root      187 10月  2 09:03 libreport</span><br><span class="line">-rw-r--r--.  1 root root     2391 10月 13 2013 libuser.conf</span><br><span class="line">drwx------.  5 root root      199 10月  2 09:10 libvirt</span><br><span class="line">-rw-r--r--.  1 root root       19 9月  28 15:44 locale.conf</span><br><span class="line">lrwxrwxrwx.  1 root root       35 9月  28 15:44 localtime -&gt; ../usr/share/zoneinfo/Asia/Shanghai</span><br><span class="line">-rw-r--r--.  1 root root     2027 8月   6 2019 login.defs</span><br><span class="line">-rw-r--r--.  1 root root      662 7月  31 2013 logrotate.conf</span><br><span class="line">drwxr-xr-x.  2 root root      261 10月  2 09:06 logrotate.d</span><br><span class="line">drwxr-xr-x.  3 root root       43 10月  2 09:01 lsm</span><br><span class="line">drwxr-xr-x.  6 root root      100 9月  28 15:40 lvm</span><br><span class="line">-r--r--r--.  1 root root       33 9月  28 15:40 machine-id</span><br><span class="line">-rw-r--r--.  1 root root      111 10月  1 2020 magic</span><br><span class="line">-rw-r--r--.  1 root root     1968 4月  11 2018 mail.rc</span><br><span class="line">-rw-r--r--.  1 root root     5122 10月  2 2020 makedumpfile.conf.sample</span><br><span class="line">-rw-r--r--.  1 root root     5171 10月 31 2018 man_db.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 11月 21 2015 maven</span><br><span class="line">-rw-r--r--.  1 root root     1106 9月  30 2020 mke2fs.conf</span><br><span class="line">drwxr-xr-x.  2 root root      166 10月  2 09:05 modprobe.d</span><br><span class="line">drwxr-xr-x.  2 root root        6 9月   1 22:57 modules-load.d</span><br><span class="line">-rw-r--r--.  1 root root        0 6月   7 2013 motd</span><br><span class="line">lrwxrwxrwx.  1 root root       17 9月  28 15:38 mtab -&gt; /proc/self/mounts</span><br><span class="line">-rw-r--r--.  1 root root     2620 6月  10 2014 mtools.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 8月  31 2021 multipath</span><br><span class="line">-rw-r--r--.  1 root root      570 9月  30 2020 my.cnf</span><br><span class="line">drwxr-xr-x.  2 root root       31 9月  28 15:40 my.cnf.d</span><br><span class="line">-rw-r--r--.  1 root root     8892 6月  10 2014 nanorc</span><br><span class="line">drwxr-xr-x.  3 root root       38 10月  2 09:01 ndctl</span><br><span class="line">-rw-r--r--.  1 root root      767 8月   9 2019 netconfig</span><br><span class="line">drwxr-xr-x.  8 root root      145 10月  2 09:06 NetworkManager</span><br><span class="line">-rw-r--r--.  1 root root       58 10月 13 2020 networks</span><br><span class="line">-rw-r--r--.  1 root root     1023 10月 14 2021 nfs.conf</span><br><span class="line">-rw-r--r--.  1 root root     3391 10月 14 2021 nfsmount.conf</span><br><span class="line">-rw-r--r--.  1 root root     1949 9月  28 15:40 nsswitch.conf</span><br><span class="line">-rw-r--r--.  1 root root     1938 9月  30 2020 nsswitch.conf.bak</span><br><span class="line">drwxr-xr-x.  3 root root       52 10月  2 09:02 ntp</span><br><span class="line">-rw-r--r--.  1 root root     2000 11月 28 2019 ntp.conf</span><br><span class="line">-rw-r--r--.  1 root root       91 12月  3 2012 numad.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 3月   6 2015 oddjob</span><br><span class="line">-rw-r--r--.  1 root root     4922 3月   6 2015 oddjobd.conf</span><br><span class="line">drwxr-xr-x.  2 root root       70 10月  2 09:02 oddjobd.conf.d</span><br><span class="line">drwxr-xr-x.  3 root root       36 9月  28 15:40 openldap</span><br><span class="line">drwxr-xr-x.  2 root root        6 4月  11 2018 opt</span><br><span class="line">lrwxrwxrwx.  1 root root       21 9月  28 15:39 os-release -&gt; ../usr/lib/os-release</span><br><span class="line">drwxr-xr-x.  2 root root       92 10月  2 09:06 PackageKit</span><br><span class="line">drwxr-xr-x.  2 root root     4096 10月  2 09:06 pam.d</span><br><span class="line">-rw-r--r--.  1 root root       68 10月  1 2020 papersize</span><br><span class="line">-rw-r--r--.  1 root root     2261 10月  2 09:06 passwd</span><br><span class="line">-rw-r--r--.  1 root root     2187 10月  2 09:06 passwd-</span><br><span class="line">-rw-r--r--.  1 root root     1362 6月  10 2014 pbm2ppa.conf</span><br><span class="line">-rw-r--r--.  1 root root     2872 6月  10 2014 pinforc</span><br><span class="line">drwxr-xr-x.  3 root root       21 9月  28 15:39 pkcs11</span><br><span class="line">drwxr-xr-x. 12 root root      151 10月  2 09:04 pki</span><br><span class="line">drwxr-xr-x.  2 root root       28 10月  2 09:02 plymouth</span><br><span class="line">drwxr-xr-x.  5 root root       52 9月  28 15:39 pm</span><br><span class="line">-rw-r--r--.  1 root root     6300 6月  10 2014 pnm2ppa.conf</span><br><span class="line">drwxr-xr-x.  5 root root       72 9月  28 15:40 polkit-1</span><br><span class="line">drwxr-xr-x.  2 root root        6 6月  10 2014 popt.d</span><br><span class="line">drwxr-xr-x.  2 root root      154 9月  28 15:40 postfix</span><br><span class="line">drwxr-xr-x.  3 root root      219 10月  2 09:01 ppp</span><br><span class="line">drwxr-xr-x.  2 root root      105 10月  2 09:02 prelink.conf.d</span><br><span class="line">-rw-r--r--.  1 root root      233 6月   7 2013 printcap</span><br><span class="line">-rw-r--r--.  1 root root     1819 4月   1 2020 profile</span><br><span class="line">drwxr-xr-x.  2 root root     4096 10月  2 09:06 profile.d</span><br><span class="line">-rw-r--r--.  1 root root     6545 4月   1 2020 protocols</span><br><span class="line">drwxr-xr-x.  2 root root       79 10月  2 09:02 pulse</span><br><span class="line">drwxr-xr-x.  2 root root       23 10月  2 09:04 purple</span><br><span class="line">drwxr-xr-x.  2 root root       35 9月  28 15:39 python</span><br><span class="line">drwxr-xr-x.  3 root root       50 10月  2 09:06 qemu-ga</span><br><span class="line">drwxr-xr-x.  2 root root       51 10月  2 09:04 qemu-kvm</span><br><span class="line">-rw-r--r--.  1 root root      433 10月 31 2018 radvd.conf</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc0.d -&gt; rc.d/rc0.d</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc1.d -&gt; rc.d/rc1.d</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc2.d -&gt; rc.d/rc2.d</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc3.d -&gt; rc.d/rc3.d</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc4.d -&gt; rc.d/rc4.d</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc5.d -&gt; rc.d/rc5.d</span><br><span class="line">lrwxrwxrwx.  1 root root       10 9月  28 15:39 rc6.d -&gt; rc.d/rc6.d</span><br><span class="line">drwxr-xr-x. 10 root root      127 10月  2 09:00 rc.d</span><br><span class="line">lrwxrwxrwx.  1 root root       13 10月  2 09:00 rc.local -&gt; rc.d/rc.local</span><br><span class="line">drwxr-xr-x.  3 root root       94 10月  2 09:01 rdma</span><br><span class="line">lrwxrwxrwx.  1 root root       14 9月  28 15:39 redhat-release -&gt; centos-release</span><br><span class="line">-rw-r--r--.  1 root root     1787 6月  10 2014 request-key.conf</span><br><span class="line">drwxr-xr-x.  2 root root       77 10月  2 09:06 request-key.d</span><br><span class="line">-rw-r--r--.  1 root root       88 9月  29 14:13 resolv.conf</span><br><span class="line">-rw-r--r--.  1 root root     1634 12月 25 2012 rpc</span><br><span class="line">drwxr-xr-x.  2 root root      128 10月  2 09:03 rpm</span><br><span class="line">-rw-r--r--.  1 root root      458 9月   1 22:58 rsyncd.conf</span><br><span class="line">-rw-r--r--.  1 root root     3232 10月 13 2020 rsyslog.conf</span><br><span class="line">drwxr-xr-x.  2 root root       25 10月  2 09:00 rsyslog.d</span><br><span class="line">-rw-r--r--.  1 root root      986 10月 13 2020 rwtab</span><br><span class="line">drwxr-xr-x.  2 root root       51 10月  2 09:05 rwtab.d</span><br><span class="line">drwxr-xr-x.  2 root root       61 10月  2 09:01 samba</span><br><span class="line">drwxr-xr-x.  3 root root     4096 10月  2 09:04 sane.d</span><br><span class="line">drwxr-xr-x.  2 root root       65 10月  2 09:02 sasl2</span><br><span class="line">drwxr-xr-x.  3 root root       34 10月  2 09:06 scl</span><br><span class="line">-rw-------.  1 root root      221 4月   1 2020 securetty</span><br><span class="line">drwxr-xr-x.  6 root root     4096 9月  28 15:39 security</span><br><span class="line">drwxr-xr-x.  5 root root       81 9月  28 15:40 selinux</span><br><span class="line">-rw-r--r--.  1 root root   670293 6月   7 2013 services</span><br><span class="line">-rw-r--r--.  1 root root      216 4月   1 2020 sestatus.conf</span><br><span class="line">drwxr-xr-x.  2 root root       33 10月  2 09:03 setroubleshoot</span><br><span class="line">drwxr-xr-x.  2 root root     4096 10月  2 09:06 setuptool.d</span><br><span class="line">drwxr-xr-x.  3 root root       21 10月  2 09:01 sgml</span><br><span class="line">----------.  1 root root     1137 10月  2 09:06 shadow</span><br><span class="line">----------.  1 root root     1116 10月  2 09:06 shadow-</span><br><span class="line">-rw-r--r--.  1 root root       82 9月  29 14:57 shells</span><br><span class="line">drwxr-xr-x.  3 root root       92 10月  2 09:01 skel</span><br><span class="line">drwxr-xr-x.  3 root root       74 10月  2 09:06 smartmontools</span><br><span class="line">-rw-r--r--.  1 root root      138 6月  28 23:29 sos.conf</span><br><span class="line">drwxr-xr-x.  4 root root       56 10月  2 09:05 speech-dispatcher</span><br><span class="line">drwxr-xr-x.  2 root root      225 9月  28 15:47 ssh</span><br><span class="line">drwxr-xr-x.  2 root root       19 9月  28 15:39 ssl</span><br><span class="line">drwx--x--x.  3 sssd sssd       20 10月  2 09:05 sssd</span><br><span class="line">-rw-r--r--.  1 root root      212 10月 13 2020 statetab</span><br><span class="line">drwxr-xr-x.  2 root root        6 10月 13 2020 statetab.d</span><br><span class="line">-rw-r--r--.  1 root root        0 9月  30 21:10 subgid</span><br><span class="line">-rw-r--r--.  1 root root       18 9月  30 21:10 subgid-</span><br><span class="line">-rw-r--r--.  1 root root        0 9月  30 21:10 subuid</span><br><span class="line">-rw-r--r--.  1 root root       18 9月  30 21:10 subuid-</span><br><span class="line">-rw-r-----.  1 root root     1786 9月  30 2020 sudo.conf</span><br><span class="line">-r--r-----.  1 root root     4328 9月  30 2020 sudoers</span><br><span class="line">drwxr-x---.  2 root root        6 10月  1 2020 sudoers.d</span><br><span class="line">-rw-r-----.  1 root root     3181 9月  30 2020 sudo-ldap.conf</span><br><span class="line">drwxr-xr-x.  6 root root     4096 10月  2 09:06 sysconfig</span><br><span class="line">-rw-r--r--.  1 root root      449 10月 13 2020 sysctl.conf</span><br><span class="line">drwxr-xr-x.  2 root root       28 9月   1 22:57 sysctl.d</span><br><span class="line">drwxr-xr-x.  4 root root      151 10月  2 09:00 systemd</span><br><span class="line">lrwxrwxrwx.  1 root root       14 9月  28 15:39 system-release -&gt; centos-release</span><br><span class="line">-rw-r--r--.  1 root root       23 10月 23 2020 system-release-cpe</span><br><span class="line">drwxr-xr-x.  4 root root       30 10月  2 09:05 target</span><br><span class="line">-rw-------.  1 tss  tss      7046 8月   4 2017 tcsd.conf</span><br><span class="line">drwxr-xr-x.  2 root root        6 9月   7 2017 terminfo</span><br><span class="line">drwxr-xr-x.  2 root root        6 9月   1 22:57 tmpfiles.d</span><br><span class="line">-rw-r--r--.  1 root root      750 2月  24 2022 trusted-key.key</span><br><span class="line">drwxr-xr-x.  3 root root      109 9月  28 15:40 tuned</span><br><span class="line">drwxr-xr-x.  3 root root       54 10月  2 09:04 udev</span><br><span class="line">drwxr-xr-x.  2 root root       26 10月  2 09:02 udisks2</span><br><span class="line">drwxr-xr-x.  2 root root       68 10月  2 09:02 unbound</span><br><span class="line">-rw-r--r--.  1 root root      557 4月  11 2018 updatedb.conf</span><br><span class="line">drwxr-xr-x.  2 root root       25 10月  2 09:02 UPower</span><br><span class="line">-rw-r--r--.  1 root root     1523 4月  11 2018 usb_modeswitch.conf</span><br><span class="line">-rw-r--r--.  1 root root       37 9月  28 15:44 vconsole.conf</span><br><span class="line">-rw-r--r--.  1 root root     1982 12月 16 2020 vimrc</span><br><span class="line">-rw-r--r--.  1 root root     1982 12月 16 2020 virc</span><br><span class="line">drwxr-xr-x.  4 root root      208 10月  2 09:02 vmware-tools</span><br><span class="line">drwxr-xr-x.  2 root root       88 9月  30 16:29 vsftpd</span><br><span class="line">-rw-r--r--.  1 root root     4479 5月  16 2019 wgetrc</span><br><span class="line">drwxr-xr-x.  2 root root       33 9月  28 15:40 wpa_supplicant</span><br><span class="line">-rw-r--r--.  1 root root        0 6月  10 2014 wvdial.conf</span><br><span class="line">drwxr-xr-x.  6 root root      103 10月  2 09:01 X11</span><br><span class="line">drwxr-xr-x.  6 root root      116 10月  2 09:05 xdg</span><br><span class="line">drwxr-xr-x.  2 root root        6 4月  11 2018 xinetd.d</span><br><span class="line">drwxr-xr-x.  2 root root       21 10月  2 09:01 xml</span><br><span class="line">drwxr-xr-x.  6 root root      100 9月  28 15:40 yum</span><br><span class="line">-rw-r--r--.  1 root root      970 10月  2 2020 yum.conf</span><br><span class="line">drwxr-xr-x.  2 root root      220 9月  29 21:58 yum.repos.d</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l /etc | awk &#x27;&#123;if($1~/^-/)&#123;x++&#125;else&#123;y++&#125;&#125;END&#123;print &quot;普通文件个数:&quot;x,&quot;目录个数:&quot;y&#125;&#x27;</span></span><br><span class="line">普通文件个数:133 目录个数:159</span><br></pre></td></tr></table></figure>

<blockquote>
<p>多分支if判断</p>
</blockquote>
<p><img src="image-20221002143959978.png" alt="shell脚本语言/image-20221002143959978"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ls -l /etc | awk &#x27;&#123;if($1~/^-/)&#123;x++&#125;else if($1~/^d/)&#123;y++&#125;else&#123;z++&#125;&#125;END&#123;print &quot;普通文件个数:&quot;x,&quot;目录个数:&quot;y,&quot;其它个数:&quot;,z&#125;&#x27;</span></span><br><span class="line">普通文件个数:133 目录个数:142 其它个数: 17</span><br></pre></td></tr></table></figure>

<h3 id="16-4-2-for循环"><a href="#16-4-2-for循环" class="headerlink" title="16.4.2 for循环"></a>16.4.2 for循环</h3><p><img src="image-20221002144557991.png" alt="shell脚本语言/image-20221002144557991"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;for(i=1;i&lt;=5;i++)&#123;print i&#125;&#125;&#x27;</span></span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;for(i=5;i&gt;=1;i--)&#123;print i&#125;&#125;&#x27;</span></span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>



<h2 id="16-5-awk数组与应用案例"><a href="#16-5-awk数组与应用案例" class="headerlink" title="16.5 awk数组与应用案例"></a>16.5 awk数组与应用案例</h2><h3 id="16-5-1-awk数组"><a href="#16-5-1-awk数组" class="headerlink" title="16.5.1 awk数组"></a>16.5.1 awk数组</h3><p><img src="image-20221002144838367.png" alt="shell脚本语言/image-20221002144838367"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;name[0]=&quot;jim&quot;;name[1]=&quot;tom&quot;;print name[1],name[0]&#125;&#x27;</span></span><br><span class="line">tom jim</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;name[0]=&quot;jim&quot;;name[1]=&quot;tom&quot;;print name[1],name[1]&#125;&#x27;</span></span><br><span class="line">tom tom</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;age[&quot;jim&quot;]=18;age[&quot;tom&quot;]=22;print age[&quot;tom&quot;],age[&quot;jim&quot;]&#125;&#x27;</span></span><br><span class="line">22 18</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;age[&quot;jim&quot;]=18;age[&quot;tom&quot;]=22;print age[&quot;tom&quot;],age[&quot;tom&quot;]&#125;&#x27;</span></span><br><span class="line">22 22</span><br></pre></td></tr></table></figure>

<blockquote>
<p>遍历数组元素</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;x[0]=0;x[1]=1;x[2]=2;x[3]=3;for(i in x)&#123;print x[i]&#125;&#125;&#x27;</span></span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;x[0]=0;x[1]=1;x[2]=2;x[3]=3;for(i in x)&#123;print i,x[i]&#125;&#125;&#x27;</span></span><br><span class="line">0 0</span><br><span class="line">1 1</span><br><span class="line">2 2</span><br><span class="line">3 3</span><br></pre></td></tr></table></figure>

<h3 id="16-5-2-统计web访问日志"><a href="#16-5-2-统计web访问日志" class="headerlink" title="16.5.2 统计web访问日志"></a>16.5.2 统计web访问日志</h3><blockquote>
<p>准备内容:生成一个access.log文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim access.log</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat access.log</span></span><br><span class="line">172.80.1.18</span><br><span class="line">172.80.1.17</span><br><span class="line">172.80.1.18</span><br><span class="line">172.80.1.16</span><br><span class="line">172.80.1.17</span><br><span class="line">172.80.1.18</span><br></pre></td></tr></table></figure>

<blockquote>
<p>访问日志的格式</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> /var/log/httpd/access.log</span><br></pre></td></tr></table></figure>

<blockquote>
<p>简化数据，统计每个IP访问的次数</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;&#123;IP[$1]++&#125;END&#123;for(i in IP)&#123;print i,IP[i]&#125;&#125;&#x27; access.log</span></span><br><span class="line">172.80.1.16 1</span><br><span class="line">172.80.1.17 2</span><br><span class="line">172.80.1.18 3</span><br></pre></td></tr></table></figure>

<h2 id="16-6-awk综合案例"><a href="#16-6-awk综合案例" class="headerlink" title="16.6 awk综合案例"></a>16.6 awk综合案例</h2><h3 id="16-6-1-TCP连接状态"><a href="#16-6-1-TCP连接状态" class="headerlink" title="16.6.1 TCP连接状态"></a>16.6.1 TCP连接状态</h3><p><img src="image-20221002152700205.png" alt="shell脚本语言/image-20221002152700205"></p>
<h3 id="16-6-2-ss命令"><a href="#16-6-2-ss命令" class="headerlink" title="16.6.2 ss命令"></a>16.6.2 ss命令</h3><p><img src="image-20221002153104391.png" alt="shell脚本语言/image-20221002153104391"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ss -at</span></span><br><span class="line">State      Recv-Q Send-Q                                  Local Address:Port                                                   Peer Address:Port                </span><br><span class="line">LISTEN     0      5                                       192.168.122.1:domain                                                            *:*                    </span><br><span class="line">LISTEN     0      128                                                 *:ssh                                                               *:*                    </span><br><span class="line">LISTEN     0      128                                         127.0.0.1:ipp                                                               *:*                    </span><br><span class="line">LISTEN     0      100                                         127.0.0.1:smtp                                                              *:*                    </span><br><span class="line">LISTEN     0      128                                         127.0.0.1:x11-ssh-offset                                                    *:*                    </span><br><span class="line">LISTEN     0      128                                                 *:sunrpc                                                            *:*                    </span><br><span class="line">ESTAB      0      0                                        192.168.1.25:ssh                                                   192.168.1.180:52870                </span><br><span class="line">ESTAB      0      0                                        192.168.1.25:ssh                                                   192.168.1.180:55379                </span><br><span class="line">LISTEN     0      128                                              [::]:ssh                                                            [::]:*                    </span><br><span class="line">LISTEN     0      128                                             [::1]:ipp                                                            [::]:*                    </span><br><span class="line">LISTEN     0      100                                             [::1]:smtp                                                           [::]:*                    </span><br><span class="line">LISTEN     0      128                                             [::1]:x11-ssh-offset                                                 [::]:*                    </span><br><span class="line">LISTEN     0      128                                              [::]:sunrpc                                                         [::]:*      </span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ss -s</span></span><br><span class="line">Total: 664 (kernel 982)</span><br><span class="line">TCP:   14 (estab 2, closed 1, orphaned 0, synrecv 0, timewait 0/0), ports 0</span><br><span class="line"></span><br><span class="line">Transport Total     IP        IPv6</span><br><span class="line">*	  982       -         -        </span><br><span class="line">RAW	  1         0         1        </span><br><span class="line">UDP	  10        7         3        </span><br><span class="line">TCP	  13        8         5        </span><br><span class="line">INET	  24        15        9        </span><br><span class="line">FRAG	  0         0         0     </span><br></pre></td></tr></table></figure>

<h3 id="16-6-3-过滤连接状态"><a href="#16-6-3-过滤连接状态" class="headerlink" title="16.6.3 过滤连接状态"></a>16.6.3 过滤连接状态</h3><blockquote>
<p>net.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">#所有TCP连接个数</span></span><br><span class="line">TCP_Total=$(ss -s | awk <span class="string">&#x27;$1==&quot;TCP&quot;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#所有UDP连接个数</span></span><br><span class="line">UDP_Total=$(ss -s | awk <span class="string">&#x27;$1==&quot;UDP&quot;&#123;print $2&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#所有处于Listen监听状态的TCP端口个数</span></span><br><span class="line">TCP_Listen_Total=$(ss -antlpH | awk <span class="string">&#x27;BEGIN&#123;count=0&#125;&#123;count++&#125;END&#123;print count&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#所有处于ESTABLlSHED状态的TCP连接个数</span></span><br><span class="line">TCP_Estab_Total=$(ss -antpH | awk <span class="string">&#x27;BEGIN&#123;count=0&#125;/^ESTAB/&#123;count++&#125;END&#123;print count&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#所有处于TIME-WAIT状态的TCP连接个数</span></span><br><span class="line">TCP_TIME_WAIT_Total=$(ss -antpH | awk <span class="string">&#x27;BEGIN&#123;count=0&#125;/^TIME-WAIT/&#123;count++&#125;END&#123;print count&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示TCP连接总数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;TCP连接总数:<span class="variable">$TCP_Total</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示UDP连接总数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UDP连接总数:<span class="variable">$UDP_Total</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示处于LISTEN状态的TCP端口个数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;处于LISTEN状态的TCP端口个数:<span class="variable">$TCP_Listen_Total</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示处于ESTABLISHED状态的TCP连接个数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;处于ESTABLISHED状态的TCP连接个数:<span class="variable">$TCP_Estab_Total</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#显示处于TIME-WAIT状态的TCP连接个数</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;处于TIME-WAIT状态的TCP连接个数:<span class="variable">$TCP_TIME_WAIT_Total</span>&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day04/net.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day04/net.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day04/net.sh</span></span><br><span class="line">TCP连接总数:13</span><br><span class="line">UDP连接总数:10</span><br><span class="line">处于LISTEN状态的TCP端口个数:11</span><br><span class="line">处于ESTABLISHED状态的TCP连接个数:2</span><br><span class="line">处于TIME-WAIT状态的TCP连接个数:0</span><br></pre></td></tr></table></figure>

<h1 id="17-案例"><a href="#17-案例" class="headerlink" title="17.案例"></a>17.案例</h1><h2 id="17-1-循环嵌套"><a href="#17-1-循环嵌套" class="headerlink" title="17.1 循环嵌套"></a>17.1 循环嵌套</h2><h3 id="17-1-1-打印星星矩阵"><a href="#17-1-1-打印星星矩阵" class="headerlink" title="17.1.1 打印星星矩阵"></a>17.1.1 打印星星矩阵</h3><blockquote>
<p>star.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#######################</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">&quot;* &quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="comment">#######################</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> &#123;1..5&#125;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -n <span class="string">&quot;* &quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day05/star.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day05/star.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day05/star.sh</span></span><br><span class="line">* * * * * </span><br><span class="line"></span><br><span class="line">* * * * * </span><br><span class="line">* * * * * </span><br><span class="line">* * * * * </span><br><span class="line">* * * * * </span><br><span class="line">* * * * * </span><br></pre></td></tr></table></figure>

<h3 id="17-1-2-排列与组合"><a href="#17-1-2-排列与组合" class="headerlink" title="17.1.2 排列与组合"></a>17.1.2 排列与组合</h3><blockquote>
<p>compose.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#打印1-3的所有排列组合方式</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..3&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> &#123;1..3&#125;</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;i&#125;</span><span class="variable">$&#123;j&#125;</span>&quot;</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day05/compose.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day05/compose.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day05/compose.sh</span></span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td></tr></table></figure>

<h3 id="17-1-3-打印形状"><a href="#17-1-3-打印形状" class="headerlink" title="17.1.3 打印形状"></a>17.1.3 打印形状</h3><blockquote>
<p>sharp1.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;=6;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">for</span>((j=1;j&lt;=i;j++))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> -ne <span class="string">&quot;\033[101m  \033[0m&quot;</span></span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">	<span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20221002162528008.png" alt="shell脚本语言/image-20221002162528008"></p>
<blockquote>
<p>sharp2.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;=6;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span>((j=6;j&gt;=i;j--))</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -ne <span class="string">&quot;\033[101m \033[0m&quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20221002162949187.png" alt="shell脚本语言/image-20221002162949187"></p>
<blockquote>
<p>sharp3.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;=6;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span>((j=1;j&lt;=i;j++))</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -ne <span class="string">&quot;\033[101m  \033[0m&quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span>((i=1;i&lt;=5;i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">        <span class="keyword">for</span>((j=5;j&gt;=i;j--))</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">echo</span> -ne <span class="string">&quot;\033[101m  \033[0m&quot;</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20221002163523540.png" alt="shell脚本语言/image-20221002163523540"></p>
<h2 id="17-2-带菜单的脚本"><a href="#17-2-带菜单的脚本" class="headerlink" title="17.2 带菜单的脚本"></a>17.2 带菜单的脚本</h2><blockquote>
<p>menu.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1.查看剩余内存容量.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2.查看磁盘剩余容量.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3.查看CPU十五分钟负载.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4.查看系统进程数量.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;5.查看系统账户数量.&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;6.退出.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">read</span> -p <span class="string">&quot;请输入选项[1-6]:&quot;</span> key</span><br><span class="line">	<span class="keyword">case</span> <span class="variable">$key</span> <span class="keyword">in</span></span><br><span class="line">	1)</span><br><span class="line">		free | awk <span class="string">&#x27;/Mem/&#123;print $NF&#125;&#x27;</span>;;</span><br><span class="line">	2)</span><br><span class="line">		<span class="built_in">df</span> | awk <span class="string">&#x27;/\/$/&#123;print $4&#125;&#x27;</span>;;</span><br><span class="line">	3)</span><br><span class="line">		<span class="built_in">uptime</span> | awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span>;;</span><br><span class="line">	4)</span><br><span class="line">		ps aux | <span class="built_in">wc</span> -l;;</span><br><span class="line">	5)</span><br><span class="line">		sed -n <span class="string">&#x27;$=&#x27;</span> /etc/passwd;;</span><br><span class="line">	6)</span><br><span class="line">		<span class="built_in">exit</span></span><br><span class="line">	<span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day05/menu.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day05/menu.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day05/menu.sh</span></span><br><span class="line">1.查看剩余内存容量.</span><br><span class="line">2.查看磁盘剩余容量.</span><br><span class="line">3.查看CPU十五分钟负载.</span><br><span class="line">4.查看系统进程数量.</span><br><span class="line">5.查看系统账户数量.</span><br><span class="line">6.退出.</span><br><span class="line">请输入选项[1-6]:1</span><br><span class="line">1429176</span><br><span class="line">请输入选项[1-6]:2</span><br><span class="line">23462260</span><br><span class="line">请输入选项[1-6]:3</span><br><span class="line">0.05</span><br><span class="line">请输入选项[1-6]:4</span><br><span class="line">126</span><br><span class="line">请输入选项[1-6]:5</span><br><span class="line">43</span><br><span class="line">请输入选项[1-6]:6</span><br></pre></td></tr></table></figure>

<h2 id="17-3-备份数据"><a href="#17-3-备份数据" class="headerlink" title="17.3 备份数据"></a>17.3 备份数据</h2><h3 id="17-3-1-备份日志"><a href="#17-3-1-备份日志" class="headerlink" title="17.3.1 备份日志"></a>17.3.1 备份日志</h3><ul>
<li>备份&#x2F;var&#x2F;log日志</li>
</ul>
<blockquote>
<p>bak_log.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">date</span>=`<span class="built_in">date</span> +%Y%m%d`</span><br><span class="line"><span class="keyword">if</span> [ ! -f /tmp/log-<span class="variable">$date</span>.tar.gz ];<span class="keyword">then</span></span><br><span class="line">	tar -czf /tmp/log-<span class="variable">$date</span>.tar.gz /var/log/</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20221002165438693.png" alt="shell脚本语言/image-20221002165438693"></p>
<h3 id="17-3-2-数据库备份"><a href="#17-3-2-数据库备份" class="headerlink" title="17.3.2 数据库备份"></a>17.3.2 数据库备份</h3><ul>
<li>逻辑备份</li>
</ul>
<blockquote>
<p>mysqldump.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">date</span>=$(<span class="built_in">date</span> +%Y%m%d)</span><br><span class="line">iuser=root</span><br><span class="line">ipass=</span><br><span class="line">db=mysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f /tmp/<span class="variable">$db</span>-<span class="variable">$date</span>.sql ];<span class="keyword">then</span></span><br><span class="line">	mysqldump -u<span class="variable">$iuser</span> --password=<span class="string">&quot;<span class="variable">$ipass</span>&quot;</span> <span class="variable">$db</span> &gt; /tmp/<span class="variable">$db</span>-<span class="variable">$date</span>.sql</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20221002170512112.png" alt="shell脚本语言/image-20221002170512112"></p>
<ul>
<li>物理备份</li>
</ul>
<blockquote>
<p>bak_mysql.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">date</span>=$(<span class="built_in">date</span> +%Y%m%d)</span><br><span class="line">db_dir=<span class="string">&quot;/var/lib/mysql&quot;</span></span><br><span class="line">db=mysql</span><br><span class="line"></span><br><span class="line">[ ! -d /tmp/<span class="variable">$db</span> ] &amp;&amp; <span class="built_in">mkdir</span> /tmp/<span class="variable">$db</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">ls</span> <span class="variable">$db_dir</span>/<span class="variable">$db</span>)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	tar -czf /tmp/<span class="variable">$db</span>/<span class="variable">$i</span>-<span class="variable">$date</span>.tar.gz <span class="variable">$db_dir</span>/<span class="variable">$db</span>/<span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="17-3-3-差异备份"><a href="#17-3-3-差异备份" class="headerlink" title="17.3.3 差异备份"></a>17.3.3 差异备份</h3><blockquote>
<p>isync.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">FROM_DIR=<span class="string">&quot;/var/www/html&quot;</span></span><br><span class="line">RSYNC_CMD=<span class="string">&quot;rsync -az --delete <span class="variable">$FROM_DIR</span> root@192.168.1.207:/var/www/html&quot;</span></span><br><span class="line"><span class="keyword">while</span> inotifywait -rqq -e modify,move,create,delete,attrib <span class="variable">$FROM_DIR</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="variable">$RSYNC_CMD</span></span><br><span class="line"><span class="keyword">done</span> &amp;</span><br></pre></td></tr></table></figure>

<h2 id="17-4-安全脚本"><a href="#17-4-安全脚本" class="headerlink" title="17.4 安全脚本"></a>17.4 安全脚本</h2><h3 id="17-4-1-HASH值"><a href="#17-4-1-HASH值" class="headerlink" title="17.4.1 HASH值"></a>17.4.1 HASH值</h3><ul>
<li>HASH值与文件名称、时间、大小等相关信息无关，仅与内容有关<ul>
<li>MD5</li>
<li>SHA256</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># md5sum /etc/passwd</span></span><br><span class="line">092af3f02ee6fe9b9b379d60be4cd449  /etc/passwd</span><br><span class="line">[root@localhost ~]<span class="comment"># sha256sum /etc/passwd</span></span><br><span class="line">2a235aa9af46f6ceed15d3b388503d900bb9f6aaa8682aef241033f6593c51f7  /etc/passwd</span><br></pre></td></tr></table></figure>

<h3 id="17-4-2-数据安全检测脚本"><a href="#17-4-2-数据安全检测脚本" class="headerlink" title="17.4.2 数据安全检测脚本"></a>17.4.2 数据安全检测脚本</h3><blockquote>
<p>data.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">ls</span> /etc/*.conf)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">md5sum</span> <span class="variable">$i</span> &gt;&gt; /tmp/data.log</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day05/data.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day05/data.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day05/data.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /tmp/data.log</span></span><br><span class="line">1c9cf478bb79baae4939470b606609d0  /etc/asound.conf</span><br><span class="line">0ece509eccdf4643d9cf6d7de94724d6  /etc/autofs.conf</span><br><span class="line">a22d3adba71785330b99cb33de8dbc7c  /etc/autofs_ldap_auth.conf</span><br><span class="line">bd71962e53c40611fac2547d579457d1  /etc/brltty.conf</span><br><span class="line">fc8937d470b4543b1e41c178b109c86d  /etc/cgconfig.conf</span><br><span class="line">2d1800509d849b4dfc69cf81e55f8709  /etc/cgrules.conf</span><br><span class="line">6511c771a4f3f09f4d219c4e6e440ba5  /etc/cgsnapshot_blacklist.conf</span><br><span class="line">fcd517a062526b95db1439099d6700ee  /etc/chrony.conf</span><br><span class="line">f610551bb1e45b72634e79b9828e4ed2  /etc/dleyna-server-service.conf</span><br><span class="line">7fc8a6174b906043e1038fa06e2eac2f  /etc/dnsmasq.conf</span><br><span class="line">649f5bf7c0c766969e40b54949a06866  /etc/dracut.conf</span><br><span class="line">7ee18e3a79c3f2aba431e5e044dfc37f  /etc/e2fsck.conf</span><br><span class="line">8dcabaa2bdaf7bbbe48582b3bb4422e7  /etc/fprintd.conf</span><br><span class="line">464a1a320cb1cf48fcbc83e190fd4c31  /etc/fuse.conf</span><br><span class="line">79efbbf7c29d7e47fbbe4165254cb936  /etc/GeoIP.conf</span><br><span class="line">4eb63731c9f5e30903ac4fc07a7fe3d6  /etc/host.conf</span><br><span class="line">fdb959029d9da0a6349245b459957735  /etc/idmapd.conf</span><br><span class="line">0c73c466eac04fdf5af70baac1eb4d4f  /etc/ipsec.conf</span><br><span class="line">7d27da884b52ec2e4e50bbe3307f2eb3  /etc/kdump.conf</span><br><span class="line">64d3951803f27509be4938af25550fb4  /etc/krb5.conf</span><br><span class="line">9a1e2cf8bad225de6f7bdd6fa3ef88ba  /etc/ksmtuned.conf</span><br><span class="line">cb878ee72257736aafffff720130ca9c  /etc/ld.so.conf</span><br><span class="line">cdc703f9d27f0d980271a9e95d0f18b2  /etc/libaudit.conf</span><br><span class="line">6bd2bb550f448cb81c6f0cbf806b936f  /etc/libuser.conf</span><br><span class="line">5edc32e54a97a89ea5f1324e21860801  /etc/locale.conf</span><br><span class="line">4b32bbe6d2d20a1f3150b0fb3918ae54  /etc/logrotate.conf</span><br><span class="line">ee665f08e63e1942b56ada46d25b9e3f  /etc/man_db.conf</span><br><span class="line">268e37e575074ca2ec24579094d80db9  /etc/mke2fs.conf</span><br><span class="line">8195cba880913d0e0ae47408f67842cf  /etc/mtools.conf</span><br><span class="line">030d9dd5df331fac8e45e2d58925b241  /etc/nfs.conf</span><br><span class="line">4ee47d76883a520d423066cd42785cc7  /etc/nfsmount.conf</span><br><span class="line">9f5dc50f774b41b956c492cb4d1e2fcb  /etc/nsswitch.conf</span><br><span class="line">dc9e5754ad2bb6f6c32b954c04431d0a  /etc/ntp.conf</span><br><span class="line">c7199d947bbca0ab21fca1532cad0158  /etc/numad.conf</span><br><span class="line">7eca62c7e1679b2ecf5cce3584fe0e4f  /etc/oddjobd.conf</span><br><span class="line">2992b4f15bf5288a382b912c1ab28b38  /etc/pbm2ppa.conf</span><br><span class="line">3676ff18df9214fbe9e6f0c1d27c02c7  /etc/pnm2ppa.conf</span><br><span class="line">dbe655b06a25f3b19ddaf942c071928b  /etc/radvd.conf</span><br><span class="line">8ad8d7d3deb6e3fbaaf483ed94fb6284  /etc/request-key.conf</span><br><span class="line">843ef386575b9a6a3b8cb1394d10eac0  /etc/resolv.conf</span><br><span class="line">c63fccb45c0dcbbbe17d0f4bdba920ec  /etc/rsyncd.conf</span><br><span class="line">0dd94a0c285fb32f41fa5b226e83c26b  /etc/rsyslog.conf</span><br><span class="line">8f42efd9d1efe717f27267e6a4286453  /etc/sestatus.conf</span><br><span class="line">5d35541d70c49cb27306ed0ec94472d5  /etc/sos.conf</span><br><span class="line">5d796b9d28e62cecda9df8ffbfb2f962  /etc/sudo.conf</span><br><span class="line">60eac7835f1d36c4ffdcb401a84c3e6c  /etc/sudo-ldap.conf</span><br><span class="line">324c073ebf5a4811bf7fd5610f170350  /etc/sysctl.conf</span><br><span class="line">839ba642d4de3d2115db7170bd0b6cba  /etc/tcsd.conf</span><br><span class="line">2a6ece5145eb8d37d2ea2f5811ff9351  /etc/updatedb.conf</span><br><span class="line">b7f857804762b4a81a71c93a2fe1207f  /etc/usb_modeswitch.conf</span><br><span class="line">bc5d532b7e48d93efa70b658bbd1af2b  /etc/vconsole.conf</span><br><span class="line">d41d8cd98f00b204e9800998ecf8427e  /etc/wvdial.conf</span><br><span class="line">a7dc0d7b8902e9c8c096c93eb431d19e  /etc/yum.conf</span><br></pre></td></tr></table></figure>

<h3 id="17-4-3-SSH配置"><a href="#17-4-3-SSH配置" class="headerlink" title="17.4.3 SSH配置"></a>17.4.3 SSH配置</h3><p><img src="image-20221002172715171.png" alt="shell脚本语言/image-20221002172715171"></p>
<blockquote>
<p>ssh_conf.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">conf=<span class="string">&quot;/etc/ssh/sshd_config&quot;</span></span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;/^Port/s/22/1122/&#x27;</span> <span class="variable">$conf</span></span><br><span class="line">sed -i <span class="string">&#x27;/^PermitRootLogin/s/yes/no/&#x27;</span> <span class="variable">$conf</span></span><br><span class="line">sed -i <span class="string">&#x27;/^UserDNS/s/yes/no/&#x27;</span> <span class="variable">$conf</span></span><br><span class="line">sed -i <span class="string">&#x27;$a AllowUsers tom&#x27;</span> <span class="variable">$conf</span></span><br><span class="line"></span><br><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure>

<h2 id="17-5-格式化输出passwd"><a href="#17-5-格式化输出passwd" class="headerlink" title="17.5 格式化输出passwd"></a>17.5 格式化输出passwd</h2><p><img src="image-20221002173454969.png" alt="shell脚本语言/image-20221002173454969"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk -F: &#x27;BEGIN&#123;print &quot;用户名 UID 家目录&quot;&#125;&#123;print $1,$3,$6&#125;&#x27; /etc/passwd | column -t</span></span><br><span class="line">用户名               UID    家目录</span><br><span class="line">root                 0      /root</span><br><span class="line">bin                  1      /bin</span><br><span class="line">daemon               2      /sbin</span><br><span class="line">adm                  3      /var/adm</span><br><span class="line">lp                   4      /var/spool/lpd</span><br><span class="line"><span class="built_in">sync</span>                 5      /sbin</span><br><span class="line">shutdown             6      /sbin</span><br><span class="line">halt                 7      /sbin</span><br><span class="line">mail                 8      /var/spool/mail</span><br><span class="line">operator             11     /root</span><br><span class="line">games                12     /usr/games</span><br><span class="line">ftp                  14     /var/ftp</span><br><span class="line">nobody               99     /</span><br><span class="line">systemd-network      192    /</span><br><span class="line">dbus                 81     /</span><br><span class="line">polkitd              999    /</span><br><span class="line">sshd                 74     /var/empty/sshd</span><br><span class="line">postfix              89     /var/spool/postfix</span><br><span class="line">rpc                  32     /var/lib/rpcbind</span><br><span class="line">gluster              998    /run/gluster</span><br><span class="line">libstoragemgmt       997    /var/run/lsm</span><br><span class="line">qemu                 107    /</span><br><span class="line">chrony               996    /var/lib/chrony</span><br><span class="line">unbound              995    /etc/unbound</span><br><span class="line">saslauth             994    /run/saslauthd</span><br><span class="line">radvd                75     /</span><br><span class="line">rtkit                172    /proc</span><br><span class="line">ntp                  38     /etc/ntp</span><br><span class="line">tss                  59     /dev/null</span><br><span class="line">usbmuxd              113    /</span><br><span class="line">pulse                171    /var/run/pulse</span><br><span class="line">setroubleshoot       993    /var/lib/setroubleshoot</span><br><span class="line">colord               992    /var/lib/colord</span><br><span class="line">abrt                 173    /etc/abrt</span><br><span class="line">geoclue              991    /var/lib/geoclue</span><br><span class="line">saned                990    /usr/share/sane</span><br><span class="line">sssd                 989    /</span><br><span class="line">rpcuser              29     /var/lib/nfs</span><br><span class="line">nfsnobody            65534  /var/lib/nfs</span><br><span class="line">gdm                  42     /var/lib/gdm</span><br><span class="line">gnome-initial-setup  988    /run/gnome-initial-setup/</span><br><span class="line">tcpdump              72     /</span><br><span class="line">avahi                70     /var/run/avahi-daemon</span><br><span class="line">mysql                27     /var/lib/mysql</span><br></pre></td></tr></table></figure>

<ul>
<li>在awk中可以通过-v选项调用shell中的变量</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># x=&quot;hello&quot;</span></span><br><span class="line">[root@localhost ~]<span class="comment"># awk &#x27;BEGIN&#123;print x&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># awk -v tmp=$x &#x27;BEGIN&#123;print tmp&#125;&#x27;</span></span><br><span class="line">hello</span><br></pre></td></tr></table></figure>

<ul>
<li>从&#x2F;etc&#x2F;passwd中将所有能登陆的账户名提取出来</li>
<li>从&#x2F;etc&#x2F;passwd中提取账户对应的密码</li>
</ul>
<blockquote>
<p>userpass.sh</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">USER=$(awk -F: <span class="string">&#x27;/bash$/&#123;print $1&#125;&#x27;</span> /etc/passwd)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$USER</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	awk -F: -v iuser=<span class="variable">$i</span> <span class="string">&#x27;$1==iuser&#123;print $1,$2&#125;&#x27;</span> /etc/shadow</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vim /root/shell/day05/userpass.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod +x /root/shell/day05/userpass.sh</span></span><br><span class="line">[root@localhost ~]<span class="comment"># /root/shell/day05/userpass.sh</span></span><br><span class="line">root $6$9jnegT8EQgdMA7DX<span class="variable">$m6s9mAS2GSgS0lFOND9f5BbQEAfToQFzWx9H</span>/fChmWBDp6JTkaqTFevPspIRkfo6id4tqBqplC6NrKPCzemZW.</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>峡谷杨爹
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://xiaguyangdie.github.io/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/" title="shell脚本语言">https://xiaguyangdie.github.io/2023/02/26/shell脚本语言/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/02/26/Redis/" rel="prev" title="Redis">
      <i class="fa fa-chevron-left"></i> Redis
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/02/26/visualstudio%E5%AE%89%E8%A3%85Qt%E6%8F%92%E4%BB%B6/" rel="next" title="visual studio安装Qt插件">
      visual studio安装Qt插件 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-shell%E7%AE%80%E4%BB%8B"><span class="nav-text">1.shell简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Bash%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="nav-text">1.1 Bash解释器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-ksh%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="nav-text">1.2 ksh解释器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-shell%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-text">1.3 shell执行命令的方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-shell%E8%84%9A%E6%9C%AC%E8%AE%BE%E8%AE%A1%E5%92%8C%E8%BF%90%E8%A1%8C"><span class="nav-text">2.shell脚本设计和运行</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E8%84%9A%E6%9C%AC%E8%AE%BE%E8%AE%A1"><span class="nav-text">2.1 脚本设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-%E4%BB%80%E4%B9%88%E6%98%AFshell%E8%84%9A%E6%9C%AC"><span class="nav-text">2.1.1 什么是shell脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-%E7%AC%AC%E4%B8%80%E4%B8%AAshell%E8%84%9A%E6%9C%AC"><span class="nav-text">2.1.2 第一个shell脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-%E8%A7%84%E8%8C%83%E8%84%9A%E6%9C%AC%E7%9A%84%E6%9E%84%E6%88%90"><span class="nav-text">2.1.3 规范脚本的构成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E8%84%9A%E6%9C%AC%E8%BF%90%E8%A1%8C"><span class="nav-text">2.2 脚本运行</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E5%8F%98%E9%87%8F"><span class="nav-text">3.变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-text">3.1 自定义变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E6%9F%A5%E7%9C%8B%E5%8F%98%E9%87%8F"><span class="nav-text">3.2 查看变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B"><span class="nav-text">3.3 变量类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E5%8F%98%E9%87%8F%E6%89%A9%E5%B1%95%E5%BA%94%E7%94%A8"><span class="nav-text">4.变量扩展应用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E5%BC%95%E5%8F%B7"><span class="nav-text">4.1 引号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-read%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%8F%96%E5%80%BC"><span class="nav-text">4.2 read标准输入取值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4"><span class="nav-text">4.3 变量的作用范围</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-shell%E4%B8%AD%E7%9A%84%E8%BF%90%E7%AE%97"><span class="nav-text">5.shell中的运算</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97"><span class="nav-text">5.1 整数运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E5%B0%8F%E6%95%B0%E8%BF%90%E7%AE%97"><span class="nav-text">4.2 小数运算</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="nav-text">6.综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E7%9B%91%E6%8E%A7%E8%84%9A%E6%9C%AC%E4%B9%8B%E6%98%BE%E7%A4%BA%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="nav-text">6.1 监控脚本之显示硬件信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-%E6%95%B0%E6%8D%AE%E8%AE%A1%E7%AE%97"><span class="nav-text">6.2 数据计算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AEYUM%E6%BA%90"><span class="nav-text">6.3 自动配置YUM源</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="nav-text">7.条件测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-test%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C"><span class="nav-text">7.1 test测试操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-%E6%8E%A7%E5%88%B6%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-text">7.2 控制操作符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-%E6%A1%88%E4%BE%8B%EF%BC%9A%E7%9B%91%E6%8E%A7%E8%84%9A%E6%9C%AC"><span class="nav-text">7.3 案例：监控脚本</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-if%E3%80%81for%E3%80%81while%E3%80%81case"><span class="nav-text">8.if、for、while、case</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-if"><span class="nav-text">8.1 if</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-1-if%E5%8D%95%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD"><span class="nav-text">8.1.1 if单分支判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-2-if%E5%8F%8C%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD"><span class="nav-text">8.1.2 if双分支判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-3-if%E5%A4%9A%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD"><span class="nav-text">8.1.3 if多分支判断</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-for"><span class="nav-text">8.2 for</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3-while"><span class="nav-text">8.3 while</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4-%E5%88%A4%E6%96%AD%E5%BE%AA%E7%8E%AF%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="nav-text">8.4 判断循环综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-1-%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2FTP%E6%9C%8D%E5%8A%A1"><span class="nav-text">8.4.1 一键部署FTP服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-2-%E7%9B%91%E6%8E%A7%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F"><span class="nav-text">8.4.2 监控网络流量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-3-%E7%BB%9F%E8%AE%A1%E9%97%B0%E5%B9%B4"><span class="nav-text">8.4.3 统计闰年</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-4-%E8%AE%A1%E7%AE%97%E7%AD%89%E5%B7%AE%E6%95%B0%E5%88%97%E4%B9%8B%E5%92%8C"><span class="nav-text">8.4.4 计算等差数列之和</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-case%E8%AF%AD%E5%8F%A5"><span class="nav-text">8.5 case语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-6-%E4%B8%AD%E6%96%AD%E4%B8%8E%E9%80%80%E5%87%BA"><span class="nav-text">8.6 中断与退出</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E6%95%B0%E7%BB%84"><span class="nav-text">9.数组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86%E5%92%8C%E5%8F%98%E9%87%8F%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">10.字符串处理和变量初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-text">10.1 字符串处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-1-%E5%AD%97%E4%B8%B2%E6%88%AA%E5%8F%96"><span class="nav-text">10.1.1 字串截取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-2-%E5%AD%97%E4%B8%B2%E6%9B%BF%E6%8D%A2"><span class="nav-text">10.1.2 字串替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-3-%E5%AD%97%E4%B8%B2%E6%8E%90%E5%A4%B4"><span class="nav-text">10.1.3 字串掐头</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-4-%E5%AD%97%E4%B8%B2%E5%8E%BB%E5%B0%BE"><span class="nav-text">10.1.4 字串去尾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-5-%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-text">10.1.5 应用案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-2-%E5%8F%98%E9%87%8F%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">10.2 变量初始化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-%E5%87%BD%E6%95%B0"><span class="nav-text">11.函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81"><span class="nav-text">12.随机密码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%811"><span class="nav-text">12.1 随机密码1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2-%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%812"><span class="nav-text">12.2 随机密码2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-3-%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%813"><span class="nav-text">12.3 随机密码3</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="nav-text">13.综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="nav-text">13.1 进度条</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2-%E8%8F%9C%E5%8D%95%E9%80%89%E6%8B%A9"><span class="nav-text">13.2 菜单选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3-fork%E7%82%B8%E5%BC%B9"><span class="nav-text">13.3 fork炸弹</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">14.正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#14-1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">14.1 什么是正则表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-2-%E5%9F%BA%E6%9C%AC%E6%AD%A3%E5%88%99%E7%AC%A6%E5%8F%B7"><span class="nav-text">14.2 基本正则符号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-3-%E6%89%A9%E5%B1%95%E6%AD%A3%E5%88%99%E7%AC%A6%E5%8F%B7"><span class="nav-text">14.3 扩展正则符号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-4-Perl%E5%85%BC%E5%AE%B9%E7%9A%84%E6%AD%A3%E5%88%99"><span class="nav-text">14.4 Perl兼容的正则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-5-grep%E8%AF%AD%E6%B3%95"><span class="nav-text">14.5 grep语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15-sed"><span class="nav-text">15.sed</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#15-1-%E4%BB%80%E4%B9%88%E6%98%AFsed"><span class="nav-text">15.1 什么是sed</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-2-%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="nav-text">15.2 语法格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-3-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%BD%8D"><span class="nav-text">15.3 数据定位</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#15-3-1-%E8%A1%8C%E5%8F%B7%E5%AE%9A%E4%BD%8D"><span class="nav-text">15.3.1 行号定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-3-2-%E6%AD%A3%E5%88%99%E5%AE%9A%E4%BD%8D"><span class="nav-text">15.3.2 正则定位</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-4-%E5%B8%B8%E7%94%A8sed%E6%8C%87%E4%BB%A4"><span class="nav-text">15.4 常用sed指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-5-%E6%96%87%E6%9C%AC%E5%9D%97%E6%8C%87%E4%BB%A4"><span class="nav-text">15.5 文本块指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#15-5-1-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="nav-text">15.5.1 常用指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-5-2-%E6%8F%92%E5%85%A5%E6%8C%87%E4%BB%A4"><span class="nav-text">15.5.2 插入指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-5-3-%E8%BF%BD%E5%8A%A0%E6%8C%87%E4%BB%A4"><span class="nav-text">15.5.3 追加指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-5-4-%E5%AF%BC%E5%85%A5%E6%8C%87%E4%BB%A4"><span class="nav-text">15.5.4 导入指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-5-5-%E5%AF%BC%E5%87%BA%E6%8C%87%E4%BB%A4"><span class="nav-text">15.5.5 导出指令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-6-%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="nav-text">15.6 综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#15-6-1-%E7%82%B9%E5%90%8D%E5%99%A8"><span class="nav-text">15.6.1 点名器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-6-2-%E6%8A%93%E5%8F%96%E6%9F%90%E4%B8%AA%E7%BD%91%E7%AB%99%E9%A6%96%E9%A1%B5%E7%9A%84%E6%89%80%E6%9C%89%E5%9B%BE%E7%89%87"><span class="nav-text">15.6.2 抓取某个网站首页的所有图片</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-7-%E6%80%BB%E7%BB%93"><span class="nav-text">15.7 总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-awk"><span class="nav-text">16.awk</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#16-1-%E6%A6%82%E8%BF%B0"><span class="nav-text">16.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-2-%E5%9F%BA%E6%9C%AC%E6%A1%88%E4%BE%8B"><span class="nav-text">16.2 基本案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-1-%E8%BF%87%E6%BB%A4%E5%86%85%E5%AD%98%E4%BF%A1%E6%81%AF"><span class="nav-text">16.2.1 过滤内存信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-2-%E8%BF%87%E6%BB%A4CPU%E4%BF%A1%E6%81%AF"><span class="nav-text">16.2.2 过滤CPU信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-3-%E8%BF%87%E6%BB%A4%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF"><span class="nav-text">16.2.3 过滤网卡信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-2-4-%E7%9B%91%E6%8E%A7%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3%E7%9A%84IP%E5%9C%B0%E5%9D%80"><span class="nav-text">16.2.4 监控暴力破解的IP地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-3-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-text">16.3 条件判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-4-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-text">16.4 流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-4-1-if%E5%88%A4%E6%96%AD"><span class="nav-text">16.4.1 if判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-4-2-for%E5%BE%AA%E7%8E%AF"><span class="nav-text">16.4.2 for循环</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-5-awk%E6%95%B0%E7%BB%84%E4%B8%8E%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-text">16.5 awk数组与应用案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-5-1-awk%E6%95%B0%E7%BB%84"><span class="nav-text">16.5.1 awk数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-5-2-%E7%BB%9F%E8%AE%A1web%E8%AE%BF%E9%97%AE%E6%97%A5%E5%BF%97"><span class="nav-text">16.5.2 统计web访问日志</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#16-6-awk%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="nav-text">16.6 awk综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-6-1-TCP%E8%BF%9E%E6%8E%A5%E7%8A%B6%E6%80%81"><span class="nav-text">16.6.1 TCP连接状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-6-2-ss%E5%91%BD%E4%BB%A4"><span class="nav-text">16.6.2 ss命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-6-3-%E8%BF%87%E6%BB%A4%E8%BF%9E%E6%8E%A5%E7%8A%B6%E6%80%81"><span class="nav-text">16.6.3 过滤连接状态</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17-%E6%A1%88%E4%BE%8B"><span class="nav-text">17.案例</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#17-1-%E5%BE%AA%E7%8E%AF%E5%B5%8C%E5%A5%97"><span class="nav-text">17.1 循环嵌套</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#17-1-1-%E6%89%93%E5%8D%B0%E6%98%9F%E6%98%9F%E7%9F%A9%E9%98%B5"><span class="nav-text">17.1.1 打印星星矩阵</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-1-2-%E6%8E%92%E5%88%97%E4%B8%8E%E7%BB%84%E5%90%88"><span class="nav-text">17.1.2 排列与组合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-1-3-%E6%89%93%E5%8D%B0%E5%BD%A2%E7%8A%B6"><span class="nav-text">17.1.3 打印形状</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-2-%E5%B8%A6%E8%8F%9C%E5%8D%95%E7%9A%84%E8%84%9A%E6%9C%AC"><span class="nav-text">17.2 带菜单的脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-3-%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE"><span class="nav-text">17.3 备份数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-1-%E5%A4%87%E4%BB%BD%E6%97%A5%E5%BF%97"><span class="nav-text">17.3.1 备份日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD"><span class="nav-text">17.3.2 数据库备份</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-3-%E5%B7%AE%E5%BC%82%E5%A4%87%E4%BB%BD"><span class="nav-text">17.3.3 差异备份</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-4-%E5%AE%89%E5%85%A8%E8%84%9A%E6%9C%AC"><span class="nav-text">17.4 安全脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#17-4-1-HASH%E5%80%BC"><span class="nav-text">17.4.1 HASH值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-4-2-%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E6%A3%80%E6%B5%8B%E8%84%9A%E6%9C%AC"><span class="nav-text">17.4.2 数据安全检测脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-4-3-SSH%E9%85%8D%E7%BD%AE"><span class="nav-text">17.4.3 SSH配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-5-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BApasswd"><span class="nav-text">17.5 格式化输出passwd</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="峡谷杨爹"
      src="/images/%E5%8D%9A%E5%AE%A2.webp">
  <p class="site-author-name" itemprop="name">峡谷杨爹</p>
  <div class="site-description" itemprop="description">write less, do more</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">149</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaguyangdie" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaguyangdie" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:424793597@qq.com" title="E-Mail → mailto:424793597@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	</div>
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=7450004106&auto=0&height=430"></iframe>  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">峡谷杨爹</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">2.9m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">44:16</span>
</div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"jc38mXtIY9GP4HNtOg9qT7Fo-gzGzoHsz","app_key":"yDHjFefMRYGX7YloQFcPnw78","server_url":null,"security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'jc38mXtIY9GP4HNtOg9qT7Fo-gzGzoHsz',
      appKey     : 'yDHjFefMRYGX7YloQFcPnw78',
      placeholder: "说说",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
