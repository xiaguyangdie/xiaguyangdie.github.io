<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xiaguyangdie.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis">
<meta property="og:url" content="https://xiaguyangdie.github.io/2023/02/26/Redis/index.html">
<meta property="og:site_name" content="峡谷杨爹的个人博客">
<meta property="og:description" content="Redis">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226213229795.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226213250417.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226213409271.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226213842666.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226214526248.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226214914260.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226214941412.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226220946624.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226221202650.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226221320459.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226221446090.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226222039681.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226222523813.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226223506541.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226223611850.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226223748602.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20250602130316686.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226224523096.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226224656703.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226233000841.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226233035525.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230528153639337.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20250608124611151.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226234825966.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226234855545.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20250615171054430.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20250615170953351.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227130137040.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20250615175305309.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227134524573.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227134641943.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227134703742.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227143920131.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227144625313.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227145155533.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227145504091.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230227150301419.png">
<meta property="article:published_time" content="2023-02-26T08:27:31.127Z">
<meta property="article:modified_time" content="2025-06-16T10:28:18.584Z">
<meta property="article:author" content="峡谷杨爹">
<meta property="article:tag" content="中间件">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xiaguyangdie.github.io/2023/02/26/Redis/image-20230226213229795.png">

<link rel="canonical" href="https://xiaguyangdie.github.io/2023/02/26/Redis/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Redis | 峡谷杨爹的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">峡谷杨爹的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习使我快乐，游戏使我疯狂</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    

  <a href="https://github.com/xiaguyangdie" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaguyangdie.github.io/2023/02/26/Redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%8D%9A%E5%AE%A2.webp">
      <meta itemprop="name" content="峡谷杨爹">
      <meta itemprop="description" content="write less, do more">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="峡谷杨爹的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Redis
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-26 16:27:31" itemprop="dateCreated datePublished" datetime="2023-02-26T16:27:31+08:00">2023-02-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-16 18:28:18" itemprop="dateModified" datetime="2025-06-16T18:28:18+08:00">2025-06-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
            </span>

          
            <span id="/2023/02/26/Redis/" class="post-meta-item leancloud_visitors" data-flag-title="Redis" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">评论次数：</span>
    
    <a title="valine" href="/2023/02/26/Redis/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/02/26/Redis/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>46k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>42 分钟</span>
            </span>
            <div class="post-description">Redis</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-NoSQL与SQL"><a href="#1-NoSQL与SQL" class="headerlink" title="1.NoSQL与SQL"></a>1.NoSQL与SQL</h1><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">SQL</th>
<th align="center">NoSQL</th>
</tr>
</thead>
<tbody><tr>
<td align="center">数据结构</td>
<td align="center">结构化</td>
<td align="center">非结构化：键值类型（Redis）、文档类型（MongoDB）、列类型（HBase）、Graph类型（Neo4j）</td>
</tr>
<tr>
<td align="center">数据关联</td>
<td align="center">关联的</td>
<td align="center">无关联的</td>
</tr>
<tr>
<td align="center">查询方式</td>
<td align="center">SQL查询</td>
<td align="center">非SQL</td>
</tr>
<tr>
<td align="center">事务特性</td>
<td align="center">ACID</td>
<td align="center">BASE</td>
</tr>
<tr>
<td align="center">存储方式</td>
<td align="center">磁盘</td>
<td align="center">内存</td>
</tr>
<tr>
<td align="center">扩展性</td>
<td align="center">垂直</td>
<td align="center">水平</td>
</tr>
<tr>
<td align="center">使用场景</td>
<td align="center">1）数据结构固定 2）相关业务对数据安全性、一致性要求较高</td>
<td align="center">1）数据结构不固定 2）对一致性、安全性要求不高 3）对性能要求</td>
</tr>
</tbody></table>
<ul>
<li>NoSQL仅仅是一个概念，泛指<strong>非关系型的数据库</strong></li>
<li>区别于关系数据库，它们不保证关系数据的ACID特性</li>
<li>常见的NoSQL数据库有：<code>Redis</code>、<code>MemCache</code>、<code>MongoDB</code>等</li>
</ul>
<h1 id="2-Redis简介"><a href="#2-Redis简介" class="headerlink" title="2.Redis简介"></a>2.Redis简介</h1><ul>
<li><p>Redis诞生于2009年，全称Remote Dictionary Server，<strong>远程词典服务器</strong>，是一个<strong>基于内存</strong>的<strong>键值型</strong>NoSQL数据库</p>
</li>
<li><p>特征：</p>
<ul>
<li>键值型（key-value）型，value支持多种不同的数据结构，功能丰富</li>
<li><strong>单线程</strong>，每个命令具备<strong>原子性</strong></li>
<li>低延迟，速度快（<strong>基于内存</strong>、IO多路复用、良好的编码）</li>
<li>支持数据持久化：提供 RDB（快照）和 AOF（日志）两种持久化方式</li>
<li>支持<strong>主从集群</strong>、<strong>分片集群</strong></li>
<li>支持多语言客户端</li>
</ul>
</li>
</ul>
<h1 id="3-Redis安装"><a href="#3-Redis安装" class="headerlink" title="3.Redis安装"></a>3.Redis安装</h1><h2 id="3-1-环境准备"><a href="#3-1-环境准备" class="headerlink" title="3.1 环境准备"></a>3.1 环境准备</h2><blockquote>
<p>本次安装Redis是基于Linux系统下安装的，因此需要一台Linux服务器或者虚拟机</p>
</blockquote>
<ul>
<li><strong>虚拟机</strong>：VMware17</li>
<li><strong>操作系统</strong>：CentOS-7-x86_64</li>
<li><strong>Redis</strong>：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1hsoEz1NTCDCCWZmaiZrIgg?pwd=1234">redis-6.2.6.tar</a></li>
<li><strong>xShell及xFtp</strong>：<a target="_blank" rel="noopener" href="https://www.xshell.com/zh/free-for-home-school/">https://www.xshell.com/zh/free-for-home-school/</a></li>
</ul>
<h2 id="3-2-安装Redis依赖"><a href="#3-2-安装Redis依赖" class="headerlink" title="3.2 安装Redis依赖"></a>3.2 安装Redis依赖</h2><blockquote>
<p>Redis是基于C语言编写的，因此首先需要安装Redis所需要的gcc依赖</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc tcl</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226213229795.png" alt="Redis/image-20230226213229795"></p>
<h2 id="3-3-正式安装Redis"><a href="#3-3-正式安装Redis" class="headerlink" title="3.3 正式安装Redis"></a>3.3 正式安装Redis</h2><ul>
<li><p><strong>将<code>redis-6.2.6.tar</code>上传至<code>/usr/local/src</code>目录</strong></p>
<p><img src="image-20230226213250417.png" alt="Redis/image-20230226213250417"></p>
</li>
<li><p><strong>在xShell中<code>cd</code>到<code>/usr/local/src</code>目录执行以下命令进行解压操作</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzf redis-6.2.6.tar.gz</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226213409271.png" alt="Redis/image-20230226213409271"></p>
</li>
<li><p><strong>解压成功后依次执行以下命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> redis-6.2.6</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>安装成功后打开&#x2F;usr&#x2F;local&#x2F;bin目录（该目录为Redis默认的安装目录）</strong></p>
<p><img src="image-20230226213842666.png" alt="Redis/image-20230226213842666"></p>
<ul>
<li><strong>该目录已经默认环境配置到环境变量</strong>，因此可以在任意目录下运行这些目录。其中：<ul>
<li>redis-cli：是redis提供的命令行客户端</li>
<li>redis-server：是redis的服务端启动脚本</li>
<li>redis-sentinel：是redis的哨兵启动脚本</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-4-启动Redis"><a href="#3-4-启动Redis" class="headerlink" title="3.4 启动Redis"></a>3.4 启动Redis</h2><blockquote>
<p>Redis的启动方式有很多种，例如：<strong>前台启动</strong>、<strong>后台启动</strong>、<strong>开机自启</strong></p>
</blockquote>
<h3 id="3-4-1-前台启动（不推荐）"><a href="#3-4-1-前台启动（不推荐）" class="headerlink" title="3.4.1 前台启动（不推荐）"></a>3.4.1 前台启动（不推荐）</h3><blockquote>
<p><strong>这种启动属于前台启动，会阻塞整个会话窗口，窗口关闭或者按下<code>CTRL + C</code>则Redis停止。不推荐使用。</strong></p>
</blockquote>
<ul>
<li><p><strong>安装完成后，在任意目录输入<code>redis-server</code>命令即可启动Redis</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="image-20230226214526248.png" alt="Redis/image-20230226214526248"></p>
<h3 id="3-4-2-后台启动（不推荐）"><a href="#3-4-2-后台启动（不推荐）" class="headerlink" title="3.4.2 后台启动（不推荐）"></a>3.4.2 后台启动（不推荐）</h3><blockquote>
<p><strong>如果要让Redis以后台方式启动，则必须修改Redis配置文件，配置文件所在目录就是之前我们解压的安装包下</strong></p>
</blockquote>
<ul>
<li><p><strong>因为我们要修改配置文件，因此我们需要先将原文件备份一份</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/src/redis-6.2.6</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> redis.conf redis.conf.bck</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226214914260.png" alt="Redis/image-20230226214914260"></p>
<p><img src="image-20230226214941412.png" alt="Redis/image-20230226214941412"></p>
</li>
<li><p><strong>然后修改<code>redis.conf</code>文件中的一些配置</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问，生产环境不要设置为0.0.0.0</span></span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0</span><br><span class="line"><span class="comment"># 守护进程，修改为yes后即可后台运行</span></span><br><span class="line">daemonize <span class="built_in">yes</span> </span><br><span class="line"><span class="comment"># 密码，设置后访问Redis必须输入密码</span></span><br><span class="line">requirepass 1325</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Redis其他常用配置</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听的端口</span></span><br><span class="line">port 6379</span><br><span class="line"><span class="comment"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span><br><span class="line"><span class="built_in">dir</span> .</span><br><span class="line"><span class="comment"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span><br><span class="line">databases 1</span><br><span class="line"><span class="comment"># 设置redis能够使用的最大内存</span></span><br><span class="line">maxmemory 512mb</span><br><span class="line"><span class="comment"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span><br><span class="line">logfile <span class="string">&quot;redis.log&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>启动Redis</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入redis安装目录 </span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/src/redis-6.2.6</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">redis-server redis.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>停止Redis服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过kill命令直接杀死进程</span></span><br><span class="line"><span class="built_in">kill</span> -9 redis进程<span class="built_in">id</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 利用redis-cli来执行 shutdown 命令，即可停止 Redis 服务，</span></span><br><span class="line"><span class="comment"># 因为之前配置了密码，因此需要通过 -a 来指定密码</span></span><br><span class="line">redis-cli -a 132537 shutdown</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="image-20230226220946624.png" alt="Redis/image-20230226220946624"></p>
<h3 id="3-4-3-开机自启（推荐）"><a href="#3-4-3-开机自启（推荐）" class="headerlink" title="3.4.3 开机自启（推荐）"></a>3.4.3 开机自启（推荐）</h3><blockquote>
<p><strong>也可以通过配置来实现开机自启</strong></p>
</blockquote>
<ul>
<li><p><strong>首先，新建一个系统服务文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>将以下命令粘贴进去</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=redis-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf</span><br><span class="line">PrivateTmp=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226221202650.png" alt="Redis/image-20230226221202650"></p>
</li>
<li><p><strong>然后重载系统服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>现在，可以用下面这组命令来操作redis了</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start redis</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">systemctl stop redis</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">systemctl restart redis</span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">systemctl status redis</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226221320459.png" alt="Redis/image-20230226221320459"></p>
</li>
<li><p><strong>执行下面的命令，可以让redis开机自启</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226221446090.png" alt="Redis/image-20230226221446090"></p>
</li>
</ul>
<h1 id="4-Redis客户端"><a href="#4-Redis客户端" class="headerlink" title="4.Redis客户端"></a>4.Redis客户端</h1><h2 id="4-1-Redis命令行客户端"><a href="#4-1-Redis命令行客户端" class="headerlink" title="4.1 Redis命令行客户端"></a>4.1 Redis命令行客户端</h2><ul>
<li><p><strong>Redis安装完成后就自带了命令行客户端：<code>redis-cli</code>，使用方式如下：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli [options] [commonds]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>其中常见的<code>options</code>有：</strong></p>
<ul>
<li><code>-h 127.0.0.1</code>：指定要连接的redis节点的IP地址，默认是127.0.0.1</li>
<li><code>-p 6379</code>：指定要连接的redis节点的端口，默认是6379</li>
<li><code>-a 132537</code>：指定redis的访问密码</li>
</ul>
</li>
<li><p><strong>其中的<code>commonds</code>就是Redis的操作命令，例如：</strong></p>
<ul>
<li><p><code>ping</code>：与redis服务端做心跳测试，服务端正常会返回<code>pong</code></p>
</li>
<li><p>不指定commond时，会进入<code>redis-cli</code>的交互控制台：</p>
<p><img src="image-20230226222039681.png" alt="Redis/image-20230226222039681"></p>
</li>
</ul>
</li>
</ul>
<h2 id="4-2-Redis图形化桌面客户端"><a href="#4-2-Redis图形化桌面客户端" class="headerlink" title="4.2 Redis图形化桌面客户端"></a>4.2 Redis图形化桌面客户端</h2><blockquote>
<p>下载地址：<a target="_blank" rel="noopener" href="https://github.com/lework/RedisDesktopManager-Windows/releases?q=2021.9&amp;expanded=true">https://github.com/lework/RedisDesktopManager-Windows/releases?q=2021.9&amp;expanded=true</a></p>
<p><img src="image-20230226222523813.png" alt="Redis/image-20230226222523813"></p>
</blockquote>
<ul>
<li><p><strong>安装图形化客户端</strong></p>
</li>
<li><p><strong>如何连接到Redis</strong></p>
<p><img src="image-20230226223506541.png" alt="Redis/image-20230226223506541"></p>
<p><img src="image-20230226223611850.png" alt="Redis/image-20230226223611850"></p>
<p><img src="image-20230226223748602.png" alt="Redis/image-20230226223748602"></p>
</li>
</ul>
<h1 id="5-Redis常见命令"><a href="#5-Redis常见命令" class="headerlink" title="5.Redis常见命令"></a>5.Redis常见命令</h1><p>官方文档：<a target="_blank" rel="noopener" href="https://redis.io/commands/">https://redis.io/commands/</a></p>
<h2 id="5-1-Redis数据结构介绍"><a href="#5-1-Redis数据结构介绍" class="headerlink" title="5.1 Redis数据结构介绍"></a>5.1 Redis数据结构介绍</h2><ul>
<li><strong>Redis是一个key-value的数据库，key一般是String类型，不过value的类型多种多样</strong></li>
<li>数据结构：<a target="_blank" rel="noopener" href="https://redis.io/docs/data-types/">https://redis.io/docs/data-types/</a></li>
</ul>
<h2 id="5-2-通用命令"><a href="#5-2-通用命令" class="headerlink" title="5.2 通用命令"></a>5.2 通用命令</h2><p><a target="_blank" rel="noopener" href="https://redis.io/docs/latest/commands/?group=generic">https://redis.io/docs/latest/commands/?group=generic</a></p>
<p><img src="image-20250602130316686.png" alt="image-20250602130316686"></p>
<blockquote>
<p><strong>通用指令是部分数据类型的，都可以使用的指令，常见的有如下表格所示</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AUTH</td>
<td align="center">认证密码</td>
</tr>
<tr>
<td align="center">SELECT</td>
<td align="center">选择 Redis 数据库（索引从 0 开始）</td>
</tr>
<tr>
<td align="center">KEYS</td>
<td align="center">查看符合模板的所有key，不建议在生产环境设备上使用</td>
</tr>
<tr>
<td align="center">EXISTS</td>
<td align="center">判断key是否存在</td>
</tr>
<tr>
<td align="center">TYPE</td>
<td align="center">获取键的数据类型</td>
</tr>
<tr>
<td align="center">RENAME</td>
<td align="center">将键名重命名为新键名，如果新键名已经存在，它将被覆盖</td>
</tr>
<tr>
<td align="center">RENAMENX</td>
<td align="center">如果新键名不存在，将键名重命名为新键名</td>
</tr>
<tr>
<td align="center">DEL</td>
<td align="center">删除一个指定的key</td>
</tr>
<tr>
<td align="center">DBSIZE</td>
<td align="center">返回当前数据库的键的数量</td>
</tr>
<tr>
<td align="center">FLUSHDB</td>
<td align="center">删除当前数据库的所有键</td>
</tr>
<tr>
<td align="center">FLUSHALL</td>
<td align="center">删除所有数据库的所有键</td>
</tr>
<tr>
<td align="center">COPY</td>
<td align="center">将一个键的值复制到一个新键</td>
</tr>
<tr>
<td align="center">EXPIRE</td>
<td align="center">给一个key设置有效期，有效期到期时该key会被自动删除，单位秒</td>
</tr>
<tr>
<td align="center">PEXPIRE</td>
<td align="center">给一个key设置有效期，有效期到期时该key会被自动删除，单位毫秒</td>
</tr>
<tr>
<td align="center">TTL</td>
<td align="center">查看一个KEY的剩余有效期，单位秒</td>
</tr>
<tr>
<td align="center">PTTL</td>
<td align="center">查看一个KEY的剩余有效期，单位毫秒</td>
</tr>
<tr>
<td align="center">EXPIREAT</td>
<td align="center">用于设置键的过期时间，UNIX时间戳（以秒为单位），当键的过期时间到达时，Redis会自动删除该键</td>
</tr>
<tr>
<td align="center">PEXPIREAT</td>
<td align="center">用于设置键的过期时间，UNIX时间戳（以毫秒为单位），当键的过期时间到达时，Redis会自动删除该键</td>
</tr>
<tr>
<td align="center"><strong>EXPIRETIME</strong></td>
<td align="center">返回键的过期时间，UNIX时间戳（以秒为单位）</td>
</tr>
<tr>
<td align="center"><strong>PEXPIRETIME</strong></td>
<td align="center">返回键的过期时间，UNIX时间戳（以毫秒为单位）</td>
</tr>
<tr>
<td align="center">PERSIST</td>
<td align="center">移除键的过期时间，使其变为持久化</td>
</tr>
<tr>
<td align="center">MOVE</td>
<td align="center">将一个键（key）从当前数据库（database）移动到另一个数据库（仅限同一 Redis 实例内迁移）</td>
</tr>
<tr>
<td align="center">MIGRATE</td>
<td align="center">将键从当前 Redis 实例‌<strong>原子性迁移</strong>‌到目标实例，支持单键或批量迁移，迁移成功后默认删除源键（可通过 <code>COPY</code> 保留）（自动完成序列化与迁移）<br>MIGRATE host port &lt;key | “”&gt; destination-db timeout [COPY] [REPLACE]   [AUTH password | AUTH2 username password] [KEYS key [key …]]</td>
</tr>
<tr>
<td align="center">DUMP</td>
<td align="center">将指定 key 的值序列化为二进制格式，包含 64 位校验和以确保数据完整性</td>
</tr>
<tr>
<td align="center">RESTORE</td>
<td align="center">将 <code>DUMP</code> 生成的序列化数据反序列化为原始值，并存储到指定 key（DUMP+RESTORE：支持跨实例迁移，但需手动处理序列化数据）</td>
</tr>
<tr>
<td align="center">RANDOMKEY</td>
<td align="center">从当前选定的数据库中返回一个随机key</td>
</tr>
<tr>
<td align="center">OBJECT ENCODING</td>
<td align="center">返回键值对象的内部编码格式</td>
</tr>
<tr>
<td align="center">OBJECT REFCOUNT</td>
<td align="center">返回键值对象的引用计数（主要用于共享对象调试）</td>
</tr>
<tr>
<td align="center">OBJECT IDLETIME</td>
<td align="center">返回键自上次访问后的空闲时间（秒级精度）</td>
</tr>
<tr>
<td align="center">OBJECT FREQ</td>
<td align="center">返回键的访问频率计数器（对数尺度，用于 LFU 淘汰策略）</td>
</tr>
<tr>
<td align="center">OBJECT HELP</td>
<td align="center">列出所有子命令的简要说明</td>
</tr>
<tr>
<td align="center">SCAN</td>
<td align="center">分批次遍历哈希槽（时间复杂度 O(1)），避免 KEYS * 的全局阻塞问题</td>
</tr>
<tr>
<td align="center">SORT</td>
<td align="center">用于对列表、集合、有序集合中的元素进行排序并返回结果（不影响原始数据顺序）</td>
</tr>
<tr>
<td align="center">SORT_RO</td>
<td align="center">是 <code>SORT</code> 命令的只读变体，语法与 <code>SORT</code> 完全相同，但‌<strong>不支持 STORE 选项</strong>‌（即不会写入新键）</td>
</tr>
<tr>
<td align="center">TOUCH</td>
<td align="center"><code>TOUCH</code> 用于 ‌<strong>更新指定键的最后访问时间</strong>‌，但不访问数据内容，主要用于维护键的过期机制或刷新访问状态</td>
</tr>
<tr>
<td align="center">UNLINK</td>
<td align="center">异步删除键（非阻塞，后台线程执行），适用于大键删除</td>
</tr>
<tr>
<td align="center">WAIT</td>
<td align="center">阻塞客户端，直到指定数量的副本节点完成数据同步(主从数据一致性)</td>
</tr>
<tr>
<td align="center">WAITAOF</td>
<td align="center">阻塞当前客户端，直到指定数量的 AOF 持久化操作完成(强一致性场景)</td>
</tr>
</tbody></table>
<p><strong>可以通过<code>help [command] </code>可以查看一个命令的具体用法！</strong></p>
<p><img src="image-20230226224523096.png" alt="Redis/image-20230226224523096"></p>
<p><img src="image-20230226224656703.png" alt="Redis/image-20230226224656703"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">192.168.198.148:6379&gt; help @generic</span><br><span class="line"></span><br><span class="line"> COPY source destination [DB destination-db] [REPLACE]</span><br><span class="line">  summary: Copies the value of a key to a new key.</span><br><span class="line">  since: 6.2.0</span><br><span class="line"></span><br><span class="line">  DEL key [key ...]</span><br><span class="line">  summary: Deletes one or more keys.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  DUMP key</span><br><span class="line">  summary: Returns a serialized representation of the value stored at a key.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  EXISTS key [key ...]</span><br><span class="line">  summary: Determines whether one or more keys exist.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  EXPIRE key seconds [NX|XX|GT|LT]</span><br><span class="line">  summary: Sets the expiration time of a key in seconds.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  EXPIREAT key unix-time-seconds [NX|XX|GT|LT]</span><br><span class="line">  summary: Sets the expiration time of a key to a Unix timestamp.</span><br><span class="line">  since: 1.2.0</span><br><span class="line"></span><br><span class="line">  EXPIRETIME key</span><br><span class="line">  summary: Returns the expiration time of a key as a Unix timestamp.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  KEYS pattern</span><br><span class="line">  summary: Returns all key names that match a pattern.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  MIGRATE host port key|&quot;&quot; destination-db timeout [COPY] [REPLACE] [AUTH password|AUTH2 username password] [KEYS key [key ...]]</span><br><span class="line">  summary: Atomically transfers a key from one Redis instance to another.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  MOVE key db</span><br><span class="line">  summary: Moves a key to another database.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  OBJECT (null)</span><br><span class="line">  summary: A container for object introspection commands.</span><br><span class="line">  since: 2.2.3</span><br><span class="line"></span><br><span class="line">  OBJECT ENCODING key</span><br><span class="line">  summary: Returns the internal encoding of a Redis object.</span><br><span class="line">  since: 2.2.3</span><br><span class="line"></span><br><span class="line">  OBJECT FREQ key</span><br><span class="line">  summary: Returns the logarithmic access frequency counter of a Redis object.</span><br><span class="line">  since: 4.0.0</span><br><span class="line"></span><br><span class="line">  OBJECT HELP (null)</span><br><span class="line">  summary: Returns helpful text about the different subcommands.</span><br><span class="line">  since: 6.2.0</span><br><span class="line"></span><br><span class="line">  OBJECT IDLETIME key</span><br><span class="line">  summary: Returns the time since the last access to a Redis object.</span><br><span class="line">  since: 2.2.3</span><br><span class="line"></span><br><span class="line">  OBJECT REFCOUNT key</span><br><span class="line">  summary: Returns the reference count of a value of a key.</span><br><span class="line">  since: 2.2.3</span><br><span class="line"></span><br><span class="line">  PERSIST key</span><br><span class="line">  summary: Removes the expiration time of a key.</span><br><span class="line">  since: 2.2.0</span><br><span class="line"></span><br><span class="line">  PEXPIRE key milliseconds [NX|XX|GT|LT]</span><br><span class="line">  summary: Sets the expiration time of a key in milliseconds.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  PEXPIREAT key unix-time-milliseconds [NX|XX|GT|LT]</span><br><span class="line">  summary: Sets the expiration time of a key to a Unix milliseconds timestamp.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  PEXPIRETIME key</span><br><span class="line">  summary: Returns the expiration time of a key as a Unix milliseconds timestamp.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  PTTL key</span><br><span class="line">  summary: Returns the expiration time in milliseconds of a key.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  RANDOMKEY (null)</span><br><span class="line">  summary: Returns a random key name from the database.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  RENAME key newkey</span><br><span class="line">  summary: Renames a key and overwrites the destination.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  RENAMENX key newkey</span><br><span class="line">  summary: Renames a key only when the target key name doesn&#x27;t exist.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  RESTORE key ttl serialized-value [REPLACE] [ABSTTL] [IDLETIME seconds] [FREQ frequency]</span><br><span class="line">  summary: Creates a key from the serialized representation of a value.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  SCAN cursor [MATCH pattern] [COUNT count] [TYPE type]</span><br><span class="line">  summary: Iterates over the key names in the database.</span><br><span class="line">  since: 2.8.0</span><br><span class="line"></span><br><span class="line">  SORT key [BY pattern] [LIMIT offset count] [GET pattern [GET pattern ...]] [ASC|DESC] [ALPHA] [STORE destination]</span><br><span class="line">  summary: Sorts the elements in a list, a set, or a sorted set, optionally storing the result.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  SORT_RO key [BY pattern] [LIMIT offset count] [GET pattern [GET pattern ...]] [ASC|DESC] [ALPHA]</span><br><span class="line">  summary: Returns the sorted elements of a list, a set, or a sorted set.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  TOUCH key [key ...]</span><br><span class="line">  summary: Returns the number of existing keys out of those specified after updating the time they were last accessed.</span><br><span class="line">  since: 3.2.1</span><br><span class="line"></span><br><span class="line">  TTL key</span><br><span class="line">  summary: Returns the expiration time in seconds of a key.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  TYPE key</span><br><span class="line">  summary: Determines the type of value stored at a key.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  UNLINK key [key ...]</span><br><span class="line">  summary: Asynchronously deletes one or more keys.</span><br><span class="line">  since: 4.0.0</span><br><span class="line"></span><br><span class="line">  WAIT numreplicas timeout</span><br><span class="line">  summary: Blocks until the asynchronous replication of all preceding write commands sent by the connection is completed.</span><br><span class="line">  since: 3.0.0</span><br><span class="line"></span><br><span class="line">  WAITAOF numlocal numreplicas timeout</span><br><span class="line">  summary: Blocks until all of the preceding write commands sent by the connection are written to the append-only file of the master and/or replicas.</span><br><span class="line">  since: 7.2.0</span><br></pre></td></tr></table></figure>

<h2 id="5-3-String类型"><a href="#5-3-String类型" class="headerlink" title="5.3 String类型"></a>5.3 String类型</h2><blockquote>
<p><strong>String类型，也就是字符串类型，是Redis中最简单的存储类型</strong></p>
</blockquote>
<ul>
<li><strong>value</strong>是字符串，不过根据字符串的格式不同，又可以分为3类：<ul>
<li><code>string</code>：普通字符串</li>
<li><code>int</code>：整数类型，可以做自增、自减操作</li>
<li><code>float</code>：浮点类型，可以做自增、自减操作</li>
</ul>
</li>
</ul>
<blockquote>
<p>不管是哪种格式，底层都是字节数组形式存储，只不过是编码方式不同。字符串类型的最大空间不能超过<strong>512m</strong>.</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">KEY</th>
<th align="center">VALUE</th>
</tr>
</thead>
<tbody><tr>
<td align="center">msg</td>
<td align="center">hello world</td>
</tr>
<tr>
<td align="center">num</td>
<td align="center">10</td>
</tr>
<tr>
<td align="center">score</td>
<td align="center">92.5</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>String的常见命令有如下表格所示</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">APPEND</td>
<td align="center">若键存在且值为字符串类型，则将新值追加到原有字符串末尾；若键不存在，则创建新键并将值设为追加内容（等效于 SET key value）<br>‌支持追加二进制数据（如图片&#x2F;音频文件头）<br>返回追加操作后字符串的总长度（单位：字节）</td>
</tr>
<tr>
<td align="center">DECR</td>
<td align="center">将键（key）存储的整数值地减 1‌<br>若键不存在，则先将其值初始化为 <code>0</code>，再执行减 1 操作（结果为 <code>-1</code>）<br>若键值非整数类型（如字符串、浮点数），将返回错误<br>值必须在 64 位有符号整数范围内（<code>-2^63</code> 至 <code>2^63-1</code>），否则报错</td>
</tr>
<tr>
<td align="center">DECRBY</td>
<td align="center">将键（key）存储的整数值减去指定数值<br>若键不存在，则先将其值初始化为 <code>0</code>，再执行减法操作<br>若键值非整数类型（如字符串、浮点数），将返回错误<br><strong>支持负数减量</strong>‌：若 <code>decrement</code> 为负数，则等效于 <code>INCRBY</code>（数值增加）</td>
</tr>
<tr>
<td align="center">GET</td>
<td align="center">根据key获取String类型的value</td>
</tr>
<tr>
<td align="center">GETDEL</td>
<td align="center">获取并删除指定键（key）的字符串值‌<br>若键存在且值为字符串类型，则返回其值并删除键</td>
</tr>
<tr>
<td align="center">GETEX</td>
<td align="center">获取字符串键的值并可选地修改其过期时间</td>
</tr>
<tr>
<td align="center">GETRANGE</td>
<td align="center">获取字符串值中指定范围内的子字符串</td>
</tr>
<tr>
<td align="center">GETSET</td>
<td align="center">设置新值并返回旧值，适用于需获取原值后更新的场景</td>
</tr>
<tr>
<td align="center">INCR</td>
<td align="center">让一个整型的key自增1</td>
</tr>
<tr>
<td align="center">INCRBY</td>
<td align="center">让一个整型的key自增并指定步长，例如：incrby num 2 让num值自增2</td>
</tr>
<tr>
<td align="center">INCRBYFLOAT</td>
<td align="center">对字符串键存储的数字值执行‌<strong>浮点数加法操作</strong>‌<br>若键不存在，则先将其值初始化为 <code>0</code>，再执行加法操作</td>
</tr>
<tr>
<td align="center">LCS</td>
<td align="center">计算‌两个字符串最长公共子序列</td>
</tr>
<tr>
<td align="center">MGET</td>
<td align="center">批量获取多个键的值</td>
</tr>
<tr>
<td align="center">MSET</td>
<td align="center">批量添加多个String类型的键值对</td>
</tr>
<tr>
<td align="center">MSETNX</td>
<td align="center">设置多个键值对，但仅当所有键均不存在时生效</td>
</tr>
<tr>
<td align="center">PSETEX</td>
<td align="center">以毫秒为单位设置键值对并指定生存时间（TTL）</td>
</tr>
<tr>
<td align="center">SET</td>
<td align="center">添加或者修改已经存在的一个key的值</td>
</tr>
<tr>
<td align="center">SETEX</td>
<td align="center">以秒为单位设置键值对并指定生存时间（TTL）</td>
</tr>
<tr>
<td align="center">SETNX</td>
<td align="center">仅在键不存在时设置值</td>
</tr>
<tr>
<td align="center">SETRANGE</td>
<td align="center">从指定偏移量（offset）开始覆写字符串键的值</td>
</tr>
<tr>
<td align="center">STRLEN</td>
<td align="center">获取字符串键值的字节长度</td>
</tr>
<tr>
<td align="center">SUBSTR</td>
<td align="center">根据指定的起始和结束位置索引返回子串内容（包含两端索引对应的字符）</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">192.168.198.148:6379&gt; <span class="built_in">help</span> @string</span><br><span class="line"></span><br><span class="line">  APPEND key value</span><br><span class="line">  summary: Appends a string to the value of a key. Creates the key <span class="keyword">if</span> it doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  DECR key</span></span><br><span class="line"><span class="string">  summary: Decrements the integer value of a key by one. Uses 0 as initial value if the key doesn&#x27;</span>t exist.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  DECRBY key decrement</span><br><span class="line">  summary: Decrements a number from the <span class="built_in">integer</span> value of a key. Uses 0 as initial value <span class="keyword">if</span> the key doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  GET key</span></span><br><span class="line"><span class="string">  summary: Returns the string value of a key.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  GETDEL key</span></span><br><span class="line"><span class="string">  summary: Returns the string value of a key after deleting the key.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  GETEX key [EX seconds|PX milliseconds|EXAT unix-time-seconds|PXAT unix-time-milliseconds|PERSIST]</span></span><br><span class="line"><span class="string">  summary: Returns the string value of a key after setting its expiration time.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  GETRANGE key start end</span></span><br><span class="line"><span class="string">  summary: Returns a substring of the string stored at a key.</span></span><br><span class="line"><span class="string">  since: 2.4.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  GETSET key value</span></span><br><span class="line"><span class="string">  summary: Returns the previous string value of a key after setting it to a new value.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  INCR key</span></span><br><span class="line"><span class="string">  summary: Increments the integer value of a key by one. Uses 0 as initial value if the key doesn&#x27;</span>t exist.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  INCRBY key increment</span><br><span class="line">  summary: Increments the <span class="built_in">integer</span> value of a key by a number. Uses 0 as initial value <span class="keyword">if</span> the key doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  INCRBYFLOAT key increment</span></span><br><span class="line"><span class="string">  summary: Increment the floating point value of a key by a number. Uses 0 as initial value if the key doesn&#x27;</span>t exist.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  LCS key1 key2 [LEN] [IDX] [MINMATCHLEN min-match-len] [WITHMATCHLEN]</span><br><span class="line">  summary: Finds the longest common substring.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  MGET key [key ...]</span><br><span class="line">  summary: Atomically returns the string values of one or more keys.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  MSET key value [key value ...]</span><br><span class="line">  summary: Atomically creates or modifies the string values of one or more keys.</span><br><span class="line">  since: 1.0.1</span><br><span class="line"></span><br><span class="line">  MSETNX key value [key value ...]</span><br><span class="line">  summary: Atomically modifies the string values of one or more keys only when all keys don<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  PSETEX key milliseconds value</span></span><br><span class="line"><span class="string">  summary: Sets both string value and expiration time in milliseconds of a key. The key is created if it doesn&#x27;</span>t exist.</span><br><span class="line">  since: 2.6.0</span><br><span class="line"></span><br><span class="line">  SET key value [NX|XX] [GET] [EX seconds|PX milliseconds|EXAT unix-time-seconds|PXAT unix-time-milliseconds|KEEPTTL]</span><br><span class="line">  summary: Sets the string value of a key, ignoring its <span class="built_in">type</span>. The key is created <span class="keyword">if</span> it doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SETEX key seconds value</span></span><br><span class="line"><span class="string">  summary: Sets the string value and expiration time of a key. Creates the key if it doesn&#x27;</span>t exist.</span><br><span class="line">  since: 2.0.0</span><br><span class="line"></span><br><span class="line">  SETNX key value</span><br><span class="line">  summary: Set the string value of a key only when the key doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SETRANGE key offset value</span></span><br><span class="line"><span class="string">  summary: Overwrites a part of a string value with another by an offset. Creates the key if it doesn&#x27;</span>t exist.</span><br><span class="line">  since: 2.2.0</span><br><span class="line"></span><br><span class="line">  STRLEN key</span><br><span class="line">  summary: Returns the length of a string value.</span><br><span class="line">  since: 2.2.0</span><br><span class="line"></span><br><span class="line">  SUBSTR key start end</span><br><span class="line">  summary: Returns a substring from a string value.</span><br><span class="line">  since: 1.0.0</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Redis的key允许有多个单词形成层级结构，多个单词之间用” ：“隔开，格式如下：</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">项目名:业务名:类型:id</span><br></pre></td></tr></table></figure>

<ul>
<li><p>这个格式并非固定，也可以根据自己的需求来删除或添加词条</p>
</li>
<li><p>例如项目名称叫 <code>heima</code>，有<code>user</code>和<code>product</code>两种不同类型的数据，可以这样定义key：</p>
<ul>
<li><strong>user</strong>相关的key：<code>heima:user:1</code></li>
<li><strong>product</strong>相关的key：<code>heima:product:1</code></li>
</ul>
</li>
<li><p>如果Value是一个Java对象，例如一个User对象，则可以将对象序列化为JSON字符串后存储</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">KEY</th>
<th align="center">VALUE</th>
</tr>
</thead>
<tbody><tr>
<td align="center">heima:user:1</td>
<td align="center">{“id”:1, “name”: “yty”, “age”: 18}</td>
</tr>
<tr>
<td align="center">heima:product:1</td>
<td align="center">{“id”:1, “name”: “小米11”, “price”: 4999}</td>
</tr>
</tbody></table>
<p><img src="image-20230226233000841.png" alt="Redis/image-20230226233000841"></p>
<p><img src="image-20230226233035525.png" alt="Redis/image-20230226233035525"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> baidumap:user:1 <span class="string">&#x27;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;yangtongyu&quot;,&quot;age&quot;:18&#125;&#x27;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> baidumap:location:1 <span class="string">&#x27;&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;zjsdx&quot;,&quot;distance&quot;:&quot;700km&quot;&#125;&#x27;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> baidumap:user:2 <span class="string">&#x27;&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;yangtongyu2&quot;,&quot;age&quot;:25&#125;&#x27;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> baidumap:location:2 <span class="string">&#x27;&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;jssq&quot;,&quot;distance&quot;:&quot;50km&quot;&#125;&#x27;</span></span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line"> 1) <span class="string">&quot;baidumap:location:1&quot;</span></span><br><span class="line"> 2) <span class="string">&quot;k2&quot;</span></span><br><span class="line"> 3) <span class="string">&quot;k3&quot;</span></span><br><span class="line"> 4) <span class="string">&quot;num&quot;</span></span><br><span class="line"> 5) <span class="string">&quot;baidumap:user:2&quot;</span></span><br><span class="line"> 6) <span class="string">&quot;m2&quot;</span></span><br><span class="line"> 7) <span class="string">&quot;k1&quot;</span></span><br><span class="line"> 8) <span class="string">&quot;name&quot;</span></span><br><span class="line"> 9) <span class="string">&quot;num1&quot;</span></span><br><span class="line">10) <span class="string">&quot;age&quot;</span></span><br><span class="line">11) <span class="string">&quot;baidumap:location:2&quot;</span></span><br><span class="line">12) <span class="string">&quot;m1&quot;</span></span><br><span class="line">13) <span class="string">&quot;baidumap:user:1&quot;</span></span><br><span class="line">14) <span class="string">&quot;address&quot;</span></span><br><span class="line">15) <span class="string">&quot;iphone&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>

<p><img src="image-20230528153639337.png" alt="Redis/image-20230528153639337"></p>
<h2 id="5-4-Hash类型"><a href="#5-4-Hash类型" class="headerlink" title="5.4 Hash类型"></a>5.4 Hash类型</h2><ul>
<li><p>Hash类型，也叫散列，其value是一个无序字典，类似于Java中的<code>HashMap</code>结构</p>
</li>
<li><p>Hash结构可以将对象中的每个字段独立存储，可以针对单个字段做CRUD</p>
<p><img src="image-20250608124611151.png" alt="image-20250608124611151"></p>
</li>
<li><p><strong>Hash的常见命令有：</strong></p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">HDEL</td>
<td align="center">删除key中一个或多个field字段，若字段不存在则忽略</td>
</tr>
<tr>
<td align="center">HEXISTS</td>
<td align="center">检查key中指定字段是否存在‌。若字段存在则返回 1；若字段不存在或key不存在，则返回 0</td>
</tr>
<tr>
<td align="center">HEXPIRE</td>
<td align="center">为key中的指定字段设置过期时间（以秒为单位），到期后字段自动删除</td>
</tr>
<tr>
<td align="center">HEXPIREAT</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">HEXPIRETIME</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">HGET</td>
<td align="center">获取一个hash类型key的field的值</td>
</tr>
<tr>
<td align="center">HGETALL</td>
<td align="center">获取一个hash类型的key中的所有的field和value</td>
</tr>
<tr>
<td align="center">HGETDEL</td>
<td align="center">获取并删除key中指定字段的值‌。若字段存在，则返回其值并删除字段；若字段或键不存在，返回null</td>
</tr>
<tr>
<td align="center">HGETEX</td>
<td align="center">获取key中的指定字段值并同时设置过期时间</td>
</tr>
<tr>
<td align="center">HINCRBY</td>
<td align="center">让一个hash类型key的字段值自增并指定步长</td>
</tr>
<tr>
<td align="center">HINCRBYFLOAT</td>
<td align="center">让一个hash类型key的字段值自增并指定步长，浮点数</td>
</tr>
<tr>
<td align="center">HKEYS</td>
<td align="center">获取一个hash类型的key中的所有的field</td>
</tr>
<tr>
<td align="center">HLEN</td>
<td align="center">获取一个hash类型的key中的field数量</td>
</tr>
<tr>
<td align="center">HMSET</td>
<td align="center">hmset 和 hset 效果相同 ，4.0之后hmset可以弃用了</td>
</tr>
<tr>
<td align="center">HMGET</td>
<td align="center">批量获取多个hash类型key的field的值</td>
</tr>
<tr>
<td align="center">HPERSIST</td>
<td align="center">移除key中指定字段的过期时间</td>
</tr>
<tr>
<td align="center">HPEXPIRE</td>
<td align="center">为key中的指定字段设置过期时间（以毫秒为单位），到期后字段自动删除</td>
</tr>
<tr>
<td align="center">HPEXPIREAT</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">HPEXPIRETIME</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">HPTTL</td>
<td align="center">获取key中指定字段的过期时间，单位：毫秒</td>
</tr>
<tr>
<td align="center">HRANDFIELD</td>
<td align="center">随机返回key中指定数量的字段</td>
</tr>
<tr>
<td align="center">HSCAN</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">HSET</td>
<td align="center">添加或者修改key的field的值，支持单字段或多字段操作</td>
</tr>
<tr>
<td align="center">HSETEX</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">HSETNX</td>
<td align="center">添加一个hash类型的key的field值，前提是这个field不存在，否则不执行</td>
</tr>
<tr>
<td align="center">HSTRLEN</td>
<td align="center">获取key中指定字段（field）对应值的‌<strong>字符串字节长度</strong>‌</td>
</tr>
<tr>
<td align="center">HTTL</td>
<td align="center">获取key中指定字段的过期时间，单位：秒</td>
</tr>
<tr>
<td align="center">HVALS</td>
<td align="center">获取一个hash类型的key中的所有的value</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">HDEL key field [field ...]</span><br><span class="line"> summary: Deletes one or more fields and their values from a <span class="built_in">hash</span>. Deletes the <span class="built_in">hash</span> <span class="keyword">if</span> no fields remain.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HEXISTS key field</span><br><span class="line"> summary: Determines whether a field exists <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HEXPIRE key seconds [NX|XX|GT|LT] FIELDS numfields field [field ...]</span><br><span class="line"> summary: Set expiry <span class="keyword">for</span> <span class="built_in">hash</span> field using relative time to expire (seconds)</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HEXPIREAT key unix-time-seconds [NX|XX|GT|LT] FIELDS numfields field [field ...]</span><br><span class="line"> summary: Set expiry <span class="keyword">for</span> <span class="built_in">hash</span> field using an absolute Unix timestamp (seconds)</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HEXPIRETIME key FIELDS numfields field [field ...]</span><br><span class="line"> summary: Returns the expiration time of a <span class="built_in">hash</span> field as a Unix timestamp, <span class="keyword">in</span> seconds.</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HGET key field</span><br><span class="line"> summary: Returns the value of a field <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HGETALL key</span><br><span class="line"> summary: Returns all fields and values <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HGETDEL key FIELDS numfields field [field ...]</span><br><span class="line"> summary: Returns the value of a field and deletes it from the <span class="built_in">hash</span>.</span><br><span class="line"> since: 8.0.0</span><br><span class="line">  </span><br><span class="line"> HGETEX key [EX seconds|PX milliseconds|EXAT unix-time-seconds|PXAT unix-time-milliseconds|PERSIST] FIELDS numfields field [field ...]</span><br><span class="line"> summary: Get the value of one or more fields of a given <span class="built_in">hash</span> key, and optionally <span class="built_in">set</span> their expiration.</span><br><span class="line"> since: 8.0.0</span><br><span class="line">  </span><br><span class="line"> HINCRBY key field increment</span><br><span class="line"> summary: Increments the <span class="built_in">integer</span> value of a field <span class="keyword">in</span> a <span class="built_in">hash</span> by a number. Uses 0 as initial value <span class="keyword">if</span> the field doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string"> since: 2.0.0</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string"> HINCRBYFLOAT key field increment</span></span><br><span class="line"><span class="string"> summary: Increments the floating point value of a field by a number. Uses 0 as initial value if the field doesn&#x27;</span>t exist.</span><br><span class="line"> since: 2.6.0</span><br><span class="line">  </span><br><span class="line"> HKEYS key</span><br><span class="line"> summary: Returns all fields <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HLEN key</span><br><span class="line"> summary: Returns the number of fields <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HMGET key field [field ...]</span><br><span class="line"> summary: Returns the values of all fields <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HMSET key field value [field value ...]</span><br><span class="line"> summary: Sets the values of multiple fields.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HPERSIST key FIELDS numfields field [field ...]</span><br><span class="line"> summary: Removes the expiration time <span class="keyword">for</span> each specified field</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HPEXPIRE key milliseconds [NX|XX|GT|LT] FIELDS numfields field [field ...]</span><br><span class="line"> summary: Set expiry <span class="keyword">for</span> <span class="built_in">hash</span> field using relative time to expire (milliseconds)</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HPEXPIREAT key unix-time-milliseconds [NX|XX|GT|LT] FIELDS numfields field [field ...]</span><br><span class="line"> summary: Set expiry <span class="keyword">for</span> <span class="built_in">hash</span> field using an absolute Unix timestamp (milliseconds)</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HPEXPIRETIME key FIELDS numfields field [field ...]</span><br><span class="line"> summary: Returns the expiration time of a <span class="built_in">hash</span> field as a Unix timestamp, <span class="keyword">in</span> msec.</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HPTTL key FIELDS numfields field [field ...]</span><br><span class="line"> summary: Returns the TTL <span class="keyword">in</span> milliseconds of a <span class="built_in">hash</span> field.</span><br><span class="line"> since: 7.4.0</span><br><span class="line">  </span><br><span class="line"> HRANDFIELD key [count [WITHVALUES]]</span><br><span class="line"> summary: Returns one or more random fields from a <span class="built_in">hash</span>.</span><br><span class="line"> since: 6.2.0</span><br><span class="line">  </span><br><span class="line"> HSCAN key cursor [MATCH pattern] [COUNT count] [NOVALUES]</span><br><span class="line"> summary: Iterates over fields and values of a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.8.0</span><br><span class="line">  </span><br><span class="line"> HSET key field value [field value ...]</span><br><span class="line"> summary: Creates or modifies the value of a field <span class="keyword">in</span> a <span class="built_in">hash</span>.</span><br><span class="line"> since: 2.0.0</span><br><span class="line">  </span><br><span class="line"> HSETEX key [FNX|FXX] [EX seconds|PX milliseconds|EXAT unix-time-seconds|PXAT unix-time-milliseconds|KEEPTTL] FIELDS numfields field value [field value ...]</span><br><span class="line"> summary: Set the value of one or more fields of a given <span class="built_in">hash</span> key, and optionally <span class="built_in">set</span> their expiration.</span><br><span class="line"> since: 8.0.0</span><br><span class="line">  </span><br><span class="line"> HSETNX key field value</span><br><span class="line"> summary: Sets the value of a field <span class="keyword">in</span> a <span class="built_in">hash</span> only when the field doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string"> since: 2.0.0</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string"> HSTRLEN key field</span></span><br><span class="line"><span class="string"> summary: Returns the length of the value of a field.</span></span><br><span class="line"><span class="string"> since: 3.2.0</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string"> HTTL key FIELDS numfields field [field ...]</span></span><br><span class="line"><span class="string"> summary: Returns the TTL in seconds of a hash field.</span></span><br><span class="line"><span class="string"> since: 7.4.0</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string"> HVALS key</span></span><br><span class="line"><span class="string"> summary: Returns all values in a hash.</span></span><br><span class="line"><span class="string"> since: 2.0.0</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; hset baidumap:user:1 name yangtong age 19</span><br><span class="line">(error) WRONGTYPE Operation against a key holding the wrong kind of value</span><br><span class="line">127.0.0.1:6379&gt; hset baidumap:user:3 name yangtong age 19</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; hset baidumap:user:4 name yangtong2 age 24</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; hset baidumap:location:3 name zjgsdx distance 700km</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; hset baidumap:location:4 name sq distance 100km</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line"> 1) <span class="string">&quot;baidumap:location:1&quot;</span></span><br><span class="line"> 2) <span class="string">&quot;k3&quot;</span></span><br><span class="line"> 3) <span class="string">&quot;k2&quot;</span></span><br><span class="line"> 4) <span class="string">&quot;baidumap:user:2&quot;</span></span><br><span class="line"> 5) <span class="string">&quot;k1&quot;</span></span><br><span class="line"> 6) <span class="string">&quot;age&quot;</span></span><br><span class="line"> 7) <span class="string">&quot;num&quot;</span></span><br><span class="line"> 8) <span class="string">&quot;m2&quot;</span></span><br><span class="line"> 9) <span class="string">&quot;name&quot;</span></span><br><span class="line">10) <span class="string">&quot;baidumap:location:3&quot;</span></span><br><span class="line">11) <span class="string">&quot;num1&quot;</span></span><br><span class="line">12) <span class="string">&quot;baidumap:location:2&quot;</span></span><br><span class="line">13) <span class="string">&quot;baidumap:user:3&quot;</span></span><br><span class="line">14) <span class="string">&quot;baidumap:user:4&quot;</span></span><br><span class="line">15) <span class="string">&quot;m1&quot;</span></span><br><span class="line">16) <span class="string">&quot;baidumap:location:4&quot;</span></span><br><span class="line">17) <span class="string">&quot;iphone&quot;</span></span><br><span class="line">18) <span class="string">&quot;address&quot;</span></span><br><span class="line">19) <span class="string">&quot;baidumap:user:1&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; hget baidumap:user:3 age</span><br><span class="line"><span class="string">&quot;19&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; hkeys baidumap:user:4</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;age&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; hvals baidumap:user:4</span><br><span class="line">1) <span class="string">&quot;yangtong2&quot;</span></span><br><span class="line">2) <span class="string">&quot;24&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; hsetnx user:1 address zjgsdx</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; hsetnx user:1 address zjgsdx</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; hgetall baidumap:user</span><br><span class="line">(empty array)</span><br><span class="line">127.0.0.1:6379&gt; hgetall baidumap:user:4</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;yangtong2&quot;</span></span><br><span class="line">3) <span class="string">&quot;age&quot;</span></span><br><span class="line">4) <span class="string">&quot;24&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; hincrby baidumap:user:4 age 2</span><br><span class="line">(<span class="built_in">integer</span>) 26</span><br><span class="line">127.0.0.1:6379&gt; hgetall baidumap:user:4</span><br><span class="line">1) <span class="string">&quot;name&quot;</span></span><br><span class="line">2) <span class="string">&quot;yangtong2&quot;</span></span><br><span class="line">3) <span class="string">&quot;age&quot;</span></span><br><span class="line">4) <span class="string">&quot;26&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-5-List类型"><a href="#5-5-List类型" class="headerlink" title="5.5 List类型"></a>5.5 List类型</h2><ul>
<li><strong>Redis中的List类型与Java中的LinkedList类似，可以看做是一个双向链表结构。既可以支持正向检索和也可以支持反向检索</strong></li>
<li><strong>特征也与<code>LinkedList</code>类似：</strong><ul>
<li>有序</li>
<li>元素可以重复</li>
<li>插入和删除快</li>
<li>查询速度一般</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>List的常见命令有</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BLMOVE</td>
<td align="center">将元素从源列表（<code>source</code>）移动到目标列表（<code>destination</code>），返回移动的元素，阻塞客户端-支持超时</td>
</tr>
<tr>
<td align="center">BLMPOP</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">BLPOP</td>
<td align="center">弹出列表左端元素，若列表为空，客户端会阻塞直到超时或新元素加入<br>支持同时监听多个列表，按顺序检查是否有可弹出元素<br>阻塞客户端-支持超时</td>
</tr>
<tr>
<td align="center">BRPOP</td>
<td align="center">弹出列表右端元素，若列表为空，客户端会阻塞直到超时或新元素加入<br>支持同时监听多个列表，按顺序检查是否有可弹出元素<br>阻塞客户端-支持超时</td>
</tr>
<tr>
<td align="center">BRPOPLPUSH</td>
<td align="center">从源列表（<code>source</code>）尾部弹出元素，并插入目标列表（<code>destination</code>）头部<br>若源列表为空，客户端阻塞等待元素出现（支持超时设置）</td>
</tr>
<tr>
<td align="center">LINDEX</td>
<td align="center"><strong>获取指定索引位置的元素</strong>‌，支持正负索引</td>
</tr>
<tr>
<td align="center">LINSERT</td>
<td align="center">在列表的‌<strong>指定元素前或后插入新元素</strong>‌，若目标元素不存在或列表为空，则不执行操作</td>
</tr>
<tr>
<td align="center">LLEN</td>
<td align="center">返回指定键名对应的列表元素数量</td>
</tr>
<tr>
<td align="center">LMOVE</td>
<td align="center">将元素从源列表（<code>source</code>）移动到目标列表（<code>destination</code>），返回移动的元素，不阻塞客户端</td>
</tr>
<tr>
<td align="center">LMPOP</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">LPOP</td>
<td align="center"><strong>移除并返回列表的第一个元素</strong>‌（即左端元素）</td>
</tr>
<tr>
<td align="center">LPOS</td>
<td align="center">查找指定元素在列表（List）中的索引位置</td>
</tr>
<tr>
<td align="center">LPUSH</td>
<td align="center">向列表（List）头部（左侧）插入一个或多个元素，列表不存在新建</td>
</tr>
<tr>
<td align="center">LPUSHX</td>
<td align="center">向已存在的列表头部插入一个或多个值‌，列表不存在返回0</td>
</tr>
<tr>
<td align="center">LRANGE</td>
<td align="center">获取列表（List）指定区间内元素，支持正负索引定位元素位置</td>
</tr>
<tr>
<td align="center">LREM</td>
<td align="center">从列表（List）中移除指定值元素，支持根据 <code>count</code> 参数控制移除方向和数量</td>
</tr>
<tr>
<td align="center">LSET</td>
<td align="center">修改列表（List）中‌<strong>指定索引位置</strong>‌的元素值，若索引越界或键不存在会返回错误</td>
</tr>
<tr>
<td align="center">LTRIM</td>
<td align="center">截取列表（List），仅保留指定索引范围内的元素，其余元素将被删除</td>
</tr>
<tr>
<td align="center">RPOP</td>
<td align="center">移除并返回列表（List）最右侧元素</td>
</tr>
<tr>
<td align="center">RPOPLPUSH</td>
<td align="center">从源列表尾部移除元素并插入到目标列表头部‌</td>
</tr>
<tr>
<td align="center">RPUSH</td>
<td align="center">向列表（List）尾部（右侧）插入一个或多个元素，列表不存在新建</td>
</tr>
<tr>
<td align="center">RPUSHX</td>
<td align="center">向已存在的列表尾部插入一个或多个值‌，列表不存在返回0</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">help</span> @list</span><br><span class="line"></span><br><span class="line">  BLMOVE <span class="built_in">source</span> destination LEFT|RIGHT LEFT|RIGHT <span class="built_in">timeout</span></span><br><span class="line">  summary: Pops an element from a list, pushes it to another list and returns it. Blocks until an element is available otherwise. Deletes the list <span class="keyword">if</span> the last element was moved.</span><br><span class="line">  since: 6.2.0</span><br><span class="line"></span><br><span class="line">  BLMPOP <span class="built_in">timeout</span> numkeys key [key ...] LEFT|RIGHT [COUNT count]</span><br><span class="line">  summary: Pops the first element from one of multiple lists. Blocks until an element is available otherwise. Deletes the list <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  BLPOP key [key ...] <span class="built_in">timeout</span></span><br><span class="line">  summary: Removes and returns the first element <span class="keyword">in</span> a list. Blocks until an element is available otherwise. Deletes the list <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 2.0.0</span><br><span class="line"></span><br><span class="line">  BRPOP key [key ...] <span class="built_in">timeout</span></span><br><span class="line">  summary: Removes and returns the last element <span class="keyword">in</span> a list. Blocks until an element is available otherwise. Deletes the list <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 2.0.0</span><br><span class="line"></span><br><span class="line">  BRPOPLPUSH <span class="built_in">source</span> destination <span class="built_in">timeout</span></span><br><span class="line">  summary: Pops an element from a list, pushes it to another list and returns it. Block until an element is available otherwise. Deletes the list <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 2.2.0</span><br><span class="line"></span><br><span class="line">  LINDEX key index</span><br><span class="line">  summary: Returns an element from a list by its index.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  LINSERT key BEFORE|AFTER pivot element</span><br><span class="line">  summary: Inserts an element before or after another element <span class="keyword">in</span> a list.</span><br><span class="line">  since: 2.2.0</span><br><span class="line"></span><br><span class="line">  LLEN key</span><br><span class="line">  summary: Returns the length of a list.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  LMOVE <span class="built_in">source</span> destination LEFT|RIGHT LEFT|RIGHT</span><br><span class="line">  summary: Returns an element after popping it from one list and pushing it to another. Deletes the list <span class="keyword">if</span> the last element was moved.</span><br><span class="line">  since: 6.2.0</span><br><span class="line"></span><br><span class="line">  LMPOP numkeys key [key ...] LEFT|RIGHT [COUNT count]</span><br><span class="line">  summary: Returns multiple elements from a list after removing them. Deletes the list <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  LPOP key [count]</span><br><span class="line">  summary: Returns the first elements <span class="keyword">in</span> a list after removing it. Deletes the list <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  LPOS key element [RANK rank] [COUNT num-matches] [MAXLEN len]</span><br><span class="line">  summary: Returns the index of matching elements <span class="keyword">in</span> a list.</span><br><span class="line">  since: 6.0.6</span><br><span class="line"></span><br><span class="line">  LPUSH key element [element ...]</span><br><span class="line">  summary: Prepends one or more elements to a list. Creates the key <span class="keyword">if</span> it doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  LPUSHX key element [element ...]</span></span><br><span class="line"><span class="string">  summary: Prepends one or more elements to a list only when the list exists.</span></span><br><span class="line"><span class="string">  since: 2.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  LRANGE key start stop</span></span><br><span class="line"><span class="string">  summary: Returns a range of elements from a list.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  LREM key count element</span></span><br><span class="line"><span class="string">  summary: Removes elements from a list. Deletes the list if the last element was removed.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  LSET key index element</span></span><br><span class="line"><span class="string">  summary: Sets the value of an element in a list by its index.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  LTRIM key start stop</span></span><br><span class="line"><span class="string">  summary: Removes elements from both ends a list. Deletes the list if all elements were trimmed.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  RPOP key [count]</span></span><br><span class="line"><span class="string">  summary: Returns and removes the last elements of a list. Deletes the list if the last element was popped.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  RPOPLPUSH source destination</span></span><br><span class="line"><span class="string">  summary: Returns the last element of a list after removing and pushing it to another list. Deletes the list if the last element was popped.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  RPUSH key element [element ...]</span></span><br><span class="line"><span class="string">  summary: Appends one or more elements to a list. Creates the key if it doesn&#x27;</span>t exist.</span><br><span class="line">  since: 1.0.0</span><br><span class="line"></span><br><span class="line">  RPUSHX key element [element ...]</span><br><span class="line">  summary: Appends an element to a list only when the list exists.</span><br><span class="line">  since: 2.2.0</span><br></pre></td></tr></table></figure>

<p><img src="image-20230226234825966.png" alt="Redis/image-20230226234825966"></p>
<p><img src="image-20230226234855545.png" alt="Redis/image-20230226234855545"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; lpush list1 1 2 3</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; rpush 4 5 6</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; del 4</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; rpush list1 4 5 6</span><br><span class="line">(<span class="built_in">integer</span>) 6</span><br><span class="line">127.0.0.1:6379&gt; lpop list1</span><br><span class="line"><span class="string">&quot;3&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; rpop list1</span><br><span class="line"><span class="string">&quot;6&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; lrange list1 2 3</span><br><span class="line">1) <span class="string">&quot;4&quot;</span></span><br><span class="line">2) <span class="string">&quot;5&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; lpop list2</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; blpop list2</span><br><span class="line">(error) ERR wrong number of arguments <span class="keyword">for</span> <span class="string">&#x27;blpop&#x27;</span> <span class="built_in">command</span></span><br><span class="line">127.0.0.1:6379&gt; blpop list2 45</span><br><span class="line">1) <span class="string">&quot;list2&quot;</span></span><br><span class="line">2) <span class="string">&quot;6&quot;</span></span><br><span class="line">(42.89s)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>思考问题</strong></p>
</blockquote>
<ul>
<li><strong>如何利用List结构模拟一个栈?</strong><ul>
<li>先进后出，入口和出口在同一边</li>
</ul>
</li>
<li><strong>如何利用List结构模拟一个队列?</strong><ul>
<li>先进先出，入口和出口在不同边</li>
</ul>
</li>
<li><strong>如何利用List结构模拟一个阻塞队列?</strong><ul>
<li>入口和出口在不同边</li>
<li>出队时采用BLPOP或BRPOP</li>
</ul>
</li>
</ul>
<h2 id="5-6-Set类型"><a href="#5-6-Set类型" class="headerlink" title="5.6 Set类型"></a>5.6 Set类型</h2><ul>
<li><strong>Redis的Set结构与Java中的HashSet类似，可以看做是一个value为null的HashMap。因为也是一个hash表，因此具备与HashSet类似的特征</strong><ul>
<li>无序</li>
<li>元素不可重复</li>
<li>查找快</li>
<li>支持交集、并集、差集等功能</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Set的常见命令有</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SADD</td>
<td align="center">向集合中添加一个或多个成员</td>
</tr>
<tr>
<td align="center">SCARD</td>
<td align="center">获取集合的成员数量</td>
</tr>
<tr>
<td align="center">SDIFF</td>
<td align="center">计算多个集合的‌<strong>差集</strong>‌，返回仅存在于第一个集合中且不在其他集合中的成员</td>
</tr>
<tr>
<td align="center">SDIFFSTORE</td>
<td align="center">计算多个集合的‌<strong>差集</strong>‌，并将结果存储到指定的目标集合中。若目标集合已存在，则直接覆盖其内容</td>
</tr>
<tr>
<td align="center">SINTER</td>
<td align="center">计算多个集合的‌<strong>交集</strong>‌，返回所有给定集合共有的成员。若任意集合不存在或为空集，则结果为空集</td>
</tr>
<tr>
<td align="center">SINTERCARD</td>
<td align="center">计算多个集合的‌<strong>交集基数（元素数量）</strong>‌，直接返回交集成员的个数而非具体成员</td>
</tr>
<tr>
<td align="center">SINTERSTORE</td>
<td align="center">计算多个集合的交集并存储到新键</td>
</tr>
<tr>
<td align="center">SISMEMBER</td>
<td align="center">检查元素是否属于集合</td>
</tr>
<tr>
<td align="center">SMEMBERS</td>
<td align="center">返回集合所有成员（无序）</td>
</tr>
<tr>
<td align="center">SMISMEMBER</td>
<td align="center">批量检查多个元素是否属于集合</td>
</tr>
<tr>
<td align="center">SMOVE</td>
<td align="center">将元素从源集合移动到目标集合</td>
</tr>
<tr>
<td align="center">SPOP</td>
<td align="center">随机移除并返回集合中的元素</td>
</tr>
<tr>
<td align="center">SRANDMEMBER</td>
<td align="center">随机返回元素（不移除）</td>
</tr>
<tr>
<td align="center">SREM</td>
<td align="center">删除集合中的指定元素</td>
</tr>
<tr>
<td align="center">SSCAN</td>
<td align="center">增量迭代集合成员</td>
</tr>
<tr>
<td align="center">SUNION</td>
<td align="center">计算多个集合的并集</td>
</tr>
<tr>
<td align="center">SUNIONSTORE</td>
<td align="center">计算并集并存储到新键</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">help</span> @<span class="built_in">set</span></span><br><span class="line"></span><br><span class="line">  SADD key member [member ...]</span><br><span class="line">  summary: Adds one or more members to a <span class="built_in">set</span>. Creates the key <span class="keyword">if</span> it doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SCARD key</span></span><br><span class="line"><span class="string">  summary: Returns the number of members in a set.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SDIFF key [key ...]</span></span><br><span class="line"><span class="string">  summary: Returns the difference of multiple sets.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SDIFFSTORE destination key [key ...]</span></span><br><span class="line"><span class="string">  summary: Stores the difference of multiple sets in a key.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SINTER key [key ...]</span></span><br><span class="line"><span class="string">  summary: Returns the intersect of multiple sets.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SINTERCARD numkeys key [key ...] [LIMIT limit]</span></span><br><span class="line"><span class="string">  summary: Returns the number of members of the intersect of multiple sets.</span></span><br><span class="line"><span class="string">  since: 7.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SINTERSTORE destination key [key ...]</span></span><br><span class="line"><span class="string">  summary: Stores the intersect of multiple sets in a key.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SISMEMBER key member</span></span><br><span class="line"><span class="string">  summary: Determines whether a member belongs to a set.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SMEMBERS key</span></span><br><span class="line"><span class="string">  summary: Returns all members of a set.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SMISMEMBER key member [member ...]</span></span><br><span class="line"><span class="string">  summary: Determines whether multiple members belong to a set.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SMOVE source destination member</span></span><br><span class="line"><span class="string">  summary: Moves a member from one set to another.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SPOP key [count]</span></span><br><span class="line"><span class="string">  summary: Returns one or more random members from a set after removing them. Deletes the set if the last member was popped.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SRANDMEMBER key [count]</span></span><br><span class="line"><span class="string">  summary: Get one or multiple random members from a set</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SREM key member [member ...]</span></span><br><span class="line"><span class="string">  summary: Removes one or more members from a set. Deletes the set if the last member was removed.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SSCAN key cursor [MATCH pattern] [COUNT count]</span></span><br><span class="line"><span class="string">  summary: Iterates over members of a set.</span></span><br><span class="line"><span class="string">  since: 2.8.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SUNION key [key ...]</span></span><br><span class="line"><span class="string">  summary: Returns the union of multiple sets.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  SUNIONSTORE destination key [key ...]</span></span><br><span class="line"><span class="string">  summary: Stores the union of multiple sets in a key.</span></span><br><span class="line"><span class="string">  since: 1.0.0</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20250615171054430.png" alt="image-20250615171054430"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SADD s1 a b c</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS s1</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;a&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS s1</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;a&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; srem s1 a</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS s1</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;c&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER s1 </span><br><span class="line">(error) ERR wrong number of arguments <span class="keyword">for</span> <span class="string">&#x27;sismember&#x27;</span> <span class="built_in">command</span></span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER s1 a</span><br><span class="line">(<span class="built_in">integer</span>) 0</span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER s1 b</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; scard s1</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; SADD s1 a</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS s1</span><br><span class="line">1) <span class="string">&quot;a&quot;</span></span><br><span class="line">2) <span class="string">&quot;b&quot;</span></span><br><span class="line">3) <span class="string">&quot;c&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SADD s2 b c d</span><br><span class="line">(<span class="built_in">integer</span>) 3</span><br><span class="line">127.0.0.1:6379&gt; SINTER s1 s2</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;c&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SDIFF s1 s2</span><br><span class="line">1) <span class="string">&quot;a&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SUNION s1 s2</span><br><span class="line">1) <span class="string">&quot;b&quot;</span></span><br><span class="line">2) <span class="string">&quot;a&quot;</span></span><br><span class="line">3) <span class="string">&quot;d&quot;</span></span><br><span class="line">4) <span class="string">&quot;c&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; SDIFF s1 s2</span><br><span class="line">1) <span class="string">&quot;a&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>

<h2 id="5-7-SortedSet类型"><a href="#5-7-SortedSet类型" class="headerlink" title="5.7 SortedSet类型"></a>5.7 SortedSet类型</h2><ul>
<li><p><strong>Redis的SortedSet是一个可排序的set集合，与Java中的TreeSet有些类似，但底层数据结构却差别很大。SortedSet中的每一个元素都带有一个score属性，可以基于score属性对元素排序，底层的实现是一个跳表（SkipList）加 hash表</strong></p>
</li>
<li><p><strong>SortedSet具备下列特性：</strong></p>
<ul>
<li>可排序</li>
<li>元素不重复</li>
<li>查询速度快</li>
</ul>
</li>
<li><p>因为SortedSet的可排序特性，经常被用来实现排行榜这样的功能</p>
</li>
</ul>
<blockquote>
<p><strong>SortedSet的常见命令有</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BZMPOP</td>
<td align="center">阻塞式弹出多个有序集合中最高&#x2F;最低分元素</td>
</tr>
<tr>
<td align="center">BZPOPMAX</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">BZPOPMIN</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ZADD</td>
<td align="center">向有序集合（Sorted Set）添加一个或多个成员（<code>member</code>）及其对应的分数（<code>score</code>）。若成员已存在，则更新其分数并重新排序</td>
</tr>
<tr>
<td align="center">ZCARD</td>
<td align="center">获取有序集合（Sorted Set）的基数（即成员数量）</td>
</tr>
<tr>
<td align="center">ZCOUNT</td>
<td align="center">计算有序集合（Sorted Set）中分数（<code>score</code>）在指定区间 <code>[min, max]</code> 内的成员数量</td>
</tr>
<tr>
<td align="center">ZDIFF</td>
<td align="center">计算多个有序集合（Sorted Set）的差集，返回结果中仅包含存在于第一个集合但不在后续集合中的成员</td>
</tr>
<tr>
<td align="center">ZDIFFSTORE</td>
<td align="center">计算多个有序集合（Sorted Set）的差集，并将结果存储到一个新的有序集合中</td>
</tr>
<tr>
<td align="center">ZINCRBY</td>
<td align="center">对有序集合（Sorted Set）中指定成员的分数（<code>score</code>）进行增减操作</td>
</tr>
<tr>
<td align="center">ZINTER</td>
<td align="center">计算多个有序集合（Sorted Set）的交集，返回同时存在于所有指定集合中的成员</td>
</tr>
<tr>
<td align="center">ZINTERCARD</td>
<td align="center">计算多个有序集合（Sorted Set）的交集基数（即交集成员的数量），直接返回结果数量而不存储具体成员</td>
</tr>
<tr>
<td align="center">ZINTERSTORE</td>
<td align="center">计算多个有序集合（Sorted Set）的交集，并将结果存储到新的有序集合中</td>
</tr>
<tr>
<td align="center">ZLEXCOUNT</td>
<td align="center">计算有序集合（Sorted Set）中指定字典区间内的成员数量</td>
</tr>
<tr>
<td align="center">ZMPOP</td>
<td align="center">从有序集合(zset)中弹出指定数量的最高分或最低分元素</td>
</tr>
<tr>
<td align="center">ZMSCORE</td>
<td align="center">获取有序集合(zset)中一个或多个成员的分数值</td>
</tr>
<tr>
<td align="center">ZPOPMAX</td>
<td align="center">从有序集合(zset)中弹出并返回分数最高的成员</td>
</tr>
<tr>
<td align="center">ZPOPMIN</td>
<td align="center">从有序集合(zset)中弹出并返回分数最低的成员</td>
</tr>
<tr>
<td align="center">ZRANDMEMBER</td>
<td align="center">从有序集合(zset)中随机返回一个或多个成员</td>
</tr>
<tr>
<td align="center">ZRANGE</td>
<td align="center">获取有序集合（zset）中指定分数范围内的成员，按分数升序排列</td>
</tr>
<tr>
<td align="center">ZRANGEBYLEX</td>
<td align="center">在‌<strong>所有成员分数相同</strong>‌的有序集合中，按字典序(lexicographical order)获取指定范围内的成员</td>
</tr>
<tr>
<td align="center">ZRANGEBYSCORE</td>
<td align="center">从有序集合中获取指定分数范围内的成员，按分数升序排列</td>
</tr>
<tr>
<td align="center">ZRANGESTORE</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">ZRANK</td>
<td align="center">获取有序集合中指定成员的‌<strong>升序排名</strong>‌（分数从小到大排序）</td>
</tr>
<tr>
<td align="center">ZREM</td>
<td align="center">从有序集合（Sorted Set）中移除指定的一个或多个成员</td>
</tr>
<tr>
<td align="center">ZREMRANGEBYLEX</td>
<td align="center"><strong>移除有序集合中按字典序（lexicographical order）排列的指定范围内的成员</strong>‌，适用于所有成员分数（score）相同的有序集合</td>
</tr>
<tr>
<td align="center">ZREMRANGEBYRANK</td>
<td align="center"><strong>移除有序集合中指定排名（rank）区间内的成员</strong>‌，按分数升序排列的索引范围操作</td>
</tr>
<tr>
<td align="center">ZREMRANGEBYSCORE</td>
<td align="center"><strong>移除有序集合中指定分数（score）区间内的所有成员</strong>‌，支持闭区间和开区间操作</td>
</tr>
<tr>
<td align="center">ZREVRANGE</td>
<td align="center"><strong>从有序集合中按分数降序返回指定排名区间的成员</strong>‌，是<code>ZRANGE</code>的逆序版本</td>
</tr>
<tr>
<td align="center">ZREVRANGEBYSCORE</td>
<td align="center"><strong>从有序集合中按分数降序返回指定分数区间的成员</strong>‌，是<code>ZRANGEBYSCORE</code>的逆序版本</td>
</tr>
<tr>
<td align="center">ZREVRANK</td>
<td align="center"><strong>获取有序集合中指定成员的排名（按分数降序排列）</strong>‌，排名从0开始计算（最高分为第0名）</td>
</tr>
<tr>
<td align="center">ZSCAN</td>
<td align="center">增量迭代有序集合中的元素及其分数</td>
</tr>
<tr>
<td align="center">ZSCORE</td>
<td align="center">获取有序集合中指定成员的分数值</td>
</tr>
<tr>
<td align="center">ZUNION</td>
<td align="center"><strong>计算多个有序集合的并集并直接返回结果</strong>‌（不存储结果），是<code>ZUNIONSTORE</code>的非存储版本</td>
</tr>
<tr>
<td align="center">ZUNIONSTORE</td>
<td align="center"><strong>计算多个有序集合的并集并将结果存储到新集合中</strong>‌，支持权重和聚合操作</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">help</span> @sorted-set</span><br><span class="line"></span><br><span class="line">  BZMPOP <span class="built_in">timeout</span> numkeys key [key ...] MIN|MAX [COUNT count]</span><br><span class="line">  summary: Removes and returns a member by score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted <span class="built_in">set</span> <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 7.0.0</span><br><span class="line"></span><br><span class="line">  BZPOPMAX key [key ...] <span class="built_in">timeout</span></span><br><span class="line">  summary: Removes and returns the member with the highest score from one or more sorted sets. Blocks until a member available otherwise.  Deletes the sorted <span class="built_in">set</span> <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 5.0.0</span><br><span class="line"></span><br><span class="line">  BZPOPMIN key [key ...] <span class="built_in">timeout</span></span><br><span class="line">  summary: Removes and returns the member with the lowest score from one or more sorted sets. Blocks until a member is available otherwise. Deletes the sorted <span class="built_in">set</span> <span class="keyword">if</span> the last element was popped.</span><br><span class="line">  since: 5.0.0</span><br><span class="line"></span><br><span class="line">  ZADD key [NX|XX] [GT|LT] [CH] [INCR] score member [score member ...]</span><br><span class="line">  summary: Adds one or more members to a sorted <span class="built_in">set</span>, or updates their scores. Creates the key <span class="keyword">if</span> it doesn<span class="string">&#x27;t exist.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZCARD key</span></span><br><span class="line"><span class="string">  summary: Returns the number of members in a sorted set.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZCOUNT key min max</span></span><br><span class="line"><span class="string">  summary: Returns the count of members in a sorted set that have scores within a range.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZDIFF numkeys key [key ...] [WITHSCORES]</span></span><br><span class="line"><span class="string">  summary: Returns the difference between multiple sorted sets.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZDIFFSTORE destination numkeys key [key ...]</span></span><br><span class="line"><span class="string">  summary: Stores the difference of multiple sorted sets in a key.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZINCRBY key increment member</span></span><br><span class="line"><span class="string">  summary: Increments the score of a member in a sorted set.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZINTER numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX] [WITHSCORES]</span></span><br><span class="line"><span class="string">  summary: Returns the intersect of multiple sorted sets.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZINTERCARD numkeys key [key ...] [LIMIT limit]</span></span><br><span class="line"><span class="string">  summary: Returns the number of members of the intersect of multiple sorted sets.</span></span><br><span class="line"><span class="string">  since: 7.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX]</span></span><br><span class="line"><span class="string">  summary: Stores the intersect of multiple sorted sets in a key.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZLEXCOUNT key min max</span></span><br><span class="line"><span class="string">  summary: Returns the number of members in a sorted set within a lexicographical range.</span></span><br><span class="line"><span class="string">  since: 2.8.9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZMPOP numkeys key [key ...] MIN|MAX [COUNT count]</span></span><br><span class="line"><span class="string">  summary: Returns the highest- or lowest-scoring members from one or more sorted sets after removing them. Deletes the sorted set if the last member was popped.</span></span><br><span class="line"><span class="string">  since: 7.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZMSCORE key member [member ...]</span></span><br><span class="line"><span class="string">  summary: Returns the score of one or more members in a sorted set.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZPOPMAX key [count]</span></span><br><span class="line"><span class="string">  summary: Returns the highest-scoring members from a sorted set after removing them. Deletes the sorted set if the last member was popped.</span></span><br><span class="line"><span class="string">  since: 5.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZPOPMIN key [count]</span></span><br><span class="line"><span class="string">  summary: Returns the lowest-scoring members from a sorted set after removing them. Deletes the sorted set if the last member was popped.</span></span><br><span class="line"><span class="string">  since: 5.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZRANDMEMBER key [count [WITHSCORES]]</span></span><br><span class="line"><span class="string">  summary: Returns one or more random members from a sorted set.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZRANGE key start stop [BYSCORE|BYLEX] [REV] [LIMIT offset count] [WITHSCORES]</span></span><br><span class="line"><span class="string">  summary: Returns members in a sorted set within a range of indexes.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZRANGEBYLEX key min max [LIMIT offset count]</span></span><br><span class="line"><span class="string">  summary: Returns members in a sorted set within a lexicographical range.</span></span><br><span class="line"><span class="string">  since: 2.8.9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]</span></span><br><span class="line"><span class="string">  summary: Returns members in a sorted set within a range of scores.</span></span><br><span class="line"><span class="string">  since: 1.0.5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZRANGESTORE dst src min max [BYSCORE|BYLEX] [REV] [LIMIT offset count]</span></span><br><span class="line"><span class="string">  summary: Stores a range of members from sorted set in a key.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZRANK key member [WITHSCORE]</span></span><br><span class="line"><span class="string">  summary: Returns the index of a member in a sorted set ordered by ascending scores.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREM key member [member ...]</span></span><br><span class="line"><span class="string">  summary: Removes one or more members from a sorted set. Deletes the sorted set if all members were removed.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREMRANGEBYLEX key min max</span></span><br><span class="line"><span class="string">  summary: Removes members in a sorted set within a lexicographical range. Deletes the sorted set if all members were removed.</span></span><br><span class="line"><span class="string">  since: 2.8.9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREMRANGEBYRANK key start stop</span></span><br><span class="line"><span class="string">  summary: Removes members in a sorted set within a range of indexes. Deletes the sorted set if all members were removed.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREMRANGEBYSCORE key min max</span></span><br><span class="line"><span class="string">  summary: Removes members in a sorted set within a range of scores. Deletes the sorted set if all members were removed.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREVRANGE key start stop [WITHSCORES]</span></span><br><span class="line"><span class="string">  summary: Returns members in a sorted set within a range of indexes in reverse order.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREVRANGEBYLEX key max min [LIMIT offset count]</span></span><br><span class="line"><span class="string">  summary: Returns members in a sorted set within a lexicographical range in reverse order.</span></span><br><span class="line"><span class="string">  since: 2.8.9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]</span></span><br><span class="line"><span class="string">  summary: Returns members in a sorted set within a range of scores in reverse order.</span></span><br><span class="line"><span class="string">  since: 2.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZREVRANK key member [WITHSCORE]</span></span><br><span class="line"><span class="string">  summary: Returns the index of a member in a sorted set ordered by descending scores.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZSCAN key cursor [MATCH pattern] [COUNT count]</span></span><br><span class="line"><span class="string">  summary: Iterates over members and scores of a sorted set.</span></span><br><span class="line"><span class="string">  since: 2.8.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZSCORE key member</span></span><br><span class="line"><span class="string">  summary: Returns the score of a member in a sorted set.</span></span><br><span class="line"><span class="string">  since: 1.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZUNION numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX] [WITHSCORES]</span></span><br><span class="line"><span class="string">  summary: Returns the union of multiple sorted sets.</span></span><br><span class="line"><span class="string">  since: 6.2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]] [AGGREGATE SUM|MIN|MAX]</span></span><br><span class="line"><span class="string">  summary: Stores the union of multiple sorted sets in a key.</span></span><br><span class="line"><span class="string">  since: 2.0.0</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：所有的排名默认都是升序，如果要降序则在命令的Z后面添加<code>REV</code>即可</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; ZADD ss 85 Jack 89 Lucy 82 Rose 95 Tom 78 Jerry 92 Amy 76 Miles</span><br><span class="line">(<span class="built_in">integer</span>) 7</span><br><span class="line">127.0.0.1:6379&gt; ZREM ss Tom</span><br><span class="line">(<span class="built_in">integer</span>) 1</span><br><span class="line">127.0.0.1:6379&gt; ZSCORE ss Amy</span><br><span class="line"><span class="string">&quot;92&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANK ss Rose</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; ZCOUNT ss 0 80</span><br><span class="line">(<span class="built_in">integer</span>) 2</span><br><span class="line">127.0.0.1:6379&gt; ZINCRBY ss 2 Amy</span><br><span class="line"><span class="string">&quot;94&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGE ss 0 3</span><br><span class="line">1) <span class="string">&quot;Miles&quot;</span></span><br><span class="line">2) <span class="string">&quot;Jerry&quot;</span></span><br><span class="line">3) <span class="string">&quot;Rose&quot;</span></span><br><span class="line">4) <span class="string">&quot;Jack&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGE ss 0 2</span><br><span class="line">1) <span class="string">&quot;Miles&quot;</span></span><br><span class="line">2) <span class="string">&quot;Jerry&quot;</span></span><br><span class="line">3) <span class="string">&quot;Rose&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGE ss 0 2</span><br><span class="line">1) <span class="string">&quot;Amy&quot;</span></span><br><span class="line">2) <span class="string">&quot;Lucy&quot;</span></span><br><span class="line">3) <span class="string">&quot;Jack&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE ss 0 80</span><br><span class="line">1) <span class="string">&quot;Miles&quot;</span></span><br><span class="line">2) <span class="string">&quot;Jerry&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></table></figure>

<p><img src="image-20250615170953351.png" alt="image-20250615170953351"></p>
<h1 id="6-Java客户端"><a href="#6-Java客户端" class="headerlink" title="6.Java客户端"></a>6.Java客户端</h1><ul>
<li><strong>Jedis</strong>：官方提供的原生 Java 客户端，支持同步阻塞式 IO</li>
<li><strong>Lettuce</strong>：基于 Netty 的异步非阻塞客户端，支持响应式编程</li>
<li><strong>Spring Data Redis</strong>：Spring 封装的高层抽象，支持 Jedis&#x2F;Lettuce 作为底层连接</li>
</ul>
<p><img src="image-20230227130137040.png" alt="Redis/image-20230227130137040"></p>
<h2 id="6-1-Jedis"><a href="#6-1-Jedis" class="headerlink" title="6.1 Jedis"></a>6.1 Jedis</h2><h3 id="6-1-1-Jedis快速入门"><a href="#6-1-1-Jedis快速入门" class="headerlink" title="6.1.1 Jedis快速入门"></a>6.1.1 Jedis快速入门</h3><blockquote>
<p>Jedis的官网地址： <a target="_blank" rel="noopener" href="https://github.com/jedis">https://github.com/jedis</a></p>
</blockquote>
<ul>
<li><p><strong>新建一个Maven工程并引入以下依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入Jedis依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写一个操作数据的方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yang.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.AfterMethod;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeMethod;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Jedis jedis;</span><br><span class="line">    <span class="meta">@BeforeMethod</span><span class="comment">//被该注解修饰的方法每次执行其他方法前自动执行</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 1. 获取连接</span></span><br><span class="line">        jedis = <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.198.134&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">// 2. 设置密码</span></span><br><span class="line">        jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. 选择库（默认是下标为0的库）</span></span><br><span class="line">        jedis.select(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.String</span></span><br><span class="line">        <span class="comment">//往redis中存放一条String类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;峡谷杨爹-鲁班七号&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条String数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.Hash</span></span><br><span class="line">        HashMap&lt;String, String&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;峡谷杨爹&quot;</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;99999&quot;</span>);</span><br><span class="line">        <span class="comment">//往redis中存放一条Hash类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">hash1</span> <span class="operator">=</span> jedis.hset(<span class="string">&quot;hash1&quot;</span>, hashMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;hash1 = &quot;</span> + hash1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条Hash数据</span></span><br><span class="line">        Map&lt;String, String&gt; map = jedis.hgetAll(<span class="string">&quot;hash1&quot;</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.List</span></span><br><span class="line">        <span class="comment">//往redis中存放一条List类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">lpush</span> <span class="operator">=</span> jedis.lpush(<span class="string">&quot;list1&quot;</span>, <span class="string">&quot;l1&quot;</span>, <span class="string">&quot;l3&quot;</span>, <span class="string">&quot;l2&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;lpush = &quot;</span> + lpush);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条List数据</span></span><br><span class="line">        List&lt;String&gt; list = jedis.lrange(<span class="string">&quot;list1&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.Set</span></span><br><span class="line">        <span class="comment">//往redis中存放一条Set类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">sadd</span> <span class="operator">=</span> jedis.sadd(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;s1&quot;</span>, <span class="string">&quot;s2&quot;</span>, <span class="string">&quot;s1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;sadd = &quot;</span> + sadd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条Set数据</span></span><br><span class="line">        Set&lt;String&gt; set = jedis.smembers(<span class="string">&quot;set1&quot;</span>);</span><br><span class="line">        System.out.println(set);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.Zset</span></span><br><span class="line">        HashMap&lt;String, Double&gt; setMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        setMap.put(<span class="string">&quot;name&quot;</span>,<span class="number">99.9</span>);</span><br><span class="line">        setMap.put(<span class="string">&quot;age&quot;</span>,<span class="number">15.5</span>);</span><br><span class="line">        <span class="comment">//往redis中存放一条Zset类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">zset1</span> <span class="operator">=</span> jedis.zadd(<span class="string">&quot;zset1&quot;</span>, setMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;zset1 = &quot;</span> + zset1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条Zset数据</span></span><br><span class="line">        List&lt;String&gt; zset = jedis.zrange(<span class="string">&quot;zset1&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(zset);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterMethod</span><span class="comment">//被该注解修饰的方法会在每次执行其他方法后执行</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 1.释放资源</span></span><br><span class="line">        <span class="keyword">if</span> (jedis != <span class="literal">null</span>)&#123;</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="image-20250615175305309.png" alt="image-20250615175305309"></p>
<h3 id="6-1-2-Jedis连接池"><a href="#6-1-2-Jedis连接池" class="headerlink" title="6.1.2 Jedis连接池"></a>6.1.2 Jedis连接池</h3><blockquote>
<p><strong>Jedis本身是线程不安全的，并且频繁的创建和销毁连接会有性能损耗，因此我们推荐大家使用Jedis连接池代替Jedis的直连方式</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisConnectionFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//配置连接池</span></span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">jedisPoolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        <span class="comment">//最大连接</span></span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">8</span>);</span><br><span class="line">        <span class="comment">//最大空闲连接</span></span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">8</span>);</span><br><span class="line">        <span class="comment">//最小空闲连接</span></span><br><span class="line">        jedisPoolConfig.setMinIdle(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">//设置最长等待时间，ms</span></span><br><span class="line">        jedisPoolConfig.setMaxWaitMillis(<span class="number">200</span>);</span><br><span class="line">        <span class="comment">//创建连接池对象</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> <span class="title class_">JedisPool</span>(jedisPoolConfig,<span class="string">&quot;192.168.198.134&quot;</span>,<span class="number">6379</span>,<span class="number">1000</span>,<span class="string">&quot;123321&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取Jedis对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title function_">getJedis</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yang.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.yang.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.yang.util.JedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.AfterMethod;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeMethod;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Jedis jedis;</span><br><span class="line">    <span class="meta">@BeforeMethod</span><span class="comment">//被该注解修饰的方法每次执行其他方法前自动执行</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 1. 获取连接</span></span><br><span class="line">        jedis = JedisConnectionFactory.getJedis();</span><br><span class="line">        <span class="comment">// 2. 设置密码</span></span><br><span class="line">        jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">// 3. 选择库（默认是下标为0的库）</span></span><br><span class="line">        jedis.select(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.String</span></span><br><span class="line">        <span class="comment">//往redis中存放一条String类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;峡谷杨爹-鲁班七号&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条String数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.Hash</span></span><br><span class="line">        HashMap&lt;String, String&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;峡谷杨爹&quot;</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;99999&quot;</span>);</span><br><span class="line">        <span class="comment">//往redis中存放一条Hash类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">hash1</span> <span class="operator">=</span> jedis.hset(<span class="string">&quot;hash1&quot;</span>, hashMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;hash1 = &quot;</span> + hash1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条Hash数据</span></span><br><span class="line">        Map&lt;String, String&gt; map = jedis.hgetAll(<span class="string">&quot;hash1&quot;</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.List</span></span><br><span class="line">        <span class="comment">//往redis中存放一条List类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">lpush</span> <span class="operator">=</span> jedis.lpush(<span class="string">&quot;list1&quot;</span>, <span class="string">&quot;l1&quot;</span>, <span class="string">&quot;l3&quot;</span>, <span class="string">&quot;l2&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;lpush = &quot;</span> + lpush);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条List数据</span></span><br><span class="line">        List&lt;String&gt; list = jedis.lrange(<span class="string">&quot;list1&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.Set</span></span><br><span class="line">        <span class="comment">//往redis中存放一条Set类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">sadd</span> <span class="operator">=</span> jedis.sadd(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;s1&quot;</span>, <span class="string">&quot;s2&quot;</span>, <span class="string">&quot;s1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;sadd = &quot;</span> + sadd);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条Set数据</span></span><br><span class="line">        Set&lt;String&gt; set = jedis.smembers(<span class="string">&quot;set1&quot;</span>);</span><br><span class="line">        System.out.println(set);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.Zset</span></span><br><span class="line">        HashMap&lt;String, Double&gt; setMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        setMap.put(<span class="string">&quot;name&quot;</span>,<span class="number">99.9</span>);</span><br><span class="line">        setMap.put(<span class="string">&quot;age&quot;</span>,<span class="number">15.5</span>);</span><br><span class="line">        <span class="comment">//往redis中存放一条Zset类型的数据并获取返回结果</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">zset1</span> <span class="operator">=</span> jedis.zadd(<span class="string">&quot;zset1&quot;</span>, setMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;zset1 = &quot;</span> + zset1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//从redis中获取一条Zset数据</span></span><br><span class="line">        List&lt;String&gt; zset = jedis.zrange(<span class="string">&quot;zset1&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(zset);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterMethod</span><span class="comment">//被该注解修饰的方法会在每次执行其他方法后执行</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 1.释放资源</span></span><br><span class="line">        <span class="keyword">if</span> (jedis != <span class="literal">null</span>)&#123;</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-2-SpringDataRedis"><a href="#6-2-SpringDataRedis" class="headerlink" title="6.2 SpringDataRedis"></a>6.2 SpringDataRedis</h2><blockquote>
<p><strong>SpringData是Spring中数据操作的模块，包含对各种数据库的集成，其中对Redis的集成模块就叫做<code>SpringDataRedis</code></strong></p>
<p><strong>官网地址</strong>：<a target="_blank" rel="noopener" href="https://spring.io/projects/spring-data-redis">https://spring.io/projects/spring-data-redis</a></p>
</blockquote>
<ul>
<li>提供了对不同Redis客户端的整合（<code>Lettuce</code>和<code>Jedis</code>）</li>
<li>提供了<code>RedisTemplate</code>统一API来操作Redis</li>
<li>支持Redis的发布订阅模型</li>
<li>支持Redis哨兵和Redis集群</li>
<li>支持基于Lettuce的响应式编程</li>
<li>支持基于JDK、JSON、字符串、Spring对象的数据序列化及反序列化</li>
<li>支持基于Redis的JDKCollection实现</li>
</ul>
<blockquote>
<p><strong>SpringDataRedis中提供了RedisTemplate工具类，其中封装了各种对Redis的操作。并且将不同数据类型的操作API封装到了不同的类型中：</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">API</th>
<th align="center">返回值类型</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">redisTemplate.opsForValue()</td>
<td align="center">ValueOperations</td>
<td align="center">操作String类型数据</td>
</tr>
<tr>
<td align="center">redisTemplate.opsForHash()</td>
<td align="center">HashOperations</td>
<td align="center">操作Hash类型数据</td>
</tr>
<tr>
<td align="center">redisTemplate.opsForList()</td>
<td align="center">ListOperations</td>
<td align="center">操作List类型数据</td>
</tr>
<tr>
<td align="center">redisTemplate.opsForSet()</td>
<td align="center">SetOperations</td>
<td align="center">操作Set类型数据</td>
</tr>
<tr>
<td align="center">redisTemplate.opsForZSet()</td>
<td align="center">ZSetOperations</td>
<td align="center">操作SortedSet类型数据</td>
</tr>
<tr>
<td align="center">redisTemplate</td>
<td align="center"></td>
<td align="center">通用命令</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    redisTemplate.opsForValue().set(<span class="string">&quot;opsForValue1&quot;</span>,<span class="string">&quot;opsForValue&quot;</span>);</span><br><span class="line">    redisTemplate.opsForHash().put(<span class="string">&quot;opsForHash1&quot;</span>,<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">    redisTemplate.opsForList().leftPush(<span class="string">&quot;opsForList1&quot;</span>,<span class="string">&quot;opsForList&quot;</span>);</span><br><span class="line">    redisTemplate.opsForSet().add(<span class="string">&quot;opsForSet1&quot;</span>,<span class="string">&quot;set1&quot;</span>,<span class="string">&quot;set2&quot;</span>);</span><br><span class="line">    redisTemplate.opsForZSet().add(<span class="string">&quot;opsForZSet1&quot;</span>,<span class="string">&quot;zseted1&quot;</span>,<span class="number">90</span>);</span><br><span class="line">    System.out.println(redisTemplate.delete(<span class="string">&quot;opsForList1&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-1-SpringDataRedis快速入门"><a href="#6-2-1-SpringDataRedis快速入门" class="headerlink" title="6.2.1 SpringDataRedis快速入门"></a>6.2.1 SpringDataRedis快速入门</h3><blockquote>
<p><strong><code>SpringBoot</code>已经提供了对<code>SpringDataRedis</code>的支持，使用非常简单</strong></p>
</blockquote>
<ul>
<li><p><strong>首先新建一个Spring Boot工程</strong></p>
<p><img src="image-20230227134524573.png" alt="Redis/image-20230227134524573"></p>
<p><img src="image-20230227134641943.png" alt="Redis/image-20230227134641943"></p>
<p><img src="image-20230227134703742.png" alt="Redis/image-20230227134703742"></p>
</li>
<li><p><strong>编写配置文件<code>application.yml</code>（连接池的配置在实际开发中是根据需求来的）</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.198</span><span class="number">.134</span> <span class="comment">#指定redis所在的host</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span>  <span class="comment">#指定redis的端口</span></span><br><span class="line">      <span class="attr">password:</span> <span class="number">123321</span>  <span class="comment">#设置redis密码</span></span><br><span class="line">      <span class="attr">lettuce:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">8</span> <span class="comment">#最大连接数</span></span><br><span class="line">          <span class="attr">max-idle:</span> <span class="number">8</span> <span class="comment">#最大空闲数</span></span><br><span class="line">          <span class="attr">min-idle:</span> <span class="number">0</span> <span class="comment">#最小空闲数</span></span><br><span class="line">          <span class="attr">max-wait:</span> <span class="string">100ms</span> <span class="comment">#连接等待时间</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>编写测试类执行测试方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.ValueOperations;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpringdataredisDemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.通过RedisTemplate获取操作String类型的ValueOperations对象</span></span><br><span class="line">        <span class="type">ValueOperations</span> <span class="variable">ops</span> <span class="operator">=</span> redisTemplate.opsForValue();</span><br><span class="line">        <span class="comment">// 2.插入一条数据</span></span><br><span class="line">        ops.set(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;齐天大圣&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.获取数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) ops.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>SpringDataRedis + jedis</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Data Redis Starter --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.lettuce<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lettuce-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Jedis客户端 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 连接池支持 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">jedis:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">8</span>      <span class="comment"># 最大连接数</span></span><br><span class="line">        <span class="attr">max-idle:</span> <span class="number">4</span>        <span class="comment"># 最大空闲连接</span></span><br><span class="line">        <span class="attr">min-idle:</span> <span class="number">1</span>        <span class="comment"># 最小空闲连接</span></span><br><span class="line">        <span class="attr">max-wait:</span> <span class="string">2000ms</span>   <span class="comment"># 获取连接最大等待时间</span></span><br></pre></td></tr></table></figure>

<h3 id="6-2-2-RedisSerializer配置"><a href="#6-2-2-RedisSerializer配置" class="headerlink" title="6.2.2 RedisSerializer配置"></a>6.2.2 RedisSerializer配置</h3><hr>
<blockquote>
<p><strong>RedisTemplate可以接收任意Object作为值写入Redis，只不过写入前会把Object序列化为字节形式，<code>默认是采用JDK序列化</code>，得到的结果是这样的</strong></p>
</blockquote>
<p><img src="image-20230227143920131.png" alt="Redis/image-20230227143920131"></p>
<p><strong>缺点：</strong></p>
<ul>
<li>可读性差</li>
<li>内存占用较大</li>
</ul>
<blockquote>
<p><strong>可以通过自定义RedisTemplate序列化的方式来解决</strong>l</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Jackson依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>编写一个配置类<code>RedisConfig</code></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String,Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建RedisTemplate对象</span></span><br><span class="line">        RedisTemplate&lt;String ,Object&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 2.设置连接工厂</span></span><br><span class="line">        redisTemplate.setConnectionFactory(factory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.创建序列化对象</span></span><br><span class="line">        <span class="type">StringRedisSerializer</span> <span class="variable">stringRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">        <span class="type">GenericJackson2JsonRedisSerializer</span> <span class="variable">genericJackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.设置key和hashKey采用String的序列化方式</span></span><br><span class="line">        redisTemplate.setKeySerializer(stringRedisSerializer);</span><br><span class="line">        redisTemplate.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.设置value和hashValue采用json的序列化方式</span></span><br><span class="line">        redisTemplate.setValueSerializer(genericJackson2JsonRedisSerializer);</span><br><span class="line">        redisTemplate.setHashValueSerializer(genericJackson2JsonRedisSerializer);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>此时我们已经将RedisTemplate的key设置为<code>String序列化</code>，value设置为<code>Json序列化</code>的方式，再来执行方法测试</strong></p>
<p><img src="image-20230227144625313.png" alt="Redis/image-20230227144625313"></p>
</li>
<li><p><strong>由于我们设置的value序列化方式是Json的，因此我们可以直接向redis中插入一个对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSaveUser</span><span class="params">()</span> &#123;</span><br><span class="line">    redisTemplate.opsForValue().set(<span class="string">&quot;user:100&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;猴子&quot;</span>, <span class="number">21</span>));</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) redisTemplate.opsForValue().get(<span class="string">&quot;user:100&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;User = &quot;</span> + user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="image-20230227145155533.png" alt="Redis/image-20230227145155533"></p>
<p>为了在反序列化时知道对象的类型，JSON序列化器会将类的class类型写入json结果中，存入Redis，会带来额外的内存开销，可以通过下文的<code>StringRedisTemplate</code>来解决这个问题</p>
</li>
</ul>
<h3 id="6-2-3-StringRedisTemplate"><a href="#6-2-3-StringRedisTemplate" class="headerlink" title="6.2.3 StringRedisTemplate"></a>6.2.3 StringRedisTemplate</h3><blockquote>
<p><strong>为了节省内存空间，我们并不会使用JSON序列化器来处理value，而是统一使用String序列化器，要求只能存储String类型的key和value。当需要存储Java对象时，手动完成对象的序列化和反序列化。</strong></p>
</blockquote>
<p><img src="image-20230227145504091.png" alt="Redis/image-20230227145504091"></p>
<blockquote>
<p><strong>Spring默认提供了一个StringRedisTemplate类，它的key和value的序列化方式默认就是String方式。省去了我们自定义RedisTemplate的过程</strong></p>
</blockquote>
<ul>
<li><p><strong>我们可以直接编写一个测试类使用StringRedisTemplate来执行以下方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.yang.springdataredisdemo.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisStringTemplateTest</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">testSaveUser</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">		<span class="comment">// 1.创建对象</span></span><br><span class="line">		<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;花木兰&quot;</span>, <span class="number">17</span>);</span><br><span class="line">		<span class="comment">// 2.将要存入的对象通过Json序列化对象转换为字符串</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">userJson1</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">		<span class="comment">// 3.通过StringRedisTemplate将数据存入redis</span></span><br><span class="line">		stringRedisTemplate.opsForValue().set(<span class="string">&quot;user:200&quot;</span>,userJson1);</span><br><span class="line">		<span class="comment">// 4.通过key取出value</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">userJson2</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;user:200&quot;</span>);</span><br><span class="line">		<span class="comment">// 5.由于取出的值是String类型的Json字符串，因此我们需要通过Json序列化对象来转换为java对象</span></span><br><span class="line">		<span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> mapper.readValue(userJson2, User.class);</span><br><span class="line">		<span class="comment">// 6.打印结果</span></span><br><span class="line">		System.out.println(<span class="string">&quot;user1 = &quot;</span> + user1);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="image-20230227150301419.png" alt="Redis/image-20230227150301419"></p>
</li>
</ul>
<h2 id="6-3-总结"><a href="#6-3-总结" class="headerlink" title="6.3 总结"></a>6.3 总结</h2><hr>
<blockquote>
<p>RedisTemplate的两种序列化实践方案，两种方案各有各的优缺点，可以根据实际情况选择使用</p>
</blockquote>
<p>方案一：</p>
<ol>
<li>自定义RedisTemplate</li>
<li>修改RedisTemplate的序列化器为GenericJackson2JsonRedisSerializer</li>
</ol>
<p>方案二：</p>
<ol>
<li>使用StringRedisTemplate</li>
<li>写入Redis时，手动把对象序列化为JSON</li>
<li>读取Redis时，手动把读取到的JSON反序列化为对象</li>
</ol>
<h1 id="7-redis应用场景"><a href="#7-redis应用场景" class="headerlink" title="7.redis应用场景"></a>7.redis应用场景</h1><h2 id="7-1-数据缓存"><a href="#7-1-数据缓存" class="headerlink" title="7.1 数据缓存"></a>7.1 数据缓存</h2><h2 id="7-2-会话缓存"><a href="#7-2-会话缓存" class="headerlink" title="7.2 会话缓存"></a>7.2 会话缓存</h2><h2 id="7-3-分布式锁"><a href="#7-3-分布式锁" class="headerlink" title="7.3 分布式锁"></a>7.3 分布式锁</h2><h2 id="7-4-计数器"><a href="#7-4-计数器" class="headerlink" title="7.4 计数器"></a>7.4 计数器</h2><h2 id="7-5-消息队列"><a href="#7-5-消息队列" class="headerlink" title="7.5 消息队列"></a>7.5 消息队列</h2>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>峡谷杨爹
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://xiaguyangdie.github.io/2023/02/26/Redis/" title="Redis">https://xiaguyangdie.github.io/2023/02/26/Redis/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag"><i class="fa fa-tag"></i> 中间件</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/02/26/Qt%E8%AF%BB%E5%8F%96%E5%9B%BE%E7%89%87%E7%9A%84N%E7%A7%8D%E6%96%B9%E5%BC%8F/" rel="prev" title="Qt读取图片的N种方式">
      <i class="fa fa-chevron-left"></i> Qt读取图片的N种方式
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/02/26/shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/" rel="next" title="shell脚本语言">
      shell脚本语言 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-NoSQL%E4%B8%8ESQL"><span class="nav-text">1.NoSQL与SQL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Redis%E7%AE%80%E4%BB%8B"><span class="nav-text">2.Redis简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Redis%E5%AE%89%E8%A3%85"><span class="nav-text">3.Redis安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="nav-text">3.1 环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E5%AE%89%E8%A3%85Redis%E4%BE%9D%E8%B5%96"><span class="nav-text">3.2 安装Redis依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E6%AD%A3%E5%BC%8F%E5%AE%89%E8%A3%85Redis"><span class="nav-text">3.3 正式安装Redis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-%E5%90%AF%E5%8A%A8Redis"><span class="nav-text">3.4 启动Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-%E5%89%8D%E5%8F%B0%E5%90%AF%E5%8A%A8%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="nav-text">3.4.1 前台启动（不推荐）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2-%E5%90%8E%E5%8F%B0%E5%90%AF%E5%8A%A8%EF%BC%88%E4%B8%8D%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="nav-text">3.4.2 后台启动（不推荐）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-3-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="nav-text">3.4.3 开机自启（推荐）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Redis%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-text">4.Redis客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Redis%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-text">4.1 Redis命令行客户端</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-Redis%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%A1%8C%E9%9D%A2%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-text">4.2 Redis图形化桌面客户端</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Redis%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="nav-text">5.Redis常见命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D"><span class="nav-text">5.1 Redis数据结构介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">5.2 通用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-String%E7%B1%BB%E5%9E%8B"><span class="nav-text">5.3 String类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-Hash%E7%B1%BB%E5%9E%8B"><span class="nav-text">5.4 Hash类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-List%E7%B1%BB%E5%9E%8B"><span class="nav-text">5.5 List类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-Set%E7%B1%BB%E5%9E%8B"><span class="nav-text">5.6 Set类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-7-SortedSet%E7%B1%BB%E5%9E%8B"><span class="nav-text">5.7 SortedSet类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-Java%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-text">6.Java客户端</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-Jedis"><span class="nav-text">6.1 Jedis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-1-Jedis%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-text">6.1.1 Jedis快速入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-2-Jedis%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-text">6.1.2 Jedis连接池</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-SpringDataRedis"><span class="nav-text">6.2 SpringDataRedis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-1-SpringDataRedis%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-text">6.2.1 SpringDataRedis快速入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-2-RedisSerializer%E9%85%8D%E7%BD%AE"><span class="nav-text">6.2.2 RedisSerializer配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-3-StringRedisTemplate"><span class="nav-text">6.2.3 StringRedisTemplate</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-%E6%80%BB%E7%BB%93"><span class="nav-text">6.3 总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-redis%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">7.redis应用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98"><span class="nav-text">7.1 数据缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-%E4%BC%9A%E8%AF%9D%E7%BC%93%E5%AD%98"><span class="nav-text">7.2 会话缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="nav-text">7.3 分布式锁</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="nav-text">7.4 计数器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-5-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="nav-text">7.5 消息队列</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="峡谷杨爹"
      src="/images/%E5%8D%9A%E5%AE%A2.webp">
  <p class="site-author-name" itemprop="name">峡谷杨爹</p>
  <div class="site-description" itemprop="description">write less, do more</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">149</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaguyangdie" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaguyangdie" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:424793597@qq.com" title="E-Mail → mailto:424793597@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	</div>
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=7450004106&auto=0&height=430"></iframe>  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">峡谷杨爹</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">3.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">46:18</span>
</div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"jc38mXtIY9GP4HNtOg9qT7Fo-gzGzoHsz","app_key":"yDHjFefMRYGX7YloQFcPnw78","server_url":null,"security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'jc38mXtIY9GP4HNtOg9qT7Fo-gzGzoHsz',
      appKey     : 'yDHjFefMRYGX7YloQFcPnw78',
      placeholder: "说说",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
