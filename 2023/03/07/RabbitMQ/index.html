<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xiaguyangdie.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="jacoco+arthas">
<meta property="og:type" content="article">
<meta property="og:title" content="jacoco+arthas">
<meta property="og:url" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/index.html">
<meta property="og:site_name" content="峡谷杨爹的个人博客">
<meta property="og:description" content="jacoco+arthas">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719190337077.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719163854459.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719163913776.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719164005438.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719174214866.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719174937930.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719175046341.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719175331789.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719204921809.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719200236841.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713010439506.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713012448690.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250712231926101.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713004332035.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713004806252.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713190917458.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713190937875.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713170143089.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713171338532.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713171951275.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713163326366.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713231950847.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250713233500215.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250714232943833.png">
<meta property="og:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250716223359067.png">
<meta property="article:published_time" content="2023-03-07T15:02:44.567Z">
<meta property="article:modified_time" content="2025-07-20T01:19:30.212Z">
<meta property="article:author" content="峡谷杨爹">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/image-20250719190337077.png">

<link rel="canonical" href="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>jacoco+arthas | 峡谷杨爹的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">峡谷杨爹的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习使我快乐，游戏使我疯狂</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    

  <a href="https://github.com/xiaguyangdie" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%8D%9A%E5%AE%A2.webp">
      <meta itemprop="name" content="峡谷杨爹">
      <meta itemprop="description" content="write less, do more">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="峡谷杨爹的个人博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          jacoco+arthas
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-07 23:02:44" itemprop="dateCreated datePublished" datetime="2023-03-07T23:02:44+08:00">2023-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-07-20 09:19:30" itemprop="dateModified" datetime="2025-07-20T09:19:30+08:00">2025-07-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
                </span>
            </span>

          
            <span id="/2023/03/07/RabbitMQ/" class="post-meta-item leancloud_visitors" data-flag-title="jacoco+arthas" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">评论次数：</span>
    
    <a title="valine" href="/2023/03/07/RabbitMQ/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2023/03/07/RabbitMQ/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>13 分钟</span>
            </span>
            <div class="post-description">jacoco+arthas</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-jacoco"><a href="#1-jacoco" class="headerlink" title="1.jacoco"></a>1.jacoco</h1><ul>
<li><p>官网：<a target="_blank" rel="noopener" href="https://www.jacoco.org/jacoco/">https://www.jacoco.org/jacoco/</a></p>
</li>
<li><p>下载解压即可直接使用</p>
<p><img src="image-20250719190337077.png" alt="image-20250719190337077"></p>
</li>
</ul>
<h2 id="1-1-命令"><a href="#1-1-命令" class="headerlink" title="1.1 命令"></a>1.1 命令</h2><blockquote>
<p>1.启动被测应用时配置</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用于在Java应用中集成JaCoCo覆盖率统计工具，并通过TCP服务端模式收集数据，同时支持增量统计</span></span><br><span class="line">java -javaagent:/root/jacoco/jacoco/lib/jacocoagent.jar=includes=*,output=tcpserver,port=6300,address=192.168.198.173,append=<span class="literal">true</span> -jar arthas-1.0-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>

<ul>
<li><p>‌**<code>-javaagent</code> 启动参数**‌</p>
<ul>
<li>路径指定：<code>/root/jacoco/jacoco/lib/jacocoagent.jar</code><br>JaCoCo代理JAR的绝对路径，需确保文件存在且可读‌</li>
<li><code>includes=*</code><br>监控所有类（可通过<code>com.example.*</code>限定包范围）‌</li>
<li><code>output=tcpserver</code><br>数据输出模式为TCP服务端，需配合<code>port</code>和<code>address</code>使用‌</li>
</ul>
</li>
<li><p><strong>TCP服务配置</strong>‌</p>
<ul>
<li><code>port=6300</code><br>指定服务监听端口（需确保防火墙放行）‌</li>
<li><code>address=192.168.198.173</code><br>允许192.168.198.173连接（address&#x3D;0.0.0.0，允许任意IP连接）‌</li>
<li><code>append=true</code><br>多次运行应用时累计覆盖率数据（否则会覆盖历史数据）‌</li>
</ul>
</li>
<li><p><strong>应用启动部分</strong>‌</p>
<ul>
<li><code>-jar arthas-1.0-SNAPSHOT.jar</code><br>目标应用的JAR文件，JaCoCo会监控其执行过程‌</li>
</ul>
<p><img src="image-20250719163854459.png" alt="image-20250719163854459"></p>
</li>
</ul>
<blockquote>
<p>2.通过JaCoCo CLI从TCP服务端拉取数据</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从运行中的Java应用（通过JaCoCo TCP服务端模式）拉取覆盖率数据并保存到本地文件</span></span><br><span class="line">java -jar /root/jacoco/jacoco/lib/jacococli.jar dump --address 192.168.198.173 --port 6300 --destfile coverage.exec</span><br></pre></td></tr></table></figure>

<ul>
<li><p>**<code>java -jar /root/jacoco/jacoco/lib/jacococli.jar</code>**‌</p>
<ul>
<li>指定JaCoCo命令行工具路径，需确保文件存在且可执行‌</li>
</ul>
</li>
<li><p><strong><code>dump</code> 子命令</strong>‌：专用于从TCP服务端获取覆盖率数据</p>
<ul>
<li><code>--address 192.168.198.173</code><br>目标应用的IP地址（需与被监控应用启动时的<code>address</code>参数一致）‌</li>
<li><code>--port 6300</code><br>目标应用的TCP服务端口（默认6300，需确保端口可连通）‌</li>
<li><code>--destfile coverage.exec</code><br>覆盖率数据保存路径（生成<code>.exec</code>二进制文件）‌</li>
</ul>
<p><img src="image-20250719163913776.png" alt="image-20250719163913776"></p>
</li>
</ul>
<blockquote>
<p>3.生成报告</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用于将JaCoCo收集的覆盖率数据（.exec文件）转换为HTML格式的可视化报告</span></span><br><span class="line">java -jar /root/jacoco/jacoco/lib/jacococli.jar report coverage.exec \</span><br><span class="line">--classfiles ./jacoco_arthas/arthas/target/classes \</span><br><span class="line">--sourcefiles ./jacoco_arthas/arthas/src/main/java \</span><br><span class="line">--html ./report --encoding utf-8</span><br><span class="line"></span><br><span class="line"><span class="comment"># 无法在线查看覆盖率报告，可以将报告直接生成到tomcat目录下</span></span><br><span class="line">java -jar /root/jacoco/jacoco/lib/jacococli.jar report coverage.exec \</span><br><span class="line">--classfiles ./jacoco_arthas/arthas/target/classes \</span><br><span class="line">--sourcefiles ./jacoco_arthas/arthas/src/main/java \</span><br><span class="line">--html /root/docker_volume/tomcat/webapps/jacoco/report --encoding utf-8</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>java -jar /root/jacoco/jacoco/lib/jacococli.jar report coverage.exec</code></p>
<ul>
<li>调用JaCoCo命令行工具解析二进制覆盖率文件<code>coverage.exec</code></li>
</ul>
</li>
<li><p><code>--classfiles ./jacoco_arthas/arthas/target/classes</code></p>
<ul>
<li>指定编译后的.class文件路径（必须与生成.exec时的class版本一致）</li>
</ul>
</li>
<li><p><code>--sourcefiles ./jacoco_arthas/arthas/src/main/java</code></p>
<ul>
<li>关联源代码路径（用于展示具体未覆盖代码行）</li>
</ul>
</li>
<li><p><code>--html ./report</code></p>
<ul>
<li>生成HTML报告到指定目录（自动创建子目录）15</li>
</ul>
</li>
<li><p><code>--encoding utf-8</code></p>
<ul>
<li>设置源码文件编码（避免中文乱码）</li>
</ul>
<p><img src="image-20250719164005438.png" alt="image-20250719164005438"></p>
</li>
</ul>
<h2 id="1-2-报告"><a href="#1-2-报告" class="headerlink" title="1.2 报告"></a>1.2 报告</h2><blockquote>
<p>报告按层级</p>
</blockquote>
<ul>
<li><strong>项目总览</strong>‌<ul>
<li>整体覆盖率概览（含所有指标）</li>
</ul>
</li>
</ul>
<p><img src="image-20250719174214866.png" alt="image-20250719174214866"></p>
<ul>
<li><p><strong>包&#x2F;类&#x2F;方法级</strong>‌</p>
<ul>
<li><p>包覆盖率 → 类覆盖率 → 方法覆盖率 → 代码行详情</p>
<p><img src="image-20250719174937930.png" alt="image-20250719174937930"></p>
<p><img src="image-20250719175046341.png" alt="image-20250719175046341"></p>
</li>
</ul>
</li>
<li><p>分支点显示钻石图标</p>
<p><img src="image-20250719175331789.png" alt="image-20250719175331789"></p>
</li>
</ul>
<h3 id="1-2-1-表格"><a href="#1-2-1-表格" class="headerlink" title="1.2.1 表格"></a>1.2.1 表格</h3><h3 id="1-2-2-颜色"><a href="#1-2-2-颜色" class="headerlink" title="1.2.2 颜色"></a>1.2.2 颜色</h3><table>
<thead>
<tr>
<th><strong>标记类型</strong>‌</th>
<th>‌<strong>颜色</strong>‌</th>
<th>‌<strong>含义</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>行背景色</strong>‌</td>
<td>红色</td>
<td>该行所有指令均未执行</td>
</tr>
<tr>
<td></td>
<td>黄色</td>
<td>该行部分指令执行（如分支未全覆盖）</td>
</tr>
<tr>
<td></td>
<td>绿色</td>
<td>该行所有指令已执行</td>
</tr>
<tr>
<td>‌<strong>分支图标（钻石）</strong>‌</td>
<td>红色</td>
<td>分支全未覆盖</td>
</tr>
<tr>
<td></td>
<td>黄色</td>
<td>分支部分覆盖</td>
</tr>
<tr>
<td></td>
<td>绿色</td>
<td>分支全覆盖</td>
</tr>
</tbody></table>
<h2 id="1-3-个性化"><a href="#1-3-个性化" class="headerlink" title="1.3 个性化"></a>1.3 个性化</h2><p>&#x2F;&#x2F;TODO 修改源码，个性化jacoco</p>
<h2 id="1-4-定时生成"><a href="#1-4-定时生成" class="headerlink" title="1.4 定时生成"></a>1.4 定时生成</h2><blockquote>
<p>1.新增执行的脚本并通过<code>chmod +x</code>命令添加可执行权限‌</p>
</blockquote>
<table>
<thead>
<tr>
<th>特性</th>
<th><code>command 2&gt;&amp;1 &gt;&gt; file</code></th>
<th><code>command &gt;&gt; file 2&gt;&amp;1</code></th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>标准输出流向</strong>‌</td>
<td>文件</td>
<td>文件</td>
</tr>
<tr>
<td>‌<strong>标准错误流向</strong>‌</td>
<td>终端</td>
<td>文件</td>
</tr>
<tr>
<td>‌<strong>日志完整性</strong>‌</td>
<td>分离（错误丢失）</td>
<td>完整记录</td>
</tr>
<tr>
<td>‌<strong>典型用途</strong>‌</td>
<td>仅需记录正常输出时</td>
<td>需完整日志的场景‌</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Jacoco报告生成脚本（每30秒执行）</span></span><br><span class="line">LOG_FILE=<span class="string">&quot;/root/jacoco/jacoco_report.log&quot;</span></span><br><span class="line">​</span><br><span class="line">IP=$(hostname -I | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;当前主机IP: <span class="variable">$IP</span>&quot;</span> &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 开始通过JaCoCo CLI从TCP服务端拉取数据&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    </span><br><span class="line">    java -jar /root/jacoco/jacoco/lib/jacococli.jar dump --address <span class="variable">$IP</span> --port 6300 \</span><br><span class="line">    --destfile /root/jacoco/coverage.exec 2&gt;&amp;1 &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 拉取数据完成&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 开始生成Jacoco报告&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">  </span><br><span class="line">    java -jar /root/jacoco/jacoco/lib/jacococli.jar report /root/jacoco/coverage.exec \</span><br><span class="line">    --classfiles /root/jacoco/jacoco_arthas/arthas/target/classes \</span><br><span class="line">    --sourcefiles /root/jacoco/jacoco_arthas/arthas/src/main/java \</span><br><span class="line">    --html /root/docker_volume/tomcat/webapps/jacoco/report --encoding utf-8 2&gt;&amp;1 &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 报告生成完成&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    <span class="built_in">sleep</span> 30</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Jacoco报告生成脚本（每30秒执行）</span></span><br><span class="line">CURRENT_PATH=$(<span class="built_in">pwd</span>)</span><br><span class="line">LOG_FILE=<span class="string">&quot;<span class="variable">$CURRENT_PATH</span>/jacoco_report.log&quot;</span></span><br><span class="line">​</span><br><span class="line">IP=$(hostname -I | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;当前主机IP: <span class="variable">$IP</span>&quot;</span> &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 开始通过JaCoCo CLI从TCP服务端拉取数据&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    </span><br><span class="line">    java -jar <span class="variable">$CURRENT_PATH</span>/jacoco/lib/jacococli.jar dump --address <span class="variable">$IP</span> --port 6300 \</span><br><span class="line">    --destfile <span class="variable">$CURRENT_PATH</span>/coverage.exec &gt;&gt; <span class="variable">$LOG_FILE</span> 2&gt;&amp;1</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 拉取数据完成&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 开始生成Jacoco报告&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">  </span><br><span class="line">    java -jar <span class="variable">$CURRENT_PATH</span>/jacoco/lib/jacococli.jar report /root/jacoco/coverage.exec \</span><br><span class="line">    --classfiles <span class="variable">$CURRENT_PATH</span>/jacoco_arthas/arthas/target/classes \</span><br><span class="line">    --sourcefiles <span class="variable">$CURRENT_PATH</span>/jacoco_arthas/arthas/src/main/java \</span><br><span class="line">    --html /root/docker_volume/tomcat/webapps/jacoco/report --encoding utf-8 &gt;&gt; <span class="variable">$LOG_FILE</span> 2&gt;&amp;1</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;===== [<span class="subst">$(date &#x27;+%Y-%m-%d %H:%M:%S&#x27;)</span>] 报告生成完成&quot;</span>=====  &gt;&gt; <span class="variable">$LOG_FILE</span></span><br><span class="line">    <span class="built_in">sleep</span> 30</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">bash</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim generate_jacoco_report.sh</span><br><span class="line">​</span><br><span class="line"><span class="built_in">chmod</span> +x generate_jacoco_report.sh</span><br></pre></td></tr></table></figure>

<p><img src="image-20250719204921809.png" alt="image-20250719204921809"></p>
<blockquote>
<p>2.&#x2F;etc&#x2F;systemd&#x2F;system 目录下新增服务jacoco_report.service</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Jacoco Coverage Report Generator(jacoco覆盖率报告生成服务)</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/bin/bash /root/jacoco/generate_jacoco_report.sh</span><br><span class="line">Restart=always</span><br><span class="line">User=root</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p><img src="image-20250719200236841.png" alt="image-20250719200236841"></p>
<blockquote>
<p>3.启动服务jacoco_report.service</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">systemctl start jacoco_report</span><br><span class="line"></span><br><span class="line"><span class="comment"># 先重新加载所有systemd单元文件配置（包括.service文件，再启用服务实现持久化自启</span></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl <span class="built_in">enable</span> jacoco_report</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制终止所有同名进</span></span><br><span class="line">pkill -f 进程名 </span><br></pre></td></tr></table></figure>

<h1 id="2-arthas"><a href="#2-arthas" class="headerlink" title="2.arthas"></a>2.arthas</h1><ul>
<li>官网：<a target="_blank" rel="noopener" href="https://arthas.aliyun.com/">https://arthas.aliyun.com/</a></li>
</ul>
<p>定位和诊断运行的java项目代码</p>
<h2 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 安装</h2><blockquote>
<p>卸载：直接删除2个文件夹：.arthas和logs</p>
</blockquote>
<blockquote>
<p>linux</p>
</blockquote>
<ul>
<li><p>1.在线安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir -p arthas</span></span><br><span class="line"><span class="comment"># cd arthas</span></span><br><span class="line">curl -O https://alibaba.github.io/arthas/arthas-boot.jar</span><br><span class="line"><span class="comment"># 启动arthas(前首次执行即自动安装，后续启动直接复用)</span></span><br><span class="line"><span class="comment"># 前提：必须要有java进程在运行</span></span><br><span class="line">java -jar arthas-boot.jar</span><br><span class="line"><span class="comment"># 默认安装目录 arthas home: /root/.arthas/lib/版本号/arthas</span></span><br><span class="line"><span class="comment"># 日志和缓存目录 arthas home: /root/logs</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# cd arthas/</span><br><span class="line">[root@master arthas]# curl -O https://alibaba.github.io/arthas/arthas-boot.jar</span><br><span class="line"><span class="meta prompt_">  % </span><span class="language-bash">Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  141k  100  141k    0     0  10987      0  0:00:13  0:00:13 --:--:-- 22609</span><br><span class="line">[root@master arthas]# java -jar arthas-boot.jar</span><br><span class="line">[INFO] JAVA_HOME: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.x86_64/jre</span><br><span class="line">[INFO] arthas-boot version: 4.0.5</span><br><span class="line">[INFO] Can not find java process. Try to run `jps` command lists the instrumented Java HotSpot VMs on the target system.</span><br><span class="line">Please select an available pid.</span><br><span class="line">[root@master arthas]# java -jar arthas-boot.jar</span><br><span class="line">[INFO] JAVA_HOME: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.x86_64/jre</span><br><span class="line">[INFO] arthas-boot version: 4.0.5</span><br><span class="line">[INFO] Found existing java process, please choose one and input the serial number of the process, eg : 1. Then hit ENTER.</span><br><span class="line">* [1]: 3375 xscjcx-0.0.1-SNAPSHOT.jar</span><br><span class="line">1</span><br><span class="line">[INFO] Start download arthas from remote server: https://arthas.aliyun.com/download/4.0.5?mirror=aliyun</span><br><span class="line">[INFO] File size: 13.75 MB, downloaded size: 3.36 MB, downloading ...</span><br><span class="line">[INFO] File size: 13.75 MB, downloaded size: 8.09 MB, downloading ...</span><br><span class="line">[INFO] Download arthas success.</span><br><span class="line">[INFO] arthas home: /root/.arthas/lib/4.0.5/arthas</span><br><span class="line">[INFO] Try to attach process 3375</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: </span><br><span class="line">[INFO] Attach process 3375 success.</span><br><span class="line">[INFO] arthas-client connect 127.0.0.1 3658</span><br><span class="line">  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.                           </span><br><span class="line"> /  O  \ |  .--. &#x27;&#x27;--.  .--&#x27;|  &#x27;--&#x27;  | /  O  \ &#x27;   .-&#x27;                          </span><br><span class="line">|  .-.  ||  &#x27;--&#x27;.&#x27;   |  |   |  .--.  ||  .-.  |`.  `-.                          </span><br><span class="line">|  | |  ||  |\  \    |  |   |  |  |  ||  | |  |.-&#x27;    |                         </span><br><span class="line">`--&#x27; `--&#x27;`--&#x27; &#x27;--&#x27;   `--&#x27;   `--&#x27;  `--&#x27;`--&#x27; `--&#x27;`-----&#x27;                          </span><br><span class="line"></span><br><span class="line">wiki        https://arthas.aliyun.com/doc                                       </span><br><span class="line">tutorials   https://arthas.aliyun.com/doc/arthas-tutorials.html                 </span><br><span class="line">version     4.0.5                                                               </span><br><span class="line">main_class  xscjcx-0.0.1-SNAPSHOT.jar                                           </span><br><span class="line">pid         3375                                                                </span><br><span class="line">start_time  2025-07-13 00:59:33.582                                             </span><br><span class="line">currnt_time 2025-07-13 01:01:14.012                                             </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">[arthas@3375]$ </span></span><br></pre></td></tr></table></figure>

<p><img src="image-20250713010439506.png" alt="image-20250713010439506"></p>
</li>
<li><p>2.离线安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载地址</span></span><br><span class="line">https://arthas.aliyun.com/download/latest_version?mirror=aliyun</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压  -d /root/arthas 解压存放路径</span></span><br><span class="line">unzip -d /root/arthas arthas-packaging-4.0.5-bin.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 前提：必须要有java进程在运行</span></span><br><span class="line">java -jar arthas-boot.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认安装目录 arthas home: /root/.arthas/lib/版本号/arthas</span></span><br><span class="line"><span class="comment"># 日志和缓存目录 arthas home: /root/logs</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20250713012448690.png" alt="image-20250713012448690"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@master arthas]<span class="comment"># java -jar arthas-boot.jar</span></span><br><span class="line">[INFO] JAVA_HOME: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.x86_64/jre</span><br><span class="line">[INFO] arthas-boot version: 4.0.5</span><br><span class="line">[INFO] Can not find java process. Try to run `jps` <span class="built_in">command</span> lists the instrumented Java HotSpot VMs on the target system.</span><br><span class="line">Please select an available pid.</span><br><span class="line">[root@master arthas]<span class="comment"># java -jar arthas-boot.jar</span></span><br><span class="line">[INFO] JAVA_HOME: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.x86_64/jre</span><br><span class="line">[INFO] arthas-boot version: 4.0.5</span><br><span class="line">[INFO] Found existing java process, please choose one and input the serial number of the process, eg : 1. Then hit ENTER.</span><br><span class="line">* [1]: 4374 xscjcx-0.0.1-SNAPSHOT.jar</span><br><span class="line">1</span><br><span class="line">[INFO] arthas home: /root/arthas</span><br><span class="line">[INFO] Try to attach process 4374</span><br><span class="line">Picked up JAVA_TOOL_OPTIONS: </span><br><span class="line">[INFO] Attach process 4374 success.</span><br><span class="line">[INFO] arthas-client connect 127.0.0.1 3658</span><br><span class="line">  ,---.  ,------. ,--------.,--.  ,--.  ,---.   ,---.                           </span><br><span class="line"> /  O  \ |  .--. <span class="string">&#x27;&#x27;</span>--.  .--<span class="string">&#x27;|  &#x27;</span>--<span class="string">&#x27;  | /  O  \ &#x27;</span>   .-<span class="string">&#x27;                          </span></span><br><span class="line"><span class="string">|  .-.  ||  &#x27;</span>--<span class="string">&#x27;.&#x27;</span>   |  |   |  .--.  ||  .-.  |`.  `-.                          </span><br><span class="line">|  | |  ||  |\  \    |  |   |  |  |  ||  | |  |.-<span class="string">&#x27;    |                         </span></span><br><span class="line"><span class="string">`--&#x27;</span> `--<span class="string">&#x27;`--&#x27;</span> <span class="string">&#x27;--&#x27;</span>   `--<span class="string">&#x27;   `--&#x27;</span>  `--<span class="string">&#x27;`--&#x27;</span> `--<span class="string">&#x27;`-----&#x27;</span>                          </span><br><span class="line"></span><br><span class="line">wiki        https://arthas.aliyun.com/doc                                       </span><br><span class="line">tutorials   https://arthas.aliyun.com/doc/arthas-tutorials.html                 </span><br><span class="line">version     4.0.5                                                               </span><br><span class="line">main_class  xscjcx-0.0.1-SNAPSHOT.jar                                           </span><br><span class="line">pid         4374                                                                </span><br><span class="line">start_time  2025-07-13 02:00:20.771                                             </span><br><span class="line">currnt_time 2025-07-13 02:01:26.703 </span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>WIndows</p>
</blockquote>
<ul>
<li><p>1.在线安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载arthas-boot.jar</span></span><br><span class="line">curl -O https://alibaba.github.io/arthas/arthas-boot.jar</span><br><span class="line"><span class="comment"># 启动arthas(前首次执行即自动安装，后续启动直接复用)</span></span><br><span class="line"><span class="comment"># 前提：必须要有java进程在运行</span></span><br><span class="line">java -jar arthas-boot.jar</span><br><span class="line"><span class="comment"># 默认安装目录arthas home: C:\Users\用户目录\.arthas\lib\版本号\arthas</span></span><br><span class="line"><span class="comment"># 日志和缓存目录 C:\Users\用户目录\logs</span></span><br></pre></td></tr></table></figure>

<p><img src="image-20250712231926101.png" alt="image-20250712231926101"></p>
<p><img src="image-20250713004332035.png" alt="image-20250713004332035"></p>
<p><img src="image-20250713004806252.png" alt="image-20250713004806252"></p>
</li>
<li><p>2.离线安装</p>
<p>同linux一样</p>
</li>
</ul>
<h2 id="2-2-常用命令"><a href="#2-2-常用命令" class="headerlink" title="2.2 常用命令"></a>2.2 常用命令</h2><h3 id="2-2-1-trace"><a href="#2-2-1-trace" class="headerlink" title="2.2.1 trace"></a>2.2.1 trace</h3><blockquote>
<p>trace命令用于追踪方法内部调用路径，并输出方法路径上每个节点的耗时情况</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trace class-pattern method-pattern</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>‌<code>class-pattern</code></td>
<td>类名匹配表达式（支持通配符*）</td>
</tr>
<tr>
<td><code>‌method-pattern‌</code></td>
<td>方法名匹配表达式</td>
</tr>
<tr>
<td><code>‌condition-express</code></td>
<td>条件过滤表达式（OGNL）</td>
</tr>
<tr>
<td><code>‌-E‌</code></td>
<td>开启正则表达式匹配</td>
</tr>
<tr>
<td><code>‌-n &lt;count&gt;</code>‌</td>
<td>限制执行次数（默认100）</td>
</tr>
<tr>
<td>‌<code>#cost‌</code></td>
<td>方法执行耗时（毫秒）</td>
</tr>
<tr>
<td><code>‌-m &lt;num&gt;</code>‌</td>
<td>限制匹配类数量（默认50）</td>
</tr>
</tbody></table>
<p><img src="image-20250713190917458.png" alt="image-20250713190917458"></p>
<p><img src="image-20250713190937875.png" alt="image-20250713190937875"></p>
<h3 id="2-2-2-watch"><a href="#2-2-2-watch" class="headerlink" title="2.2.2 watch"></a>2.2.2 watch</h3><ul>
<li>watch命令用于动态监控Java方法的执行情况，可以实时观测方法的‌<strong>入参、返回值、异常</strong>‌以及执行耗时等关键信息‌</li>
<li>它支持通过OGNL表达式筛选数据<ul>
<li><strong>params</strong>‌：方法参数数组，可通过<code>params</code>访问第一个参数‌</li>
<li>‌<strong>returnObj</strong>‌：方法返回值（仅<code>s/f</code>事件点可用）‌</li>
<li>‌<strong>throwExp</strong>‌：异常对象（仅<code>e/f</code>事件点可用）‌</li>
<li>‌<strong>target</strong>‌：当前对象实例（this）‌</li>
<li>‌**#cost**‌：方法执行耗时（毫秒）‌</li>
<li>…</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">watch class-pattern method-pattern <span class="string">&quot;&#123;params,target,returnobj&#125;&quot;</span> -x 2</span><br><span class="line">watch class-pattern method-pattern <span class="string">&quot;&#123;params,target,returnobj,#cost,throwExp&#125;&quot;</span> -x 2 -f</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>‌class-pattern‌</code></td>
<td>类名匹配表达式（支持通配符*）</td>
</tr>
<tr>
<td><code>‌method-pattern‌</code></td>
<td>方法名匹配表达式</td>
</tr>
<tr>
<td>‌<code>express‌</code></td>
<td>观察表达式（默认<code>&#123;params, target, returnObj&#125;</code>）</td>
</tr>
<tr>
<td><code>‌condition-express‌</code></td>
<td>条件过滤表达式</td>
</tr>
<tr>
<td><code>‌-b‌</code></td>
<td>在方法调用前观察（仅能获取入参）</td>
</tr>
<tr>
<td><code>‌-e‌</code></td>
<td>在方法抛出异常后观察</td>
</tr>
<tr>
<td><code>‌-s‌</code></td>
<td>在方法正常返回后观察</td>
</tr>
<tr>
<td><code>‌-f‌</code></td>
<td>默认选项，在方法结束后观察（包括正常和异常）</td>
</tr>
<tr>
<td><code>‌-x &lt;n&gt;</code>‌</td>
<td>指定输出结果的属性遍历深度（1-4）</td>
</tr>
<tr>
<td><code>‌n &lt;count&gt;</code>‌</td>
<td>限制观察次数</td>
</tr>
<tr>
<td><code>‌-E‌</code></td>
<td>开启正则表达式匹配</td>
</tr>
<tr>
<td><code>‌--exclude-class-pattern</code></td>
<td>排除特定类</td>
</tr>
<tr>
<td><code>-m &lt;num&gt;</code>‌</td>
<td>限制匹配的类数量（默认50）</td>
</tr>
<tr>
<td><code>‌-v‌</code></td>
<td>显示详细信息</td>
</tr>
<tr>
<td>‌<code>#cost‌</code></td>
<td>内置变量，表示方法执行耗时（毫秒）</td>
</tr>
</tbody></table>
<p><img src="image-20250713170143089.png" alt="image-20250713170143089"></p>
<p><img src="image-20250713171338532.png" alt="image-20250713171338532"></p>
<p><img src="image-20250713171951275.png" alt="image-20250713171951275"></p>
<h3 id="2-2-3-monitor"><a href="#2-2-3-monitor" class="headerlink" title="2.2.3 monitor"></a>2.2.3 monitor</h3><blockquote>
<p>用来监视一个时间段中指定方法的执行次数，成功次数，失败次数，耗时等信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">monitor [参数] class-pattern method-pattern [condition-express]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数缩写</th>
<th>完整参数</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>-b</code></td>
<td><code>--before</code></td>
<td>开关</td>
<td>false</td>
<td>‌<strong>前置条件检查</strong>‌：在方法执行前计算条件表达式（默认在方法返回后计算）</td>
</tr>
<tr>
<td><code>-c</code></td>
<td><code>--cycle</code></td>
<td>数值</td>
<td>60</td>
<td>‌<strong>监控周期</strong>‌：统计结果输出间隔（秒），建议生产环境≥10秒</td>
</tr>
<tr>
<td></td>
<td><code>--exclude-class-pattern</code></td>
<td>字符串</td>
<td>无</td>
<td>‌<strong>排除类</strong>‌：使用 <code>.</code> 或 <code>/</code> 分隔的排除类名模式</td>
</tr>
<tr>
<td><code>-n</code></td>
<td><code>--limits</code></td>
<td>数值</td>
<td>无</td>
<td>‌<strong>调用阈值</strong>‌：仅统计执行次数超过该值的方法</td>
</tr>
<tr>
<td><code>-m</code></td>
<td><code>--maxMatch</code></td>
<td>数值</td>
<td>50</td>
<td>‌<strong>类匹配上限</strong>‌：防止匹配过多类导致性能问题</td>
</tr>
<tr>
<td><code>-E</code></td>
<td><code>--regex</code></td>
<td>开关</td>
<td>false</td>
<td>‌<strong>正则模式</strong>‌：启用后 <code>class-pattern</code> 使用正则表达式匹配</td>
</tr>
<tr>
<td><code>-v</code></td>
<td><code>--verbose</code></td>
<td>开关</td>
<td>false</td>
<td>‌<strong>详细日志</strong>‌：打印匹配的类&#x2F;方法等调试信息</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>监控项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>timestamp</td>
<td>时间戳</td>
</tr>
<tr>
<td>class</td>
<td>类</td>
</tr>
<tr>
<td>method</td>
<td>方法（构造方法、普通方法）</td>
</tr>
<tr>
<td>total</td>
<td>调用次数</td>
</tr>
<tr>
<td>success</td>
<td>成功次数</td>
</tr>
<tr>
<td>fail</td>
<td>失败次数</td>
</tr>
<tr>
<td>rt</td>
<td>平均耗时</td>
</tr>
<tr>
<td>fail-rate</td>
<td>失败率</td>
</tr>
</tbody></table>
<p><img src="image-20250713163326366.png" alt="image-20250713163326366"></p>
<h3 id="2-2-4-stack"><a href="#2-2-4-stack" class="headerlink" title="2.2.4 stack"></a>2.2.4 stack</h3><blockquote>
<p>输出指定方法的调用路径</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stack class-pattern method-pattern [参数]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数说明</th>
<th>默认值</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>class-pattern</code></td>
<td>类名匹配表达式</td>
<td>无</td>
<td><code>demo.MathGame</code></td>
</tr>
<tr>
<td><code>method-pattern</code></td>
<td>方法名匹配表达式</td>
<td>无</td>
<td><code>primeFactors</code></td>
</tr>
<tr>
<td><code>condition-express</code></td>
<td>OGNL条件表达式</td>
<td>无</td>
<td><code>params[0]&lt;0</code></td>
</tr>
<tr>
<td><code>-E</code></td>
<td>开启正则表达式匹配</td>
<td>通配符匹配</td>
<td><code>-E</code></td>
</tr>
<tr>
<td><code>-n</code></td>
<td>执行次数限制</td>
<td>无限制</td>
<td><code>-n 5</code></td>
</tr>
<tr>
<td><code>m &lt;arg&gt;</code></td>
<td>Class最大匹配数量</td>
<td>50</td>
<td><code>-m 100</code></td>
</tr>
<tr>
<td><code>--exclude-class-pattern</code></td>
<td>排除特定类</td>
<td>无</td>
<td><code>--exclude-class-pattern *Test*</code></td>
</tr>
<tr>
<td>‌<code>#cost‌</code></td>
<td>内置变量，表示方法执行耗时（毫秒）</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><img src="image-20250713231950847.png" alt="image-20250713231950847"></p>
<h3 id="2-2-5-thread"><a href="#2-2-5-thread" class="headerlink" title="2.2.5 thread"></a>2.2.5 thread</h3><h3 id="2-2-6-tt"><a href="#2-2-6-tt" class="headerlink" title="2.2.6 tt"></a>2.2.6 tt</h3><blockquote>
<p>提供的”时间隧道”功能，能够记录指定方法的每次调用情况，包括入参、返回值和异常信息</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stack [参数] [class-pattern] [method-pattern]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数说明</th>
<th>默认值</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>-t</td>
<td>记录目标方法的调用</td>
<td>无</td>
<td><code>tt -t com.example.Test print</code></td>
</tr>
<tr>
<td>-n</td>
<td>限制记录次数</td>
<td>无限制</td>
<td><code>-n 5</code></td>
</tr>
<tr>
<td>-m</td>
<td>Class最大匹配数量</td>
<td>50</td>
<td><code>-m 100</code></td>
</tr>
<tr>
<td>-l</td>
<td>列出所有记录</td>
<td>无</td>
<td><code>tt -l</code></td>
</tr>
<tr>
<td>-i</td>
<td>查看指定索引的详情</td>
<td>无</td>
<td><code>tt -i 1000</code></td>
</tr>
<tr>
<td>-p</td>
<td>回放指定索引的调用</td>
<td>无</td>
<td><code>tt -p 1000</code></td>
</tr>
<tr>
<td>-w</td>
<td>条件表达式搜索</td>
<td>无</td>
<td><code>tt -w &#39;params[0]==null&#39;</code></td>
</tr>
<tr>
<td>-d</td>
<td>删除指定记录</td>
<td>无</td>
<td><code>tt -d 1000</code></td>
</tr>
<tr>
<td>–exclude-class-pattern</td>
<td>排除特定类</td>
<td>无</td>
<td><code>--exclude-class-pattern *Test*</code></td>
</tr>
</tbody></table>
<p><img src="image-20250713233500215.png" alt="image-20250713233500215"></p>
<h3 id="2-2-7-jad"><a href="#2-2-7-jad" class="headerlink" title="2.2.7 jad"></a>2.2.7 jad</h3><h2 id="2-3-其它命令"><a href="#2-3-其它命令" class="headerlink" title="2.3 其它命令"></a>2.3 其它命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">NAME         DESCRIPTION                                                                                                                          </span><br><span class="line"> help         Display Arthas Help                                                                                                                  </span><br><span class="line"> auth         Authenticates the current session                                                                                                    </span><br><span class="line"> keymap       Display all the available keymap for the specified connection.                                                                       </span><br><span class="line"> sc           Search all the classes loaded by JVM                                                                                                 </span><br><span class="line"> sm           Search the method of classes loaded by JVM                                                                                           </span><br><span class="line"> classloader  Show classloader info                                                                                                                </span><br><span class="line"> jad          Decompile class                                                                                                                      </span><br><span class="line"> getstatic    Show the static field of a class                                                                                                     </span><br><span class="line"> monitor      Monitor method execution statistics, e.g. total/success/failure count, average rt, fail rate, etc.                                   </span><br><span class="line"> stack        Display the stack trace for the specified class and method                                                                           </span><br><span class="line"> thread       Display thread info, thread stack                                                                                                    </span><br><span class="line"> trace        Trace the execution time of specified method invocation.                                                                             </span><br><span class="line"> watch        Display the input/output parameter, return object, and thrown exception of specified method invocation                               </span><br><span class="line"> tt           Time Tunnel                                                                                                                          </span><br><span class="line"> jvm          Display the target JVM information                                                                                                   </span><br><span class="line"> memory       Display jvm memory info.                                                                                                             </span><br><span class="line"> perfcounter  Display the perf counter information.                                                                                                </span><br><span class="line"> ognl         Execute ognl expression.                                                                                                             </span><br><span class="line"> mc           Memory compiler, compiles java files into bytecode and class files in memory.                                                        </span><br><span class="line"> redefine     Redefine classes. @see Instrumentation#redefineClasses(ClassDefinition...)                                                           </span><br><span class="line"> retransform  Retransform classes. @see Instrumentation#retransformClasses(Class...)                                                               </span><br><span class="line"> dashboard    Overview of target jvm&#x27;s thread, memory, gc, vm, tomcat info.                                                                        </span><br><span class="line"> dump         Dump class byte array from JVM                                                                                                       </span><br><span class="line"> heapdump     Heap dump                                                                                                                            </span><br><span class="line"> options      View and change various Arthas options                                                                                               </span><br><span class="line"> cls          Clear the screen                                                                                                                     </span><br><span class="line"> reset        Reset all the enhanced classes                                                                                                       </span><br><span class="line"> version      Display Arthas version                                                                                                               </span><br><span class="line"> session      Display current session information                                                                                                  </span><br><span class="line"> sysprop      Display and change the system properties.                                                                                            </span><br><span class="line"> sysenv       Display the system env.                                                                                                              </span><br><span class="line"> vmoption     Display, and update the vm diagnostic options.                                                                                       </span><br><span class="line"> logger       Print logger info, and update the logger level                                                                                       </span><br><span class="line"> history      Display command history                                                                                                              </span><br><span class="line"> cat          Concatenate and print files                                                                                                          </span><br><span class="line"> base64       Encode and decode using Base64 representation                                                                                        </span><br><span class="line"> echo         write arguments to the standard output                                                                                               </span><br><span class="line"> pwd          Return working directory name                                                                                                        </span><br><span class="line"> mbean        Display the mbean information                                                                                                        </span><br><span class="line"> grep         grep command for pipes.                                                                                                              </span><br><span class="line"> tee          tee command for pipes.                                                                                                               </span><br><span class="line"> profiler     Async Profiler. https://github.com/jvm-profiling-tools/async-profiler                                                                </span><br><span class="line"> vmtool       jvm tool                                                                                                                             </span><br><span class="line"> stop         Stop/Shutdown Arthas server and exit the console.                                                                                    </span><br><span class="line"> jfr          Java Flight Recorder Command                                   </span><br></pre></td></tr></table></figure>

<h3 id="2-3-1-options"><a href="#2-3-1-options" class="headerlink" title="2.3.1 options"></a>2.3.1 options</h3><blockquote>
<p>用于查看和修改Arthas的全局配置选项</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数名称</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>unsafe</td>
<td>false</td>
<td>是否允许增强系统类</td>
</tr>
<tr>
<td>dump</td>
<td>false</td>
<td>是否dump增强的类</td>
</tr>
<tr>
<td>batch-re-transform</td>
<td>true</td>
<td>是否批量retransform类</td>
</tr>
<tr>
<td>json-format</td>
<td>false</td>
<td>是否以JSON格式输出</td>
</tr>
<tr>
<td>disable-sub-class</td>
<td>false</td>
<td>是否禁用子类匹配</td>
</tr>
<tr>
<td>support-default-method</td>
<td>true</td>
<td>是否匹配接口中的 default 方法</td>
</tr>
<tr>
<td>save-result</td>
<td>false</td>
<td>是否保存命令结果到日志</td>
</tr>
<tr>
<td>job-timeout</td>
<td>86400</td>
<td>异步任务超时时间(秒)</td>
</tr>
<tr>
<td>print-parent-fields</td>
<td>true</td>
<td>是否打印父类中的字段信息</td>
</tr>
<tr>
<td>verbose</td>
<td>false</td>
<td>是否显示详细输出</td>
</tr>
<tr>
<td>strict</td>
<td>true</td>
<td>是否启用严格模式</td>
</tr>
</tbody></table>
<p><img src="image-20250714232943833.png" alt="image-20250714232943833"></p>
<p><img src="image-20250716223359067.png" alt="image-20250716223359067"></p>
<h3 id="2-3-2-profiler"><a href="#2-3-2-profiler" class="headerlink" title="2.3.2 profiler"></a>2.3.2 profiler</h3><blockquote>
<p>基于async-profiler工具实现的性能分析功能，主要用于生成应用热点的火焰图</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">profiler action [actionArg]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数名称</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>action</td>
<td>要执行的操作(start&#x2F;stop&#x2F;list等)</td>
</tr>
<tr>
<td>actionArg</td>
<td>属性名模式</td>
</tr>
<tr>
<td><code>-i</code></td>
<td>采样间隔(单位)，默认10ms</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>输出文件路径</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>运行评测的秒数</td>
</tr>
<tr>
<td><code>-e</code></td>
<td>要跟踪的事件类型(cpu&#x2F;alloc&#x2F;lock等)</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动profiler，默认监听CPU事件，开始采样‌</span></span><br><span class="line">profiler start</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看支持的事件类型</span></span><br><span class="line">profiler list</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取已采集样本数</span></span><br><span class="line">profiler getSamples</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看profiler状态</span></span><br><span class="line">profiler status</span><br><span class="line"></span><br><span class="line"><span class="comment">#停止并生成火焰图</span></span><br><span class="line">profiler stop --format html</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定输出路径</span></span><br><span class="line">profiler start -f /tmp/output.html</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>峡谷杨爹
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/" title="jacoco+arthas">https://xiaguyangdie.github.io/2023/03/07/RabbitMQ/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/03/03/Fiddler/" rel="prev" title="Fiddler">
      <i class="fa fa-chevron-left"></i> Fiddler
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/03/09/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8A%80%E6%9C%AF%E6%A0%88/" rel="next" title="微服务技术栈">
      微服务技术栈 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-jacoco"><span class="nav-text">1.jacoco</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-%E5%91%BD%E4%BB%A4"><span class="nav-text">1.1 命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E6%8A%A5%E5%91%8A"><span class="nav-text">1.2 报告</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1-%E8%A1%A8%E6%A0%BC"><span class="nav-text">1.2.1 表格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2-%E9%A2%9C%E8%89%B2"><span class="nav-text">1.2.2 颜色</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-%E4%B8%AA%E6%80%A7%E5%8C%96"><span class="nav-text">1.3 个性化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E5%AE%9A%E6%97%B6%E7%94%9F%E6%88%90"><span class="nav-text">1.4 定时生成</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-arthas"><span class="nav-text">2.arthas</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E5%AE%89%E8%A3%85"><span class="nav-text">2.1 安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">2.2 常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-trace"><span class="nav-text">2.2.1 trace</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-watch"><span class="nav-text">2.2.2 watch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-monitor"><span class="nav-text">2.2.3 monitor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-stack"><span class="nav-text">2.2.4 stack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-5-thread"><span class="nav-text">2.2.5 thread</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-6-tt"><span class="nav-text">2.2.6 tt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-7-jad"><span class="nav-text">2.2.7 jad</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E5%85%B6%E5%AE%83%E5%91%BD%E4%BB%A4"><span class="nav-text">2.3 其它命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1-options"><span class="nav-text">2.3.1 options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2-profiler"><span class="nav-text">2.3.2 profiler</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="峡谷杨爹"
      src="/images/%E5%8D%9A%E5%AE%A2.webp">
  <p class="site-author-name" itemprop="name">峡谷杨爹</p>
  <div class="site-description" itemprop="description">write less, do more</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">149</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xiaguyangdie" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiaguyangdie" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:424793597@qq.com" title="E-Mail → mailto:424793597@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	</div>
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=7450004106&auto=0&height=430"></iframe>  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">峡谷杨爹</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">2.9m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">44:02</span>
</div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"jc38mXtIY9GP4HNtOg9qT7Fo-gzGzoHsz","app_key":"yDHjFefMRYGX7YloQFcPnw78","server_url":null,"security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'jc38mXtIY9GP4HNtOg9qT7Fo-gzGzoHsz',
      appKey     : 'yDHjFefMRYGX7YloQFcPnw78',
      placeholder: "说说",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
